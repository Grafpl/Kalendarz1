<Window x:Class="Kalendarz1.Komunikator.Views.ChatNotificationPopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Nowa wiadomość"
        Width="350" Height="110"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize">

    <Window.Resources>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0" To="1" Duration="0:0:0.3"/>
            <ThicknessAnimation Storyboard.TargetName="MainBorder"
                               Storyboard.TargetProperty="Margin"
                               From="20,20,0,0" To="0,0,0,0" Duration="0:0:0.3">
                <ThicknessAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
        </Storyboard>

        <Storyboard x:Key="FadeOut">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="1" To="0" Duration="0:0:0.3"/>
        </Storyboard>
    </Window.Resources>

    <Border x:Name="MainBorder" Background="#2D2D44" CornerRadius="12"
            BorderBrush="#7C3AED" BorderThickness="1"
            Margin="10" Cursor="Hand"
            MouseLeftButtonUp="Border_MouseLeftButtonUp">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.5"/>
        </Border.Effect>

        <Grid Margin="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Avatar -->
            <Grid Grid.Column="0" Width="56" Height="56" Margin="0,0,12,0">
                <Ellipse>
                    <Ellipse.Fill>
                        <ImageBrush x:Name="SenderAvatar" Stretch="UniformToFill"/>
                    </Ellipse.Fill>
                </Ellipse>
            </Grid>

            <!-- Treść -->
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock x:Name="SenderName" Text=""
                           Foreground="White" FontSize="14" FontWeight="SemiBold"/>
                <TextBlock x:Name="MessagePreview" Text=""
                           Foreground="#A0A0B0" FontSize="12"
                           TextTrimming="CharacterEllipsis" MaxWidth="200"/>
            </StackPanel>

            <!-- Zamknij -->
            <Button Grid.Column="2" Content="✕" FontSize="14"
                    Background="Transparent" Foreground="#A0A0B0"
                    BorderThickness="0" Cursor="Hand"
                    VerticalAlignment="Top"
                    Click="CloseButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Border>
</Window>
