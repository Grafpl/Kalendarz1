<Window x:Class="Kalendarz1.Komunikator.Views.ChatNotificationPopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Nowa wiadomość"
        Width="320" Height="90"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize">

    <Window.Resources>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.2"/>
            <ThicknessAnimation Storyboard.TargetName="MainBorder" Storyboard.TargetProperty="Margin"
                               From="15,15,0,0" To="0,0,0,0" Duration="0:0:0.2">
                <ThicknessAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </ThicknessAnimation.EasingFunction>
            </ThicknessAnimation>
        </Storyboard>
        <Storyboard x:Key="FadeOut">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:0.2"/>
        </Storyboard>
    </Window.Resources>

    <Border x:Name="MainBorder" Background="#1F2937" CornerRadius="10"
            BorderBrush="#7C3AED" BorderThickness="1" Margin="8" Cursor="Hand"
            MouseLeftButtonUp="Border_MouseLeftButtonUp">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="3" Opacity="0.4"/>
        </Border.Effect>

        <Grid Margin="12,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Grid Width="44" Height="44" Margin="0,0,10,0">
                <Ellipse>
                    <Ellipse.Fill>
                        <ImageBrush x:Name="SenderAvatar" Stretch="UniformToFill"/>
                    </Ellipse.Fill>
                </Ellipse>
            </Grid>

            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock x:Name="SenderName" Foreground="#F3F4F6" FontSize="13" FontWeight="SemiBold"/>
                <TextBlock x:Name="MessagePreview" Foreground="#9CA3AF" FontSize="12"
                           TextTrimming="CharacterEllipsis" MaxWidth="180" Margin="0,2,0,0"/>
            </StackPanel>

            <Button Grid.Column="2" Content="✕" FontSize="12"
                    Background="Transparent" Foreground="#9CA3AF"
                    BorderThickness="0" Cursor="Hand" VerticalAlignment="Top"
                    Click="CloseButton_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Border>
</Window>
