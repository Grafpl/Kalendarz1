<Window x:Class="Kalendarz1.OfertaCenowa.OfertaHandlowaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Oferta Handlowa" 
        Height="850" 
        Width="1250"
        WindowStartupLocation="CenterScreen"
        Background="Transparent" 
        AllowsTransparency="True" 
        WindowStyle="None"
        ResizeMode="NoResize">

    <Window.Resources>
        <Color x:Key="PrimaryGreenColor">#5C8A3A</Color>
        <SolidColorBrush x:Key="PrimaryGreenBrush" Color="{StaticResource PrimaryGreenColor}"/>

        <SolidColorBrush x:Key="PrimaryGreenHoverBrush" Color="#4B732F"/>
        <SolidColorBrush x:Key="PrimaryGreenPressedBrush" Color="#3A5C24"/>
        <SolidColorBrush x:Key="DarkTextBrush" Color="#2C3E50"/>
        <SolidColorBrush x:Key="LightTextBrush" Color="#7F8C8D"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#D1D5DB"/>
        <SolidColorBrush x:Key="DisabledBrush" Color="#F3F4F6"/>
        <SolidColorBrush x:Key="AlternatingRowBrush" Color="#F9FAF9"/>

        <DropShadowEffect x:Key="FocusShadowEffect" ShadowDepth="0" Color="{StaticResource PrimaryGreenColor}" Opacity="0.8" BlurRadius="8"/>

        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource LightTextBrush}"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Height" Value="38"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Effect" Value="{StaticResource FocusShadowEffect}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Height" Value="38"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Effect" Value="{StaticResource FocusShadowEffect}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="WindowButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Name="border">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#33FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="48"/>
            <Setter Property="Padding" Value="35,0"/>
            <Setter Property="Background" Value="{StaticResource PrimaryGreenBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" Color="#000000" Opacity="0.15" BlurRadius="5"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryGreenHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryGreenPressedBrush}"/>
                                <Setter TargetName="border" Property="Effect" Value="{x:Null}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource DisabledBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource DarkTextBrush}"/>
        </Style>

        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource DarkTextBrush}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="DataGridHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{StaticResource PrimaryGreenBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

    </Window.Resources>

    <Border Background="White" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" Color="Black" Opacity="0.1" BlurRadius="20"/>
        </Border.Effect>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Background="{StaticResource PrimaryGreenBrush}" CornerRadius="10,10,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Height="50">
                    <TextBlock Text="📋 Nowa Oferta Handlowa" FontSize="16" FontWeight="SemiBold" Foreground="White" 
                               VerticalAlignment="Center" HorizontalAlignment="Left" Margin="20,0,0,0"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="—" Click="MinimizeButton_Click" Style="{StaticResource WindowButtonStyle}"/>
                        <Button Content="✕" Click="CloseButton_Click" Style="{StaticResource WindowButtonStyle}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Background="#F4F6F9">
                <StackPanel Margin="25">

                    <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="KLIENT (wpisz, aby wyszukać lub rozwiń)" Style="{StaticResource LabelStyle}"/>
                                <ComboBox x:Name="cmbKlienci"
                                          IsEditable="False"
                                          IsTextSearchEnabled="True"
                                          SelectionChanged="CmbKlienci_SelectionChanged"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" VerticalAlignment="Bottom">
                                <TextBlock Text="INFORMACJE" Style="{StaticResource LabelStyle}"/>
                                <TextBlock x:Name="txtKlientInfo" Text="-" FontSize="12" Foreground="{StaticResource DarkTextBrush}" TextWrapping="Wrap" MinHeight="38" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="DODAJ PRODUKT DO OFERTY" Style="{StaticResource HeaderTextStyle}"/>

                            <Grid Grid.Row="1" Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="2.5*"/>
                                    <ColumnDefinition Width="1.2*"/>
                                    <ColumnDefinition Width="1.2*"/>
                                    <ColumnDefinition Width="1.5*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel VerticalAlignment="Bottom" Margin="0,0,20,0">
                                    <TextBlock Text="TYP" Style="{StaticResource LabelStyle}"/>
                                    <StackPanel Orientation="Horizontal" MinHeight="38" VerticalAlignment="Center">
                                        <RadioButton x:Name="rbSwiezy" Content="Świeże" IsChecked="True" Margin="0,0,15,0" Checked="RbTypProduktu_Checked" VerticalAlignment="Center"/>
                                        <RadioButton x:Name="rbMrozony" Content="Mrożone" Checked="RbTypProduktu_Checked" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                    <TextBlock Text="PRODUKT" Style="{StaticResource LabelStyle}"/>
                                    <ComboBox x:Name="cboSzybkieDodawanieProduktu" DisplayMemberPath="Nazwa"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2" Margin="0,0,15,0">
                                    <TextBlock Text="ILOŚĆ (KG)" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="txtSzybkieDodawanieIlosc"/>
                                </StackPanel>

                                <StackPanel Grid.Column="3" Margin="0,0,15,0">
                                    <TextBlock Text="CENA (ZŁ)" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="txtSzybkieDodawanieCena"/>
                                </StackPanel>

                                <Button x:Name="btnSzybkieDodawanie" Grid.Column="4" Content="➕ Dodaj" VerticalAlignment="Bottom"
                                        Click="BtnSzybkieDodawanie_Click" Style="{StaticResource PrimaryButtonStyle}" Height="38"/>
                            </Grid>

                            <DataGrid x:Name="dgTowary" Grid.Row="2" AutoGenerateColumns="False" CanUserAddRows="False" SelectionMode="Single" HeadersVisibility="Column" 
                                      GridLinesVisibility="Horizontal" BorderThickness="0" Background="Transparent" RowHeight="35" FontSize="11" MinHeight="150"
                                      AlternatingRowBackground="{StaticResource AlternatingRowBrush}" RowBackground="White"
                                      ColumnHeaderStyle="{StaticResource DataGridHeaderStyle}">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Towar" Binding="{Binding Nazwa}" Width="3*" IsReadOnly="True"/>
                                    <DataGridTextColumn Header="Ilość (kg)" Binding="{Binding Ilosc, StringFormat=N0}" Width="*"/>
                                    <DataGridTextColumn Header="Cena jedn. (zł)" Binding="{Binding CenaJednostkowa, StringFormat=N2}" Width="*"/>
                                    <DataGridTextColumn Header="Wartość (zł)" Binding="{Binding Wartosc, StringFormat=N2}" Width="*" IsReadOnly="True"/>
                                    <DataGridTemplateColumn Header="" Width="50">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Button Content="🗑" Click="BtnUsunTowar_Click" Background="Transparent" BorderThickness="0" Cursor="Hand"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Border>

                    <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1" CornerRadius="8" Padding="20">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="NOTATKI I WARUNKI" Style="{StaticResource HeaderTextStyle}"/>
                                <TextBox x:Name="txtNotatki" Height="60" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>

                                <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                    <TextBlock Text="Transport:" VerticalAlignment="Center" Margin="0,0,15,0" Foreground="{StaticResource DarkTextBrush}"/>
                                    <RadioButton x:Name="rbTransportWlasny" Content="Transport własny" IsChecked="True" Margin="0,0,15,0" VerticalAlignment="Center"/>
                                    <RadioButton x:Name="rbTransportKlienta" Content="Transport klienta" VerticalAlignment="Center"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="25,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right">
                                <TextBlock Text="WARTOŚĆ OFERTY" FontSize="12" FontWeight="Bold" Foreground="{StaticResource PrimaryGreenBrush}" Margin="0,0,0,5" HorizontalAlignment="Right"/>
                                <TextBlock x:Name="txtWartoscCalkowita" Text="0,00 zł" FontSize="32" FontWeight="Bold" Foreground="{StaticResource DarkTextBrush}" HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <Border Grid.Row="2" Background="#F9FAFB" BorderBrush="#E5E7EB" BorderThickness="0,1,0,0" Padding="25">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="btnGenerujPDF" Content="📄 Generuj PDF" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,10,0" Click="BtnGenerujPDF_Click"/>
                    <Button x:Name="btnZapisz" Content="💾 Zapisz" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,10,0" Click="BtnZapisz_Click"/>
                    <Button x:Name="btnAnuluj" Content="↩️ Anuluj" Style="{StaticResource SecondaryButtonStyle}" Click="BtnAnuluj_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>