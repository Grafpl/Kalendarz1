<Window x:Class="Kalendarz1.DashboardPrzychodu.Views.DashboardPrzychoduWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:Kalendarz1.DashboardPrzychodu.Converters"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Dashboard Przychodu Zywca - LIVE"
        Height="900" Width="1400"
        MinHeight="700" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="#1A1A2E">

    <Window.Resources>
        <!-- KOLORY - Ciemny motyw ZPSP -->
        <Color x:Key="BackgroundDark">#1A1A2E</Color>
        <Color x:Key="BackgroundMedium">#16213E</Color>
        <Color x:Key="BackgroundLight">#0F3460</Color>
        <Color x:Key="CardBackground">#1E2A47</Color>
        <Color x:Key="AccentBlue">#00D9FF</Color>
        <Color x:Key="AccentGreen">#4ECCA3</Color>
        <Color x:Key="StatusOK">#4ECCA3</Color>
        <Color x:Key="StatusWarning">#FFB347</Color>
        <Color x:Key="StatusError">#E94560</Color>
        <Color x:Key="TextPrimary">#FFFFFF</Color>
        <Color x:Key="TextSecondary">#94A3B8</Color>
        <Color x:Key="BorderColor">#2D3A5C</Color>

        <!-- BRUSHE -->
        <SolidColorBrush x:Key="BackgroundDarkBrush" Color="{StaticResource BackgroundDark}"/>
        <SolidColorBrush x:Key="BackgroundMediumBrush" Color="{StaticResource BackgroundMedium}"/>
        <SolidColorBrush x:Key="BackgroundLightBrush" Color="{StaticResource BackgroundLight}"/>
        <SolidColorBrush x:Key="CardBackgroundBrush" Color="{StaticResource CardBackground}"/>
        <SolidColorBrush x:Key="AccentBlueBrush" Color="{StaticResource AccentBlue}"/>
        <SolidColorBrush x:Key="AccentGreenBrush" Color="{StaticResource AccentGreen}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimary}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondary}"/>
        <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}"/>
        <SolidColorBrush x:Key="StatusOKBrush" Color="{StaticResource StatusOK}"/>
        <SolidColorBrush x:Key="StatusWarningBrush" Color="{StaticResource StatusWarning}"/>
        <SolidColorBrush x:Key="StatusErrorBrush" Color="{StaticResource StatusError}"/>

        <!-- KOLORY PASKÃ“W KAFELKÃ“W -->
        <SolidColorBrush x:Key="BarSzary" Color="#6B7280"/>
        <SolidColorBrush x:Key="BarZielony" Color="#4ECCA3"/>
        <SolidColorBrush x:Key="BarNiebieski" Color="#00D9FF"/>
        <SolidColorBrush x:Key="BarFioletowy" Color="#A78BFA"/>
        <SolidColorBrush x:Key="BarPomaranczowy" Color="#FFB347"/>
        <SolidColorBrush x:Key="BarCzerwony" Color="#F87171"/>
        <SolidColorBrush x:Key="BarCyan" Color="#22D3EE"/>

        <!-- Ciemne tÅ‚o kafelkÃ³w -->
        <SolidColorBrush x:Key="TileDarkBg" Color="#1A1A2E"/>

        <!-- KONWERTERY -->
        <conv:StatusToBackgroundConverter x:Key="StatusToBackgroundConverter"/>
        <conv:StatusToColorConverter x:Key="StatusToColorConverter"/>
        <conv:OdchylenieToColorConverter x:Key="OdchylenieToColorConverter"/>
        <conv:OdchylenieToIconConverter x:Key="OdchylenieToIconConverter"/>
        <conv:OdchylenieToBarColorConverter x:Key="OdchylenieToBarColorConverter"/>
        <conv:ProblemToRowBackgroundConverter x:Key="ProblemToRowBackgroundConverter"/>
        <conv:StatusToIconConverter x:Key="StatusToIconConverter"/>
        <conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <conv:NullToDashConverter x:Key="NullToDashConverter"/>
        <conv:TrendToColorConverter x:Key="TrendToColorConverter"/>
        <conv:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
        <conv:AlertToColorConverter x:Key="AlertToColorConverter"/>

        <!-- STYL KAFELKA Z CIENIEM I ZAOKRÄ„GLENIEM - KOMPAKTOWY -->
        <Style x:Key="KafelekStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="12" ShadowDepth="3" Direction="270" Opacity="0.25"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DUÅ»A LICZBA - JAÅšNIEJSZA Z CIENIEM -->
        <Style x:Key="BigNumberStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="4" ShadowDepth="1" Direction="270" Opacity="0.5"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ETYKIETA - JAÅšNIEJSZA -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#E2E8F0"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>

        <!-- NAGÅÃ“WEK SEKCJI -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource AccentBlueBrush}"/>
        </Style>

        <!-- PRZYCISK -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource BackgroundLightBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1A4A8C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AccentButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource AccentBlueBrush}"/>
            <Setter Property="Foreground" Value="#1A1A2E"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- TEXTBOX CIEMNY -->
        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource BackgroundMediumBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DATEPICKER CIEMNY -->
        <Style x:Key="DarkDatePicker" TargetType="DatePicker">
            <Setter Property="Background" Value="#16213E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2D3A5C"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="FontSize" Value="13"/>
            <Style.Resources>
                <Style TargetType="DatePickerTextBox">
                    <Setter Property="Background" Value="#16213E"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="CaretBrush" Value="White"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="DatePickerTextBox">
                                <Border Background="#16213E" CornerRadius="4" Padding="6,4">
                                    <ScrollViewer x:Name="PART_ContentHost" Background="Transparent"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Style.Resources>
        </Style>

        <!-- DATAGRID - KOMPAKTOWY DLA WIÄ˜CEJ WIERSZY -->
        <Style x:Key="ModernDataGrid" TargetType="DataGrid">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="RowBackground" Value="#151E2B"/>
            <Setter Property="AlternatingRowBackground" Value="#1E2A3A"/>
            <Setter Property="AlternationCount" Value="2"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="RowHeight" Value="32"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="EnableRowVirtualization" Value="True"/>
            <Setter Property="EnableColumnVirtualization" Value="True"/>
        </Style>

        <Style x:Key="DataGridColumnHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#1A202C"/>
            <Setter Property="Foreground" Value="#A0AEC0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderBrush" Value="#2D3748"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
        </Style>

        <Style x:Key="DataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#2A4A7A"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- STYL WIERSZA Z HOVER I ANIMACJAMI -->
        <Style x:Key="DataGridRowStyle" TargetType="DataGridRow">
            <Setter Property="Background" Value="#151E2B"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <!-- Hover effect -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2D3748"/>
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                 To="1.002" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                 To="1.01" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                 To="1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                 To="1" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <!-- Zebra striping -->
                <Trigger Property="AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#1E2A3A"/>
                </Trigger>
                <!-- Selection -->
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#2A4A7A"/>
                </Trigger>
                <!-- Problem row highlighting -->
                <DataTrigger Binding="{Binding JestProblem}" Value="True">
                    <Setter Property="Background" Value="#2D1F1F"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- NAGÅÃ“WEK -->
        <Border Grid.Row="0" Padding="20,12" Background="{StaticResource BackgroundLightBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- TytuÅ‚ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="PRZYCHOD ZYWCA" FontSize="24" FontWeight="Bold" Foreground="White"/>
                    <Border Background="{StaticResource AccentGreenBrush}" CornerRadius="4" Padding="8,3" Margin="12,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="LIVE" FontSize="10" FontWeight="Bold" Foreground="#1A1A2E"/>
                    </Border>
                </StackPanel>

                <!-- Kontrolki -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Data:" Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="0,0,8,0" FontSize="13"/>
                    <DatePicker x:Name="dpData" SelectedDate="{x:Static sys:DateTime.Today}" Width="120"
                                Style="{StaticResource DarkDatePicker}"/>

                    <TextBox x:Name="txtSearch" Style="{StaticResource DarkTextBox}" Width="180" Margin="15,0,0,0"/>

                    <Button x:Name="btnRefresh" Style="{StaticResource AccentButton}" Margin="15,0,0,0" Click="BtnRefresh_Click" Content="Odswiez"/>

                    <Border Background="{StaticResource BackgroundMediumBrush}" CornerRadius="6" Padding="10,6" Margin="15,0,0,0">
                        <TextBlock x:Name="txtAutoRefresh" Text="30s" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- PASEK POSTÄ˜PU REALIZACJI -->
        <Grid Grid.Row="1" Margin="20,10,20,5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Pasek postÄ™pu -->
            <Border Grid.Row="0" Background="#1A202C" CornerRadius="6" Height="12">
                <Border x:Name="progressFill"
                        Background="{StaticResource BarZielony}"
                        CornerRadius="6"
                        HorizontalAlignment="Left"
                        Width="0">
                    <Border.Effect>
                        <DropShadowEffect Color="#4ECCA3" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                    </Border.Effect>
                </Border>
            </Border>

            <!-- Etykiety -->
            <Grid Grid.Row="1" Margin="0,5,0,0">
                <TextBlock Text="0 kg" FontSize="10" Foreground="#718096" HorizontalAlignment="Left"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="txtProgressPercent" Text="0%" FontSize="12" FontWeight="Bold" Foreground="#4ECCA3"/>
                    <TextBlock Text=" zrealizowano" FontSize="10" Foreground="#718096" VerticalAlignment="Bottom" Margin="3,0,0,1"/>
                </StackPanel>
                <TextBlock x:Name="txtProgressMax" Text="0 kg" FontSize="10" Foreground="#718096" HorizontalAlignment="Right"/>
            </Grid>
        </Grid>

        <!-- PODSUMOWANIE - KOMPAKTOWY DWURZÄ˜DOWY LAYOUT -->
        <Border Grid.Row="2" Background="{StaticResource CardBackgroundBrush}" Padding="12,8" Margin="10,5,10,0" CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- RZÄ„D 1: GÅ‚Ã³wne KPI Å¼ywca -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- PLANOWANE - kompaktowy -->
                    <Border Grid.Column="0" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarSzary}" Margin="0,0,4,0" Padding="8,6"
                            ToolTip="Planowana dostawa Å¼ywca wg deklaracji hodowcÃ³w">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!-- Ikona zywca - ptak -->
                            <Path Grid.Column="0" Data="M16,5C15,5 14.14,5.27 13.36,5.73L12.68,5.06L11.27,6.47L11.95,7.14C11.35,7.93 11,8.92 11,10A6,6 0 0,0 17,16C18.08,16 19.07,15.65 19.86,15.05L20.53,15.73L21.94,14.31L21.27,13.64C21.73,12.86 22,11.96 22,11A6,6 0 0,0 16,5M15,10A1,1 0 0,1 16,11A1,1 0 0,1 15,12A1,1 0 0,1 14,11A1,1 0 0,1 15,10M3,12L7,8.5V10H9L10.18,12H9V13.5L3,12Z"
                                  Fill="White" Width="16" Height="16" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="PLANOWANE" FontSize="9" FontWeight="SemiBold" Foreground="#94A3B8"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtKgPlan" Text="0" FontSize="20" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text=" kg" FontSize="10" Foreground="#718096" VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                </StackPanel>
                                <TextBlock x:Name="txtSztPlan" Text="0 szt" FontSize="9" Foreground="#6B7280"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- ZWAÅ»ONE - kompaktowy -->
                    <Border Grid.Column="1" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarZielony}" Margin="4,0" Padding="8,6"
                            ToolTip="Å»ywiec juÅ¼ zwaÅ¼ony na wadze przyjÄ™cia">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!-- Ikona zywca - ptak -->
                            <Path Grid.Column="0" Data="M16,5C15,5 14.14,5.27 13.36,5.73L12.68,5.06L11.27,6.47L11.95,7.14C11.35,7.93 11,8.92 11,10A6,6 0 0,0 17,16C18.08,16 19.07,15.65 19.86,15.05L20.53,15.73L21.94,14.31L21.27,13.64C21.73,12.86 22,11.96 22,11A6,6 0 0,0 16,5M15,10A1,1 0 0,1 16,11A1,1 0 0,1 15,12A1,1 0 0,1 14,11A1,1 0 0,1 15,10M3,12L7,8.5V10H9L10.18,12H9V13.5L3,12Z"
                                  Fill="White" Width="16" Height="16" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="ZWAZONE" FontSize="9" FontWeight="SemiBold" Foreground="#4ECCA3"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtKgZwazone" Text="0" FontSize="20" FontWeight="Bold" Foreground="#4ECCA3"/>
                                    <TextBlock Text=" kg" FontSize="10" Foreground="#4ECCA3" VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                    <TextBlock x:Name="txtTrendZwazone" Text="" FontSize="14" VerticalAlignment="Center" Margin="4,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtSztZwazone" Text="0 szt" FontSize="9" Foreground="#4ECCA3"/>
                                    <TextBlock x:Name="txtTrendInfo" Text="" FontSize="8" Foreground="#6B7280" Margin="4,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- POZOSTAÅO - kompaktowy -->
                    <Border Grid.Column="2" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarNiebieski}" Margin="4,0" Padding="8,6"
                            ToolTip="Å»ywiec oczekujÄ…cy na waÅ¼enie">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!-- Ikona zywca - ptak -->
                            <Path Grid.Column="0" Data="M16,5C15,5 14.14,5.27 13.36,5.73L12.68,5.06L11.27,6.47L11.95,7.14C11.35,7.93 11,8.92 11,10A6,6 0 0,0 17,16C18.08,16 19.07,15.65 19.86,15.05L20.53,15.73L21.94,14.31L21.27,13.64C21.73,12.86 22,11.96 22,11A6,6 0 0,0 16,5M15,10A1,1 0 0,1 16,11A1,1 0 0,1 15,12A1,1 0 0,1 14,11A1,1 0 0,1 15,10M3,12L7,8.5V10H9L10.18,12H9V13.5L3,12Z"
                                  Fill="White" Width="16" Height="16" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="POZOSTALO" FontSize="9" FontWeight="SemiBold" Foreground="#00D9FF"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtKgPozostalo" Text="0" FontSize="20" FontWeight="Bold" Foreground="#FFB347"/>
                                    <TextBlock Text=" kg" FontSize="10" Foreground="#FFB347" VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                </StackPanel>
                                <TextBlock x:Name="txtSztPozostalo" Text="0 szt" FontSize="9" Foreground="#FFB347"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- ODCHYLENIE - kompaktowy -->
                    <Border x:Name="borderOdchylenie" Grid.Column="3" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarSzary}" Margin="4,0" Padding="8,6"
                            ToolTip="RÃ³Å¼nica plan vs rzeczywistoÅ›Ä‡&#10;Â±2% OK | Â±5% UWAGA | >5% PROBLEM">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="â–³" FontSize="12" Foreground="#94A3B8" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="ODCHYLENIE" FontSize="9" FontWeight="SemiBold" Foreground="#94A3B8"/>
                                <TextBlock x:Name="txtOdchylenie" Text="-" FontSize="18" FontWeight="Bold" Foreground="White"/>
                                <TextBlock x:Name="txtOdchylenieProc" Text="" FontSize="9" Foreground="#6B7280"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- ÅšREDNIE WAGI - poÅ‚Ä…czone w jeden kafelek -->
                    <Border Grid.Column="4" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarFioletowy}" Margin="4,0" Padding="8,6"
                            ToolTip="Åšrednia waga: deklarowana vs rzeczywista&#10;Pokazuje czy ptaki sÄ… ciÄ™Å¼sze/lÅ¼ejsze">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!-- Deklarowana -->
                            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                <TextBlock Text="DEKL." FontSize="8" FontWeight="Bold" Foreground="#A78BFA" HorizontalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock x:Name="txtSrWagaPlan" Text="-" FontSize="18" FontWeight="Bold" Foreground="#A78BFA"/>
                                    <TextBlock Text="kg" FontSize="8" Foreground="#718096" VerticalAlignment="Bottom" Margin="2,0,0,3"/>
                                </StackPanel>
                            </StackPanel>
                            <!-- StrzaÅ‚ka z interpretacjÄ… -->
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="4,0">
                                <TextBlock x:Name="txtWagaArrow" Text="â†’" FontSize="14" Foreground="#4A5568" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtWagaInterpretacja" Text="" FontSize="8" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                            <!-- Rzeczywista -->
                            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                <TextBlock Text="RZECZ." FontSize="8" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock x:Name="txtSrWagaRzecz" Text="-" FontSize="18" FontWeight="Bold" Foreground="#4ECCA3"/>
                                    <TextBlock Text="kg" FontSize="8" Foreground="#718096" VerticalAlignment="Bottom" Margin="2,0,0,3"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- REALIZACJA % - kompaktowy -->
                    <Border Grid.Column="5" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarZielony}" Margin="4,0" Padding="8,6"
                            ToolTip="Procent zrealizowanych dostaw">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="âœ“" FontSize="12" Foreground="#4ECCA3" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="REALIZACJA" FontSize="9" FontWeight="SemiBold" Foreground="#94A3B8"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtRealizacja" Text="0%" FontSize="20" FontWeight="Bold" Foreground="#4ECCA3"/>
                                </StackPanel>
                                <TextBlock x:Name="txtDostawyStatus" Text="(0/0 dostaw)" FontSize="9" Foreground="#6B7280"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Mini status dostaw -->
                    <Border Grid.Column="6" Background="#0F172A" CornerRadius="6" Padding="10,6" Margin="4,0,0,0" VerticalAlignment="Center">
                        <StackPanel>
                            <TextBlock Text="DOSTAWY" FontSize="8" FontWeight="Bold" Foreground="#4A5568" HorizontalAlignment="Center"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,2,0,0">
                                <TextBlock Text="âœ…" FontSize="10"/>
                                <TextBlock x:Name="txtZwazoneCount" Text="0" FontSize="11" FontWeight="Bold" Foreground="#4ECCA3" Margin="2,0,6,0"/>
                                <TextBlock Text="â³" FontSize="10"/>
                                <TextBlock x:Name="txtBruttoCount" Text="0" FontSize="11" FontWeight="Bold" Foreground="#FFB347" Margin="2,0,6,0"/>
                                <TextBlock Text="ðŸ”´" FontSize="10"/>
                                <TextBlock x:Name="txtOczekujeCount" Text="0" FontSize="11" FontWeight="Bold" Foreground="#F87171" Margin="2,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- RZÄ„D 2: Prognoza tuszek - horyzontalny layout -->
                <Border Grid.Row="1" Background="{StaticResource TileDarkBg}" CornerRadius="8" Margin="0,6,0,0" Padding="10,6"
                        BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarFioletowy}"
                        ToolTip="Prognoza tuszek = Å¼ywiec Ã— 78% wydajnoÅ›ci uboju">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Ikona i tytuÅ‚ - udko kurczaka (drumstick) -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                            <Path Data="M15.53,7.46C17.49,9.42 17.49,12.58 15.53,14.54C13.57,16.5 10.41,16.5 8.45,14.54L2.39,20.6L1,19.19L7.05,13.13L3.5,9.58C2.5,8.58 2.5,6.92 3.5,5.92C4.5,4.92 6.16,4.92 7.16,5.92L10.71,9.47L15.24,4.93C14.66,3.83 14.81,2.41 15.7,1.48C16.84,0.34 18.69,0.34 19.83,1.48C20.97,2.62 20.97,4.48 19.83,5.62C18.93,6.51 17.55,6.66 16.46,6.1L11.91,10.65L14.21,12.95L7.75,19.44L6.34,18.03L12.79,11.57L10.49,9.26L11.12,8.63L15.53,7.46Z"
                                  Fill="White" Width="18" Height="18" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <TextBlock Text="TUSZKI" FontSize="11" FontWeight="Bold" Foreground="#E2E8F0" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- PLAN tuszek -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,10,0">
                            <TextBlock Text="PLAN:" FontSize="10" Foreground="#A78BFA" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="txtTuszkiPlan" Text="0" FontSize="16" FontWeight="Bold" Foreground="#A78BFA" VerticalAlignment="Center"/>
                            <TextBlock Text=" kg" FontSize="9" Foreground="#718096" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- StrzaÅ‚ka -->
                        <TextBlock Grid.Column="2" Text="â†’" FontSize="14" Foreground="#4A5568" VerticalAlignment="Center" Margin="0,0,10,0"/>

                        <!-- RZECZ tuszek -->
                        <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                            <TextBlock Text="RZECZ:" FontSize="10" Foreground="#4ECCA3" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="txtPrognozaTuszek" Text="0" FontSize="16" FontWeight="Bold" Foreground="#4ECCA3" VerticalAlignment="Center"/>
                            <TextBlock Text=" kg" FontSize="9" Foreground="#718096" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- RÃ³Å¼nica + WzÃ³r -->
                        <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
                            <Border Background="#0F172A" CornerRadius="4" Padding="8,3" Margin="0,0,10,0">
                                <TextBlock x:Name="txtTuszkiRoznica" Text="" FontSize="11" FontWeight="Bold" VerticalAlignment="Center"/>
                            </Border>
                            <Border Background="#0F172A" CornerRadius="4" Padding="8,3">
                                <TextBlock x:Name="txtWzorTuszki" Text="0 kg Ã— 78% = 0 kg" FontSize="9" Foreground="#6B7280" VerticalAlignment="Center"/>
                            </Border>
                        </StackPanel>

                        <!-- Separator -->
                        <Rectangle Grid.Column="5" Width="1" Fill="#2D3748" Margin="15,0"/>

                        <!-- Klasy A/B -->
                        <StackPanel Grid.Column="6" Orientation="Horizontal" VerticalAlignment="Center">
                            <StackPanel Margin="0,0,12,0">
                                <TextBlock Text="KLASA A" FontSize="8" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtPrognozaA" Text="0 kg" FontSize="12" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock Text="KLASA B" FontSize="8" FontWeight="Bold" Foreground="#FFB347" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtPrognozaB" Text="0 kg" FontSize="12" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- PANEL PROGNOZY REDUKCJI ZAMOWIEN -->
        <Border x:Name="borderPrognoza" Grid.Row="3" Background="#1F2937" CornerRadius="8" Padding="15" Margin="10,8,10,0"
                Visibility="Collapsed">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Ikona alertu -->
                <Border x:Name="borderAlertIkona" Grid.Column="0" Background="#DC2626"
                        CornerRadius="8" Padding="15,10" Margin="0,0,15,0">
                    <StackPanel>
                        <TextBlock x:Name="txtAlertPoziom" Text="KRYTYCZNY"
                                   FontWeight="Bold" FontSize="14" Foreground="White"/>
                        <TextBlock x:Name="txtAlertPrognoza" Text="0% planu"
                                   FontSize="11" Foreground="#E5E7EB"/>
                    </StackPanel>
                </Border>

                <!-- Tresc alertu -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="PROGNOZA KONCOWA DNIA"
                               FontSize="11" Foreground="#9CA3AF" FontWeight="SemiBold"/>
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <TextBlock Text="Plan tuszek: " FontSize="13" Foreground="White"/>
                        <TextBlock x:Name="txtAlertTuszkiPlan" Text="0" FontSize="13" FontWeight="SemiBold" Foreground="White"/>
                        <TextBlock Text=" kg  ->  Prognoza: " FontSize="13" Foreground="White"/>
                        <TextBlock x:Name="txtAlertTuszkiPrognoza" Text="0" FontSize="13" FontWeight="SemiBold" Foreground="#DC2626"/>
                        <TextBlock Text=" kg" FontSize="13" Foreground="White"/>
                    </StackPanel>
                    <TextBlock x:Name="txtAlertRedukcja" Text="REDUKUJ ZAMOWIENIA o ~0 kg tuszek!"
                               FontSize="14" FontWeight="Bold" Margin="0,8,0,0" Foreground="#DC2626"/>
                </StackPanel>

                <!-- Szczegoly -->
                <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <TextBlock Text="Zwazono: " FontSize="11" Foreground="#6B7280"/>
                        <TextBlock x:Name="txtAlertAutaZwazone" Text="0" FontSize="11" Foreground="#9CA3AF"/>
                        <TextBlock Text="/" FontSize="11" Foreground="#6B7280"/>
                        <TextBlock x:Name="txtAlertAutaOgolem" Text="0" FontSize="11" Foreground="#9CA3AF"/>
                        <TextBlock Text=" aut" FontSize="11" Foreground="#6B7280"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,3,0,0">
                        <TextBlock Text="Trend: " FontSize="11" Foreground="#6B7280"/>
                        <TextBlock x:Name="txtAlertTrendProc" Text="0" FontSize="11" Foreground="#9CA3AF"/>
                        <TextBlock Text="% planu" FontSize="11" Foreground="#6B7280"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- PANEL POSTEPU HARMONOGRAMOW -->
        <Expander x:Name="expanderHarmonogramy" Grid.Row="4" Margin="10,5,10,0" IsExpanded="False">
            <Expander.Header>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="REALIZACJA HARMONOGRAMOW (kliknij aby rozwinac)" FontSize="12" FontWeight="SemiBold" Foreground="#60A5FA"/>
                </StackPanel>
            </Expander.Header>
            <Expander.Style>
                <Style TargetType="Expander">
                    <Setter Property="Background" Value="#1A1A2E"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="BorderThickness" Value="0"/>
                </Style>
            </Expander.Style>
            <Border Background="#1A1A2E" CornerRadius="0,0,8,8" Padding="15,10">
                <ItemsControl x:Name="icHarmonogramy">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="130"/>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Hodowca -->
                                <TextBlock Grid.Column="0" Text="{Binding Hodowca}"
                                           Foreground="White" FontWeight="SemiBold"
                                           TextTrimming="CharacterEllipsis"/>

                                <!-- Pasek postepu -->
                                <TextBlock Grid.Column="1" Text="{Binding PasekPostepuDisplay}"
                                           Foreground="#4ECCA3" FontFamily="Consolas"/>

                                <!-- Auta -->
                                <StackPanel Grid.Column="2" Orientation="Horizontal">
                                    <TextBlock Text="{Binding AutaZwazone}" Foreground="#9CA3AF" FontSize="11"/>
                                    <TextBlock Text="/" Foreground="#6B7280" FontSize="11"/>
                                    <TextBlock Text="{Binding AutaOgolem}" Foreground="#9CA3AF" FontSize="11"/>
                                    <TextBlock Text=" aut" Foreground="#6B7280" FontSize="11"/>
                                </StackPanel>

                                <!-- Realizacja % -->
                                <StackPanel Grid.Column="3" Orientation="Horizontal">
                                    <TextBlock Text="{Binding RealizacjaProc, StringFormat=N0}" Foreground="#9CA3AF" FontSize="11"/>
                                    <TextBlock Text="% planu" Foreground="#6B7280" FontSize="11"/>
                                </StackPanel>

                                <!-- Status -->
                                <TextBlock Grid.Column="4" Text="{Binding StatusDisplay}"
                                           Foreground="{Binding StatusKolor}"
                                           FontWeight="SemiBold" HorizontalAlignment="Right"/>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Border>
        </Expander>

        <!-- PRZYCISK POMOCY -->
        <Button Grid.Row="5" Click="BtnHelp_Click" Margin="10,5,10,0" Cursor="Hand"
                HorizontalAlignment="Left" Background="Transparent" BorderThickness="0">
            <StackPanel Orientation="Horizontal">
                <Border Background="#0F3460" CornerRadius="4" Padding="8,4" Margin="0,0,8,0">
                    <TextBlock Text="?" FontSize="12" FontWeight="Bold" Foreground="White"/>
                </Border>
                <TextBlock Text="JAK CZYTAC TEN DASHBOARD?" FontSize="12" FontWeight="SemiBold"
                           Foreground="#00D9FF" VerticalAlignment="Center"/>
            </StackPanel>
        </Button>

        <!-- SEPARATOR -->
        <Rectangle Grid.Row="6" Height="1" Margin="20,8,20,5">
            <Rectangle.Fill>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="#4A5568" Offset="0.2"/>
                    <GradientStop Color="#4A5568" Offset="0.8"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>

        <!-- TABELA DOSTAW -->
        <Border Grid.Row="7" Background="{StaticResource CardBackgroundBrush}" CornerRadius="8" Padding="15,12" Margin="10,0,10,5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- NagÅ‚Ã³wek -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <TextBlock Text="SZCZEGOLY DOSTAW" Style="{StaticResource SectionHeaderStyle}"/>
                    <TextBlock x:Name="txtLiczbaWynikow" Text="Wyniki: 0" HorizontalAlignment="Right"
                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                    <TextBlock x:Name="txtDataDisplay" Text="" HorizontalAlignment="Center"
                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                </Grid>

                <!-- DataGrid -->
                <DataGrid x:Name="dgDostawy" Grid.Row="1"
                          Style="{StaticResource ModernDataGrid}"
                          ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}"
                          CellStyle="{StaticResource DataGridCellStyle}"
                          RowStyle="{StaticResource DataGridRowStyle}"
                          VirtualizingPanel.IsVirtualizing="True"
                          MouseDoubleClick="DataGrid_MouseDoubleClick">
                    <DataGrid.Columns>
                        <!-- Kolorowy pasek -->
                        <DataGridTemplateColumn Width="4" CanUserResize="False">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Width="4" Margin="-10,0,0,0"
                                            Background="{Binding Poziom, Converter={StaticResource OdchylenieToBarColorConverter}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn Header="LP" Binding="{Binding NrKursu}" Width="45">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="HODOWCA" Binding="{Binding Hodowca}" Width="*" MinWidth="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- PLAN NA AUTO (dynamiczny - ostatnie = reszta) -->
                        <DataGridTemplateColumn Header="PLAN [kg]" Width="95">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding KgPlanNaAuto, StringFormat=N0}" Foreground="#9CA3AF"/>
                                        <!-- Symbol (R) dla ostatniego auta - RESZTA -->
                                        <TextBlock Text=" (R)" Foreground="#F59E0B" FontSize="9" FontWeight="Bold"
                                                   Visibility="{Binding CzyOstatnieAuto, Converter={StaticResource BoolToVisibilityConverter}}"
                                                   ToolTip="Reszta z harmonogramu - to auto musi zabrac to co zostalo"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="RZECZ [kg]" Width="90">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding KgRzeczywiste, StringFormat=N0}" HorizontalAlignment="Right"
                                               Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="ODCHYLENIE" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding OdchylenieDisplay}"
                                               Foreground="{Binding Poziom, Converter={StaticResource OdchylenieToColorConverter}}"
                                               VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- POZOSTALO Z HARMONOGRAMU -->
                        <DataGridTemplateColumn Header="POZOSTALO" Width="130">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel VerticalAlignment="Center" Margin="2,0">
                                        <!-- Zywiec pozostaly - czerwony gdy < 5% -->
                                        <StackPanel Orientation="Horizontal">
                                            <Path Data="M16,5C15,5 14.14,5.27 13.36,5.73L12.68,5.06L11.27,6.47L11.95,7.14C11.35,7.93 11,8.92 11,10A6,6 0 0,0 17,16C18.08,16 19.07,15.65 19.86,15.05L20.53,15.73L21.94,14.31L21.27,13.64C21.73,12.86 22,11.96 22,11A6,6 0 0,0 16,5M15,10A1,1 0 0,1 16,11A1,1 0 0,1 15,12A1,1 0 0,1 14,11A1,1 0 0,1 15,10M3,12L7,8.5V10H9L10.18,12H9V13.5L3,12Z"
                                                  Fill="White" Width="10" Height="10" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                            <TextBlock Text="{Binding KgPozostalo, StringFormat=N0}"
                                                       Foreground="{Binding PozostaloKolor}" FontSize="10" FontWeight="SemiBold"/>
                                            <TextBlock Text=" kg" Foreground="{Binding PozostaloKolor}" FontSize="8" VerticalAlignment="Bottom" Margin="0,0,0,1"/>
                                        </StackPanel>
                                        <!-- Tuszki pozostale -->
                                        <StackPanel Orientation="Horizontal">
                                            <Path Data="M15.53,7.46C17.49,9.42 17.49,12.58 15.53,14.54C13.57,16.5 10.41,16.5 8.45,14.54L2.39,20.6L1,19.19L7.05,13.13L3.5,9.58C2.5,8.58 2.5,6.92 3.5,5.92C4.5,4.92 6.16,4.92 7.16,5.92L10.71,9.47L15.24,4.93C14.66,3.83 14.81,2.41 15.7,1.48C16.84,0.34 18.69,0.34 19.83,1.48C20.97,2.62 20.97,4.48 19.83,5.62C18.93,6.51 17.55,6.66 16.46,6.1L11.91,10.65L14.21,12.95L7.75,19.44L6.34,18.03L12.79,11.57L10.49,9.26L11.12,8.63L15.53,7.46Z"
                                                  Fill="White" Width="10" Height="10" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                            <TextBlock Text="{Binding TuszkiPozostalo, StringFormat=N0}"
                                                       Foreground="#A78BFA" FontSize="9"/>
                                            <TextBlock Text=" kg" Foreground="#A78BFA" FontSize="8" VerticalAlignment="Bottom" Margin="0,0,0,1"/>
                                        </StackPanel>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- POSTEP HARMONOGRAMU -->
                        <DataGridTemplateColumn Header="POSTEP" Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="{Binding PostepDisplay}"
                                                   FontSize="9" Foreground="#9CA3AF" HorizontalAlignment="Center"/>
                                        <ProgressBar Value="{Binding PostepProc, Mode=OneWay}" Maximum="100"
                                                     Height="3" Background="#374151" Foreground="#4ECCA3"
                                                     Margin="0,2,0,0"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- TREND HODOWCY -->
                        <DataGridTemplateColumn Header="TREND" Width="80">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TrendHodowcy}" FontSize="9"
                                               Foreground="{Binding TrendProc, Converter={StaticResource TrendToColorConverter}}"
                                               VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="W.DEKL" Width="55">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding SredniaWagaPlanCalc, StringFormat=N2}"
                                               Foreground="#A0AEC0"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="W.RZECZ" Width="60">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding SredniaWagaRzeczywistaCalc, Converter={StaticResource NullToDashConverter}}"
                                               Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- TUSZKI PLAN -->
                        <DataGridTemplateColumn Header="TUSZ.PL" Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TuszkiPlanKg, StringFormat=N0}"
                                               Foreground="#A78BFA"
                                               HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- TUSZKI RZECZYWISTE -->
                        <DataGridTemplateColumn Header="TUSZ.RZ" Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TuszkiRzeczywisteKg, Converter={StaticResource NullToDashConverter}}"
                                               Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}"
                                               HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Status jako ikona -->
                        <DataGridTemplateColumn Header="" Width="40">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding StatusIcon}"
                                               FontSize="18"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               ToolTip="{Binding StatusText}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn Header="PRZYJAZD" Binding="{Binding PrzyjazdDisplay}" Width="70">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="WAZYL" Binding="{Binding KtoWazyl}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Wiersz podsumowania -->
                <Border Grid.Row="2" Background="#1A365D" CornerRadius="0,0,8,8" Padding="10,6" Margin="0,0,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="4"/>
                            <ColumnDefinition Width="45"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="95"/>
                            <ColumnDefinition Width="90"/>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="55"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="40"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="1" Text="SUMA" FontWeight="Bold" Foreground="#63B3ED" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaDostawy" Grid.Column="2" Text="0 dostaw" Foreground="#A0AEC0" VerticalAlignment="Center" Margin="10,0,0,0"/>
                        <TextBlock x:Name="txtSumaPlan" Grid.Column="3" Text="0" FontWeight="Bold" Foreground="White" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaRzecz" Grid.Column="4" Text="0" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaOdchylenie" Grid.Column="5" Text="-" FontWeight="Bold" Foreground="#A0AEC0" VerticalAlignment="Center" HorizontalAlignment="Center"/>

                        <!-- POZOSTALO suma z ikonkami -->
                        <StackPanel Grid.Column="6" VerticalAlignment="Center" Margin="2,0">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M16,5C15,5 14.14,5.27 13.36,5.73L12.68,5.06L11.27,6.47L11.95,7.14C11.35,7.93 11,8.92 11,10A6,6 0 0,0 17,16C18.08,16 19.07,15.65 19.86,15.05L20.53,15.73L21.94,14.31L21.27,13.64C21.73,12.86 22,11.96 22,11A6,6 0 0,0 16,5M15,10A1,1 0 0,1 16,11A1,1 0 0,1 15,12A1,1 0 0,1 14,11A1,1 0 0,1 15,10M3,12L7,8.5V10H9L10.18,12H9V13.5L3,12Z"
                                      Fill="White" Width="10" Height="10" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                <TextBlock x:Name="txtSumaPozostaloKg" Text="-" Foreground="#00D9FF" FontSize="10" FontWeight="SemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M15.53,7.46C17.49,9.42 17.49,12.58 15.53,14.54C13.57,16.5 10.41,16.5 8.45,14.54L2.39,20.6L1,19.19L7.05,13.13L3.5,9.58C2.5,8.58 2.5,6.92 3.5,5.92C4.5,4.92 6.16,4.92 7.16,5.92L10.71,9.47L15.24,4.93C14.66,3.83 14.81,2.41 15.7,1.48C16.84,0.34 18.69,0.34 19.83,1.48C20.97,2.62 20.97,4.48 19.83,5.62C18.93,6.51 17.55,6.66 16.46,6.1L11.91,10.65L14.21,12.95L7.75,19.44L6.34,18.03L12.79,11.57L10.49,9.26L11.12,8.63L15.53,7.46Z"
                                      Fill="White" Width="10" Height="10" Stretch="Uniform" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                <TextBlock x:Name="txtSumaPozostaloTuszki" Text="-" Foreground="#A78BFA" FontSize="9"/>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Grid.Column="9" Text="Å›r:" Foreground="#6B7280" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,2,0"/>
                        <TextBlock x:Name="txtSumaWagaPlan" Grid.Column="9" Text="-" Foreground="#A0AEC0" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="15,0,0,0"/>
                        <TextBlock x:Name="txtSumaSrWaga" Grid.Column="10" Text="-" Foreground="#A0AEC0" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaTuszkiPlan" Grid.Column="11" Text="-" FontWeight="Bold" Foreground="#A78BFA" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaTuszkiRzecz" Grid.Column="12" Text="-" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Legenda -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,8,0,0">
                    <TextBlock Text="Legenda:" Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" Margin="0,0,15,0"/>
                    <Border Width="12" Height="12" Background="#4ECCA3" CornerRadius="2" Margin="0,0,4,0"/>
                    <TextBlock Text="OK (Â±2%)" Foreground="{StaticResource StatusOKBrush}" FontSize="11" FontWeight="SemiBold" Margin="0,0,15,0"/>
                    <Border Width="12" Height="12" Background="#FFB347" CornerRadius="2" Margin="0,0,4,0"/>
                    <TextBlock Text="Uwaga (Â±5%)" Foreground="{StaticResource StatusWarningBrush}" FontSize="11" FontWeight="SemiBold" Margin="0,0,15,0"/>
                    <Border Width="12" Height="12" Background="#E94560" CornerRadius="2" Margin="0,0,4,0"/>
                    <TextBlock Text="Problem (>5%)" Foreground="{StaticResource StatusErrorBrush}" FontSize="11" FontWeight="SemiBold" Margin="0,0,15,0"/>
                    <TextBlock Text="   |   " Foreground="#4A5568"/>
                    <TextBlock Text="Dwuklik = szczegoly" Foreground="#718096" FontSize="11" FontStyle="Italic"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- STOPKA -->
        <Border Grid.Row="8" Background="{StaticResource BackgroundMediumBrush}" Padding="15,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button x:Name="btnExportExcel" Style="{StaticResource ModernButton}" Margin="0,0,8,0" Click="BtnExportExcel_Click" Content="Eksport Excel"/>
                    <Button x:Name="btnPrint" Style="{StaticResource ModernButton}" Margin="0,0,8,0" Click="BtnPrint_Click" Content="Drukuj"/>
                    <Button x:Name="btnDiagnose" Style="{StaticResource ModernButton}" Click="BtnDiagnose_Click" Background="#8B0000">
                        <TextBlock Text="DIAGNOSTYKA" Foreground="#FF6B6B"/>
                    </Button>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Aktualizacja: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="11"/>
                    <TextBlock x:Name="txtLastUpdate" Text="-" Foreground="White" FontSize="11" FontWeight="SemiBold"/>
                    <TextBlock Text="  |  Auto: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" Margin="10,0,0,0"/>
                    <TextBlock x:Name="txtAutoRefreshFooter" Text="30s" Foreground="{StaticResource AccentGreenBrush}" FontSize="11" FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- OVERLAY LADOWANIA ZE SPINNEREM -->
        <Border x:Name="loadingOverlay" Grid.RowSpan="9" Background="#CC1A1A2E" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <!-- Spinner -->
                <Ellipse x:Name="spinnerEllipse" Width="50" Height="50" StrokeThickness="4"
                         Stroke="#4ECCA3" StrokeDashArray="3,2">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="spinnerRotate" CenterX="25" CenterY="25"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="spinnerRotate"
                                                     Storyboard.TargetProperty="Angle"
                                                     From="0" To="360" Duration="0:0:1"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>

                <!-- Tekst -->
                <TextBlock x:Name="txtLoadingMessage" Text="Aktualizacja..." Foreground="White" FontSize="14"
                           HorizontalAlignment="Center" Margin="0,15,0,0"/>
            </StackPanel>
        </Border>

        <!-- OVERLAY BLEDU -->
        <Border x:Name="errorOverlay" Grid.RowSpan="9" Background="#CC1A1A2E" Visibility="Collapsed">
            <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="12" Padding="30,20" HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="450">
                <StackPanel>
                    <TextBlock Text="Blad polaczenia" FontSize="18" FontWeight="Bold" Foreground="{StaticResource StatusErrorBrush}" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                    <TextBlock x:Name="txtErrorMessage" Text="" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap" TextAlignment="Center" Margin="0,0,0,15"/>
                    <Button Content="Sprobuj ponownie" Style="{StaticResource AccentButton}" HorizontalAlignment="Center" Click="BtnRetry_Click"/>
                </StackPanel>
            </Border>
        </Border>
    </Grid>
</Window>
