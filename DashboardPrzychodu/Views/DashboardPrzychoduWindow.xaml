<Window x:Class="Kalendarz1.DashboardPrzychodu.Views.DashboardPrzychoduWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:Kalendarz1.DashboardPrzychodu.Converters"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Dashboard Przychodu Zywca - LIVE"
        Height="900" Width="1400"
        MinHeight="700" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="#1A1A2E">

    <Window.Resources>
        <!-- KOLORY - Ciemny motyw ZPSP -->
        <Color x:Key="BackgroundDark">#1A1A2E</Color>
        <Color x:Key="BackgroundMedium">#16213E</Color>
        <Color x:Key="BackgroundLight">#0F3460</Color>
        <Color x:Key="CardBackground">#1E2A47</Color>
        <Color x:Key="AccentBlue">#00D9FF</Color>
        <Color x:Key="AccentGreen">#4ECCA3</Color>
        <Color x:Key="StatusOK">#4ECCA3</Color>
        <Color x:Key="StatusWarning">#FFB347</Color>
        <Color x:Key="StatusError">#E94560</Color>
        <Color x:Key="TextPrimary">#FFFFFF</Color>
        <Color x:Key="TextSecondary">#94A3B8</Color>
        <Color x:Key="BorderColor">#2D3A5C</Color>

        <!-- BRUSHE -->
        <SolidColorBrush x:Key="BackgroundDarkBrush" Color="{StaticResource BackgroundDark}"/>
        <SolidColorBrush x:Key="BackgroundMediumBrush" Color="{StaticResource BackgroundMedium}"/>
        <SolidColorBrush x:Key="BackgroundLightBrush" Color="{StaticResource BackgroundLight}"/>
        <SolidColorBrush x:Key="CardBackgroundBrush" Color="{StaticResource CardBackground}"/>
        <SolidColorBrush x:Key="AccentBlueBrush" Color="{StaticResource AccentBlue}"/>
        <SolidColorBrush x:Key="AccentGreenBrush" Color="{StaticResource AccentGreen}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimary}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondary}"/>
        <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}"/>
        <SolidColorBrush x:Key="StatusOKBrush" Color="{StaticResource StatusOK}"/>
        <SolidColorBrush x:Key="StatusWarningBrush" Color="{StaticResource StatusWarning}"/>
        <SolidColorBrush x:Key="StatusErrorBrush" Color="{StaticResource StatusError}"/>

        <!-- KOLORY PASK√ìW KAFELK√ìW -->
        <SolidColorBrush x:Key="BarSzary" Color="#6B7280"/>
        <SolidColorBrush x:Key="BarZielony" Color="#4ECCA3"/>
        <SolidColorBrush x:Key="BarNiebieski" Color="#00D9FF"/>
        <SolidColorBrush x:Key="BarFioletowy" Color="#A78BFA"/>
        <SolidColorBrush x:Key="BarPomaranczowy" Color="#FFB347"/>
        <SolidColorBrush x:Key="BarCzerwony" Color="#F87171"/>
        <SolidColorBrush x:Key="BarCyan" Color="#22D3EE"/>

        <!-- Ciemne t≈Ço kafelk√≥w -->
        <SolidColorBrush x:Key="TileDarkBg" Color="#1A1A2E"/>

        <!-- KONWERTERY -->
        <conv:StatusToBackgroundConverter x:Key="StatusToBackgroundConverter"/>
        <conv:StatusToColorConverter x:Key="StatusToColorConverter"/>
        <conv:OdchylenieToColorConverter x:Key="OdchylenieToColorConverter"/>
        <conv:OdchylenieToIconConverter x:Key="OdchylenieToIconConverter"/>
        <conv:OdchylenieToBarColorConverter x:Key="OdchylenieToBarColorConverter"/>
        <conv:ProblemToRowBackgroundConverter x:Key="ProblemToRowBackgroundConverter"/>
        <conv:StatusToIconConverter x:Key="StatusToIconConverter"/>
        <conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <conv:NullToDashConverter x:Key="NullToDashConverter"/>

        <!-- STYL KAFELKA Z CIENIEM I ZAOKRƒÑGLENIEM - KOMPAKTOWY -->
        <Style x:Key="KafelekStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="12" ShadowDepth="3" Direction="270" Opacity="0.25"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DU≈ªA LICZBA - JA≈öNIEJSZA Z CIENIEM -->
        <Style x:Key="BigNumberStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="4" ShadowDepth="1" Direction="270" Opacity="0.5"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ETYKIETA - JA≈öNIEJSZA -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#E2E8F0"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>

        <!-- NAG≈Å√ìWEK SEKCJI -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource AccentBlueBrush}"/>
        </Style>

        <!-- PRZYCISK -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource BackgroundLightBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1A4A8C"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AccentButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource AccentBlueBrush}"/>
            <Setter Property="Foreground" Value="#1A1A2E"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- TEXTBOX CIEMNY -->
        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource BackgroundMediumBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DATEPICKER CIEMNY -->
        <Style x:Key="DarkDatePicker" TargetType="DatePicker">
            <Setter Property="Background" Value="#16213E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2D3A5C"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="FontSize" Value="13"/>
            <Style.Resources>
                <Style TargetType="DatePickerTextBox">
                    <Setter Property="Background" Value="#16213E"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="CaretBrush" Value="White"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="DatePickerTextBox">
                                <Border Background="#16213E" CornerRadius="4" Padding="6,4">
                                    <ScrollViewer x:Name="PART_ContentHost" Background="Transparent"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Style.Resources>
        </Style>

        <!-- DATAGRID - KOMPAKTOWY DLA WIƒòCEJ WIERSZY -->
        <Style x:Key="ModernDataGrid" TargetType="DataGrid">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="RowBackground" Value="#151E2B"/>
            <Setter Property="AlternatingRowBackground" Value="#1E2A3A"/>
            <Setter Property="AlternationCount" Value="2"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="RowHeight" Value="32"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="EnableRowVirtualization" Value="True"/>
            <Setter Property="EnableColumnVirtualization" Value="True"/>
        </Style>

        <Style x:Key="DataGridColumnHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#1A202C"/>
            <Setter Property="Foreground" Value="#A0AEC0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderBrush" Value="#2D3748"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
        </Style>

        <Style x:Key="DataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#2A4A7A"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- STYL WIERSZA Z HOVER I ANIMACJAMI -->
        <Style x:Key="DataGridRowStyle" TargetType="DataGridRow">
            <Setter Property="Background" Value="#151E2B"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <!-- Hover effect -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2D3748"/>
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                 To="1.002" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                 To="1.01" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                 To="1" Duration="0:0:0.1"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                 To="1" Duration="0:0:0.1"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <!-- Zebra striping -->
                <Trigger Property="AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#1E2A3A"/>
                </Trigger>
                <!-- Selection -->
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#2A4A7A"/>
                </Trigger>
                <!-- Problem row highlighting -->
                <DataTrigger Binding="{Binding JestProblem}" Value="True">
                    <Setter Property="Background" Value="#2D1F1F"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- NAG≈Å√ìWEK -->
        <Border Grid.Row="0" Padding="20,12" Background="{StaticResource BackgroundLightBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Tytu≈Ç -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="PRZYCHOD ZYWCA" FontSize="24" FontWeight="Bold" Foreground="White"/>
                    <Border Background="{StaticResource AccentGreenBrush}" CornerRadius="4" Padding="8,3" Margin="12,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="LIVE" FontSize="10" FontWeight="Bold" Foreground="#1A1A2E"/>
                    </Border>
                </StackPanel>

                <!-- Kontrolki -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Data:" Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center" Margin="0,0,8,0" FontSize="13"/>
                    <DatePicker x:Name="dpData" SelectedDate="{x:Static sys:DateTime.Today}" Width="120"
                                Style="{StaticResource DarkDatePicker}"/>

                    <TextBox x:Name="txtSearch" Style="{StaticResource DarkTextBox}" Width="180" Margin="15,0,0,0"/>

                    <Button x:Name="btnRefresh" Style="{StaticResource AccentButton}" Margin="15,0,0,0" Click="BtnRefresh_Click" Content="Odswiez"/>

                    <Border Background="{StaticResource BackgroundMediumBrush}" CornerRadius="6" Padding="10,6" Margin="15,0,0,0">
                        <TextBlock x:Name="txtAutoRefresh" Text="30s" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- PASEK POSTƒòPU REALIZACJI -->
        <Grid Grid.Row="1" Margin="20,10,20,5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Pasek postƒôpu -->
            <Border Grid.Row="0" Background="#1A202C" CornerRadius="6" Height="12">
                <Border x:Name="progressFill"
                        Background="{StaticResource BarZielony}"
                        CornerRadius="6"
                        HorizontalAlignment="Left"
                        Width="0">
                    <Border.Effect>
                        <DropShadowEffect Color="#4ECCA3" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                    </Border.Effect>
                </Border>
            </Border>

            <!-- Etykiety -->
            <Grid Grid.Row="1" Margin="0,5,0,0">
                <TextBlock Text="0 kg" FontSize="10" Foreground="#718096" HorizontalAlignment="Left"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="txtProgressPercent" Text="0%" FontSize="12" FontWeight="Bold" Foreground="#4ECCA3"/>
                    <TextBlock Text=" zrealizowano" FontSize="10" Foreground="#718096" VerticalAlignment="Bottom" Margin="3,0,0,1"/>
                </StackPanel>
                <TextBlock x:Name="txtProgressMax" Text="0 kg" FontSize="10" Foreground="#718096" HorizontalAlignment="Right"/>
            </Grid>
        </Grid>

        <!-- PODSUMOWANIE - KOMPAKTOWY DWURZƒòDOWY LAYOUT -->
        <Border Grid.Row="2" Background="{StaticResource CardBackgroundBrush}" Padding="12,8" Margin="10,5,10,0" CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- RZƒÑD 1: G≈Ç√≥wne KPI ≈ºywca -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- PLANOWANE - kompaktowy -->
                    <Border Grid.Column="0" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarSzary}" Margin="0,0,4,0" Padding="8,6"
                            ToolTip="Planowana dostawa ≈ºywca wg deklaracji hodowc√≥w">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="‚óè" FontSize="10" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="PLANOWANE" FontSize="9" FontWeight="SemiBold" Foreground="#94A3B8"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtKgPlan" Text="0" FontSize="20" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text=" kg" FontSize="10" Foreground="#718096" VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                </StackPanel>
                                <TextBlock x:Name="txtSztPlan" Text="0 szt" FontSize="9" Foreground="#6B7280"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- ZWA≈ªONE - kompaktowy -->
                    <Border Grid.Column="1" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarZielony}" Margin="4,0" Padding="8,6"
                            ToolTip="≈ªywiec ju≈º zwa≈ºony na wadze przyjƒôcia">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="‚óè" FontSize="10" Foreground="#4ECCA3" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="ZWAZONE" FontSize="9" FontWeight="SemiBold" Foreground="#4ECCA3"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtKgZwazone" Text="0" FontSize="20" FontWeight="Bold" Foreground="#4ECCA3"/>
                                    <TextBlock Text=" kg" FontSize="10" Foreground="#4ECCA3" VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                    <TextBlock x:Name="txtTrendZwazone" Text="" FontSize="14" VerticalAlignment="Center" Margin="4,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtSztZwazone" Text="0 szt" FontSize="9" Foreground="#4ECCA3"/>
                                    <TextBlock x:Name="txtTrendInfo" Text="" FontSize="8" Foreground="#6B7280" Margin="4,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- POZOSTA≈ÅO - kompaktowy -->
                    <Border Grid.Column="2" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarNiebieski}" Margin="4,0" Padding="8,6"
                            ToolTip="≈ªywiec oczekujƒÖcy na wa≈ºenie">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="‚óè" FontSize="10" Foreground="#00D9FF" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="POZOSTALO" FontSize="9" FontWeight="SemiBold" Foreground="#00D9FF"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtKgPozostalo" Text="0" FontSize="20" FontWeight="Bold" Foreground="#FFB347"/>
                                    <TextBlock Text=" kg" FontSize="10" Foreground="#FFB347" VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                                </StackPanel>
                                <TextBlock x:Name="txtSztPozostalo" Text="0 szt" FontSize="9" Foreground="#FFB347"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- ODCHYLENIE - kompaktowy -->
                    <Border x:Name="borderOdchylenie" Grid.Column="3" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarSzary}" Margin="4,0" Padding="8,6"
                            ToolTip="R√≥≈ºnica plan vs rzeczywisto≈õƒá&#10;¬±2% OK | ¬±5% UWAGA | >5% PROBLEM">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="‚ñ≥" FontSize="12" Foreground="#94A3B8" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="ODCHYLENIE" FontSize="9" FontWeight="SemiBold" Foreground="#94A3B8"/>
                                <TextBlock x:Name="txtOdchylenie" Text="-" FontSize="18" FontWeight="Bold" Foreground="White"/>
                                <TextBlock x:Name="txtOdchylenieProc" Text="" FontSize="9" Foreground="#6B7280"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- ≈öREDNIE WAGI - po≈ÇƒÖczone w jeden kafelek -->
                    <Border Grid.Column="4" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarFioletowy}" Margin="4,0" Padding="8,6"
                            ToolTip="≈örednia waga: deklarowana vs rzeczywista&#10;Pokazuje czy ptaki sƒÖ ciƒô≈ºsze/l≈ºejsze">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <!-- Deklarowana -->
                            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                <TextBlock Text="DEKL." FontSize="8" FontWeight="Bold" Foreground="#A78BFA" HorizontalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock x:Name="txtSrWagaPlan" Text="-" FontSize="18" FontWeight="Bold" Foreground="#A78BFA"/>
                                    <TextBlock Text="kg" FontSize="8" Foreground="#718096" VerticalAlignment="Bottom" Margin="2,0,0,3"/>
                                </StackPanel>
                            </StackPanel>
                            <!-- Strza≈Çka z interpretacjƒÖ -->
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="4,0">
                                <TextBlock x:Name="txtWagaArrow" Text="‚Üí" FontSize="14" Foreground="#4A5568" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtWagaInterpretacja" Text="" FontSize="8" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                            <!-- Rzeczywista -->
                            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                <TextBlock Text="RZECZ." FontSize="8" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock x:Name="txtSrWagaRzecz" Text="-" FontSize="18" FontWeight="Bold" Foreground="#4ECCA3"/>
                                    <TextBlock Text="kg" FontSize="8" Foreground="#718096" VerticalAlignment="Bottom" Margin="2,0,0,3"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- REALIZACJA % - kompaktowy -->
                    <Border Grid.Column="5" Background="{StaticResource TileDarkBg}" CornerRadius="8"
                            BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarZielony}" Margin="4,0" Padding="8,6"
                            ToolTip="Procent zrealizowanych dostaw">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="‚úì" FontSize="12" Foreground="#4ECCA3" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="REALIZACJA" FontSize="9" FontWeight="SemiBold" Foreground="#94A3B8"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="txtRealizacja" Text="0%" FontSize="20" FontWeight="Bold" Foreground="#4ECCA3"/>
                                </StackPanel>
                                <TextBlock x:Name="txtDostawyStatus" Text="(0/0 dostaw)" FontSize="9" Foreground="#6B7280"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Mini status dostaw -->
                    <Border Grid.Column="6" Background="#0F172A" CornerRadius="6" Padding="10,6" Margin="4,0,0,0" VerticalAlignment="Center">
                        <StackPanel>
                            <TextBlock Text="DOSTAWY" FontSize="8" FontWeight="Bold" Foreground="#4A5568" HorizontalAlignment="Center"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,2,0,0">
                                <TextBlock Text="‚úÖ" FontSize="10"/>
                                <TextBlock x:Name="txtZwazoneCount" Text="0" FontSize="11" FontWeight="Bold" Foreground="#4ECCA3" Margin="2,0,6,0"/>
                                <TextBlock Text="‚è≥" FontSize="10"/>
                                <TextBlock x:Name="txtBruttoCount" Text="0" FontSize="11" FontWeight="Bold" Foreground="#FFB347" Margin="2,0,6,0"/>
                                <TextBlock Text="üî¥" FontSize="10"/>
                                <TextBlock x:Name="txtOczekujeCount" Text="0" FontSize="11" FontWeight="Bold" Foreground="#F87171" Margin="2,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- RZƒÑD 2: Prognoza tuszek - horyzontalny layout -->
                <Border Grid.Row="1" Background="{StaticResource TileDarkBg}" CornerRadius="8" Margin="0,6,0,0" Padding="10,6"
                        BorderThickness="0,0,0,3" BorderBrush="{StaticResource BarFioletowy}"
                        ToolTip="Prognoza tuszek = ≈ºywiec √ó 78% wydajno≈õci uboju">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Ikona i tytu≈Ç -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                            <TextBlock Text="‚óÜ" FontSize="14" Foreground="#A78BFA" VerticalAlignment="Center" Margin="0,0,6,0"/>
                            <TextBlock Text="TUSZKI" FontSize="11" FontWeight="Bold" Foreground="#E2E8F0" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- PLAN tuszek -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,10,0">
                            <TextBlock Text="PLAN:" FontSize="10" Foreground="#A78BFA" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="txtTuszkiPlan" Text="0" FontSize="16" FontWeight="Bold" Foreground="#A78BFA" VerticalAlignment="Center"/>
                            <TextBlock Text=" kg" FontSize="9" Foreground="#718096" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Strza≈Çka -->
                        <TextBlock Grid.Column="2" Text="‚Üí" FontSize="14" Foreground="#4A5568" VerticalAlignment="Center" Margin="0,0,10,0"/>

                        <!-- RZECZ tuszek -->
                        <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                            <TextBlock Text="RZECZ:" FontSize="10" Foreground="#4ECCA3" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBlock x:Name="txtPrognozaTuszek" Text="0" FontSize="16" FontWeight="Bold" Foreground="#4ECCA3" VerticalAlignment="Center"/>
                            <TextBlock Text=" kg" FontSize="9" Foreground="#718096" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- R√≥≈ºnica + Wz√≥r -->
                        <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
                            <Border Background="#0F172A" CornerRadius="4" Padding="8,3" Margin="0,0,10,0">
                                <TextBlock x:Name="txtTuszkiRoznica" Text="" FontSize="11" FontWeight="Bold" VerticalAlignment="Center"/>
                            </Border>
                            <Border Background="#0F172A" CornerRadius="4" Padding="8,3">
                                <TextBlock x:Name="txtWzorTuszki" Text="0 kg √ó 78% = 0 kg" FontSize="9" Foreground="#6B7280" VerticalAlignment="Center"/>
                            </Border>
                        </StackPanel>

                        <!-- Separator -->
                        <Rectangle Grid.Column="5" Width="1" Fill="#2D3748" Margin="15,0"/>

                        <!-- Klasy A/B -->
                        <StackPanel Grid.Column="6" Orientation="Horizontal" VerticalAlignment="Center">
                            <StackPanel Margin="0,0,12,0">
                                <TextBlock Text="KLASA A" FontSize="8" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtPrognozaA" Text="0 kg" FontSize="12" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock Text="KLASA B" FontSize="8" FontWeight="Bold" Foreground="#FFB347" HorizontalAlignment="Center"/>
                                <TextBlock x:Name="txtPrognozaB" Text="0 kg" FontSize="12" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- INSTRUKCJA DLA HANDLOWC√ìW -->
        <Expander Grid.Row="3" Margin="10,5,10,0" IsExpanded="False">
            <Expander.Header>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="?" FontSize="14" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock Text="JAK CZYTAC TEN DASHBOARD? (kliknij aby rozwinac)" FontSize="12" FontWeight="SemiBold" Foreground="#00D9FF"/>
                </StackPanel>
            </Expander.Header>
            <Expander.Style>
                <Style TargetType="Expander">
                    <Setter Property="Background" Value="{StaticResource CardBackgroundBrush}"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="BorderThickness" Value="0"/>
                </Style>
            </Expander.Style>
            <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="0,0,8,8" Padding="15,10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Kolumna 1: Kafelki -->
                    <StackPanel Grid.Column="0" Margin="0,0,15,0">
                        <TextBlock Text="‚óè KAFELKI ZYWCA" FontWeight="Bold" Foreground="#00D9FF" FontSize="12" Margin="0,0,0,8"/>
                        <TextBlock TextWrapping="Wrap" Foreground="#E2E8F0" FontSize="11" LineHeight="18">
                            <Run FontWeight="Bold" Foreground="#6B7280">PLANOWANE</Run>
                            <Run> - ile kg zywca hodowcy zadeklarowali na dzis</Run>
                            <LineBreak/>
                            <Run FontWeight="Bold" Foreground="#4ECCA3">ZWAZONE</Run>
                            <Run> - ile kg juz przyjeto i zwazono</Run>
                            <LineBreak/>
                            <Run FontWeight="Bold" Foreground="#00D9FF">POZOSTALO</Run>
                            <Run> - ile kg jeszcze czeka na wazenie</Run>
                            <LineBreak/>
                            <Run FontWeight="Bold" Foreground="#A0AEC0">ODCHYLENIE</Run>
                            <Run> - roznica miedzy planem a rzeczywistoscia</Run>
                            <LineBreak/>
                            <Run FontWeight="Bold" Foreground="#A78BFA">SR.WAGA DEKL.</Run>
                            <Run> - srednia waga sztuki wg hodowcy</Run>
                            <LineBreak/>
                            <Run FontWeight="Bold" Foreground="#4ECCA3">SR.WAGA RZECZ.</Run>
                            <Run> - faktyczna srednia waga z wagi</Run>
                        </TextBlock>
                    </StackPanel>

                    <!-- Kolumna 2: Tuszki -->
                    <StackPanel Grid.Column="1" Margin="15,0">
                        <TextBlock Text="‚óÜ PROGNOZA TUSZEK" FontWeight="Bold" Foreground="#A78BFA" FontSize="12" Margin="0,0,0,8"/>
                        <TextBlock TextWrapping="Wrap" Foreground="#E2E8F0" FontSize="11" LineHeight="18">
                            <Run>Ile kg tuszek dostaniemy po uboju:</Run>
                            <LineBreak/>
                            <Run>‚Ä¢ </Run><Run FontWeight="Bold">78%</Run><Run> wydajnosc uboju (zywiec -> tuszka)</Run>
                            <LineBreak/>
                            <Run>‚Ä¢ </Run><Run FontWeight="Bold" Foreground="#4ECCA3">Klasa A (80%)</Run><Run> - tuszki pierwszej jakosci</Run>
                            <LineBreak/>
                            <Run>‚Ä¢ </Run><Run FontWeight="Bold" Foreground="#FFB347">Klasa B (20%)</Run><Run> - tuszki drugiej jakosci</Run>
                            <LineBreak/><LineBreak/>
                            <Run FontWeight="Bold" Foreground="#4ECCA3">+X kg tuszek</Run><Run> = hodowca przywiozl WIECEJ niz deklarowal</Run>
                            <LineBreak/>
                            <Run FontWeight="Bold" Foreground="#F87171">-X kg tuszek</Run><Run> = hodowca przywiozl MNIEJ niz deklarowal</Run>
                        </TextBlock>
                    </StackPanel>

                    <!-- Kolumna 3: Kolory i tabela -->
                    <StackPanel Grid.Column="2" Margin="15,0,0,0">
                        <TextBlock Text="‚ñ∂ ZNACZENIE KOLOROW" FontWeight="Bold" Foreground="#FFB347" FontSize="12" Margin="0,0,0,8"/>
                        <TextBlock TextWrapping="Wrap" Foreground="#E2E8F0" FontSize="11" LineHeight="18">
                            <Run>Kolorowy pasek przy wierszu pokazuje odchylenie:</Run>
                            <LineBreak/>
                            <Run>‚Ä¢ </Run><Run FontWeight="Bold" Foreground="#4ECCA3">ZIELONY (¬±2%)</Run><Run> - OK, norma</Run>
                            <LineBreak/>
                            <Run>‚Ä¢ </Run><Run FontWeight="Bold" Foreground="#FFB347">POMARANCZOWY (¬±5%)</Run><Run> - Uwaga</Run>
                            <LineBreak/>
                            <Run>‚Ä¢ </Run><Run FontWeight="Bold" Foreground="#F87171">CZERWONY (>5%)</Run><Run> - Problem!</Run>
                            <LineBreak/><LineBreak/>
                            <Run FontWeight="Bold">Statusy w tabeli:</Run>
                            <LineBreak/>
                            <Run>‚úÖ - Zwa≈ºony (gotowe)</Run>
                            <LineBreak/>
                            <Run>‚è≥ - Tylko brutto (w trakcie)</Run>
                            <LineBreak/>
                            <Run>üî¥ - Oczekuje (brak wag)</Run>
                        </TextBlock>
                    </StackPanel>
                </Grid>
            </Border>
        </Expander>

        <!-- SEPARATOR -->
        <Rectangle Grid.Row="4" Height="1" Margin="20,8,20,5">
            <Rectangle.Fill>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="Transparent" Offset="0"/>
                    <GradientStop Color="#4A5568" Offset="0.2"/>
                    <GradientStop Color="#4A5568" Offset="0.8"/>
                    <GradientStop Color="Transparent" Offset="1"/>
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>

        <!-- TABELA DOSTAW -->
        <Border Grid.Row="5" Background="{StaticResource CardBackgroundBrush}" CornerRadius="8" Padding="15,12" Margin="10,0,10,5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Nag≈Ç√≥wek -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <TextBlock Text="SZCZEGOLY DOSTAW" Style="{StaticResource SectionHeaderStyle}"/>
                    <TextBlock x:Name="txtLiczbaWynikow" Text="Wyniki: 0" HorizontalAlignment="Right"
                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                    <TextBlock x:Name="txtDataDisplay" Text="" HorizontalAlignment="Center"
                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                </Grid>

                <!-- DataGrid -->
                <DataGrid x:Name="dgDostawy" Grid.Row="1"
                          Style="{StaticResource ModernDataGrid}"
                          ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle}"
                          CellStyle="{StaticResource DataGridCellStyle}"
                          RowStyle="{StaticResource DataGridRowStyle}"
                          VirtualizingPanel.IsVirtualizing="True"
                          MouseDoubleClick="DataGrid_MouseDoubleClick">
                    <DataGrid.Columns>
                        <!-- Kolorowy pasek -->
                        <DataGridTemplateColumn Width="4" CanUserResize="False">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Width="4" Margin="-10,0,0,0"
                                            Background="{Binding Poziom, Converter={StaticResource OdchylenieToBarColorConverter}}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn Header="LP" Binding="{Binding NrKursu}" Width="45">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="HODOWCA" Binding="{Binding Hodowca}" Width="*" MinWidth="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="PLAN [kg]" Binding="{Binding KgPlan, StringFormat=N0}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTemplateColumn Header="RZECZ [kg]" Width="90">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding KgRzeczywiste, StringFormat=N0}" HorizontalAlignment="Right"
                                               Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="ODCHYL." Width="110">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding OdchylenieDisplay}"
                                                   Foreground="{Binding Poziom, Converter={StaticResource OdchylenieToColorConverter}}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="WAGA DEKL." Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding SredniaWagaPlanCalc, StringFormat=N2}"
                                               Foreground="#A0AEC0"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="WAGA RZ." Width="65">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding SredniaWagaRzeczywistaCalc, Converter={StaticResource NullToDashConverter}}"
                                               Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- TUSZKI PLAN -->
                        <DataGridTemplateColumn Header="TUSZKI PL." Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TuszkiPlanKg, StringFormat=N0}"
                                               Foreground="#A78BFA"
                                               HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- TUSZKI RZECZYWISTE -->
                        <DataGridTemplateColumn Header="TUSZKI RZ." Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TuszkiRzeczywisteKg, Converter={StaticResource NullToDashConverter}}"
                                               Foreground="{Binding Status, Converter={StaticResource StatusToColorConverter}}"
                                               HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Status jako ikona -->
                        <DataGridTemplateColumn Header="STATUS" Width="60">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding StatusIcon}"
                                               FontSize="18"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               ToolTip="{Binding StatusText}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn Header="PRZYJAZD" Binding="{Binding PrzyjazdDisplay}" Width="70">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="WAZYL" Binding="{Binding KtoWazyl}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Wiersz podsumowania -->
                <Border Grid.Row="2" Background="#1A365D" CornerRadius="0,0,8,8" Padding="10,6" Margin="0,0,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="4"/>
                            <ColumnDefinition Width="45"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="90"/>
                            <ColumnDefinition Width="90"/>
                            <ColumnDefinition Width="110"/>
                            <ColumnDefinition Width="65"/>
                            <ColumnDefinition Width="65"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="90"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="1" Text="SUMA" FontWeight="Bold" Foreground="#63B3ED" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaDostawy" Grid.Column="2" Text="0 dostaw" Foreground="#A0AEC0" VerticalAlignment="Center" Margin="10,0,0,0"/>
                        <TextBlock x:Name="txtSumaPlan" Grid.Column="3" Text="0" FontWeight="Bold" Foreground="White" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaRzecz" Grid.Column="4" Text="0" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaOdchylenie" Grid.Column="5" Text="-" FontWeight="Bold" Foreground="#A0AEC0" VerticalAlignment="Center" Margin="10,0,0,0"/>
                        <TextBlock x:Name="txtSumaWagaPlan" Grid.Column="6" Text="-" Foreground="#A0AEC0" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaSrWaga" Grid.Column="7" Text="-" Foreground="#A0AEC0" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaTuszkiPlan" Grid.Column="8" Text="-" FontWeight="Bold" Foreground="#A78BFA" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtSumaTuszkiRzecz" Grid.Column="9" Text="-" FontWeight="Bold" Foreground="#4ECCA3" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Legenda -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,8,0,0">
                    <TextBlock Text="Legenda:" Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" Margin="0,0,15,0"/>
                    <Border Width="12" Height="12" Background="#4ECCA3" CornerRadius="2" Margin="0,0,4,0"/>
                    <TextBlock Text="OK (¬±2%)" Foreground="{StaticResource StatusOKBrush}" FontSize="11" FontWeight="SemiBold" Margin="0,0,15,0"/>
                    <Border Width="12" Height="12" Background="#FFB347" CornerRadius="2" Margin="0,0,4,0"/>
                    <TextBlock Text="Uwaga (¬±5%)" Foreground="{StaticResource StatusWarningBrush}" FontSize="11" FontWeight="SemiBold" Margin="0,0,15,0"/>
                    <Border Width="12" Height="12" Background="#E94560" CornerRadius="2" Margin="0,0,4,0"/>
                    <TextBlock Text="Problem (>5%)" Foreground="{StaticResource StatusErrorBrush}" FontSize="11" FontWeight="SemiBold" Margin="0,0,15,0"/>
                    <TextBlock Text="   |   " Foreground="#4A5568"/>
                    <TextBlock Text="Dwuklik = szczegoly" Foreground="#718096" FontSize="11" FontStyle="Italic"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- STOPKA -->
        <Border Grid.Row="6" Background="{StaticResource BackgroundMediumBrush}" Padding="15,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button x:Name="btnExportExcel" Style="{StaticResource ModernButton}" Margin="0,0,8,0" Click="BtnExportExcel_Click" Content="Eksport Excel"/>
                    <Button x:Name="btnPrint" Style="{StaticResource ModernButton}" Margin="0,0,8,0" Click="BtnPrint_Click" Content="Drukuj"/>
                    <Button x:Name="btnDiagnose" Style="{StaticResource ModernButton}" Click="BtnDiagnose_Click" Background="#8B0000">
                        <TextBlock Text="DIAGNOSTYKA" Foreground="#FF6B6B"/>
                    </Button>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Aktualizacja: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="11"/>
                    <TextBlock x:Name="txtLastUpdate" Text="-" Foreground="White" FontSize="11" FontWeight="SemiBold"/>
                    <TextBlock Text="  |  Auto: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" Margin="10,0,0,0"/>
                    <TextBlock x:Name="txtAutoRefreshFooter" Text="30s" Foreground="{StaticResource AccentGreenBrush}" FontSize="11" FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- OVERLAY ≈ÅADOWANIA ZE SPINNEREM -->
        <Border x:Name="loadingOverlay" Grid.RowSpan="7" Background="#CC1A1A2E" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <!-- Spinner -->
                <Ellipse x:Name="spinnerEllipse" Width="50" Height="50" StrokeThickness="4"
                         Stroke="#4ECCA3" StrokeDashArray="3,2">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="spinnerRotate" CenterX="25" CenterY="25"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="spinnerRotate"
                                                     Storyboard.TargetProperty="Angle"
                                                     From="0" To="360" Duration="0:0:1"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>

                <!-- Tekst -->
                <TextBlock x:Name="txtLoadingMessage" Text="Aktualizacja..." Foreground="White" FontSize="14"
                           HorizontalAlignment="Center" Margin="0,15,0,0"/>
            </StackPanel>
        </Border>

        <!-- OVERLAY B≈ÅƒòDU -->
        <Border x:Name="errorOverlay" Grid.RowSpan="7" Background="#CC1A1A2E" Visibility="Collapsed">
            <Border Background="{StaticResource CardBackgroundBrush}" CornerRadius="12" Padding="30,20" HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="450">
                <StackPanel>
                    <TextBlock Text="Blad polaczenia" FontSize="18" FontWeight="Bold" Foreground="{StaticResource StatusErrorBrush}" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                    <TextBlock x:Name="txtErrorMessage" Text="" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap" TextAlignment="Center" Margin="0,0,0,15"/>
                    <Button Content="Sprobuj ponownie" Style="{StaticResource AccentButton}" HorizontalAlignment="Center" Click="BtnRetry_Click"/>
                </StackPanel>
            </Border>
        </Border>
    </Grid>
</Window>
