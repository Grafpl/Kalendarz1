<Window x:Class="Kalendarz1.PrognozyUboju.PrognozyUbojuWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Prognoza Uboju - Analiza Zakupów" 
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="#F5F7FA">

    <Window.Resources>
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#3498db"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#34495e" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="PROGNOZA UBOJU" 
                             FontSize="24" FontWeight="Bold" 
                             Foreground="White"/>
                    <TextBlock Text="Analiza średnich zakupów towarów w poszczególne dni tygodnia" 
                             FontSize="12" 
                             Foreground="#bdc3c7" 
                             Margin="0,5,0,0"/>
                </StackPanel>

                <TextBlock Grid.Column="1" 
                         x:Name="txtUserInfo"
                         Text="Użytkownik" 
                         FontSize="12" 
                         Foreground="White"
                         VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <Border Grid.Row="1" 
                Background="White" 
                BorderBrush="#e0e0e0" BorderThickness="0,0,0,1"
                Padding="15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal">
                    <StackPanel Margin="0,0,15,0">
                        <TextBlock Text="📦 Towar:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="cmbTowar" Width="250"
                                SelectionChanged="CmbTowar_SelectionChanged"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,15,0">
                        <TextBlock Text="📅 Okres:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="cmbOkresAnalizy" Width="140" 
                                SelectionChanged="CmbOkresAnalizy_SelectionChanged">
                            <ComboBoxItem Content="4 tygodnie" Tag="4"/>
                            <ComboBoxItem Content="8 tygodni" Tag="8" IsSelected="True"/>
                            <ComboBoxItem Content="12 tygodni" Tag="12"/>
                            <ComboBoxItem Content="16 tygodni" Tag="16"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Margin="0,0,15,0">
                        <TextBlock Text="👁 Widok:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="cmbWidok" Width="180"
                                SelectionChanged="CmbWidok_SelectionChanged">
                            <ComboBoxItem Content="📊 Po towarach" Tag="Towary" IsSelected="True"/>
                            <ComboBoxItem Content="🏢 Po odbiorcach" Tag="Odbiorcy"/>
                            <ComboBoxItem Content="👥 Po handlowcach" Tag="Handlowcy"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Margin="0,0,15,0">
                        <TextBlock Text="⚖ Min. śr. kg/tydz:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="txtMinIlosc" Width="80" Text="0" 
                               VerticalContentAlignment="Center"
                               TextChanged="TxtMinIlosc_TextChanged"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,15,0" VerticalAlignment="Bottom">
                        <Button x:Name="btnWybierzKontrahentow" 
                              Content="🏢 Kontrahenci" 
                              Width="130" Height="28"
                              Background="#3498db"
                              Foreground="White"
                              BorderThickness="0"
                              Cursor="Hand"
                              Click="BtnWybierzKontrahentow_Click"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,15,0" VerticalAlignment="Bottom">
                        <Button x:Name="btnWybierzHandlowcow" 
                              Content="👥 Handlowcy" 
                              Width="130" Height="28"
                              Background="#9b59b6"
                              Foreground="White"
                              BorderThickness="0"
                              Cursor="Hand"
                              Click="BtnWybierzHandlowcow_Click"/>
                    </StackPanel>

                    <StackPanel VerticalAlignment="Bottom">
                        <Button x:Name="btnOdswiez"
                              Content="🔄 Odśwież"
                              Width="100" Height="28"
                              Background="#27ae60"
                              Foreground="White"
                              FontWeight="Bold"
                              BorderThickness="0"
                              Cursor="Hand"
                              Click="BtnOdswiez_Click"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,10,0,0">
                    <Border x:Name="borderAktywneKontrahenci"
                            Background="#e8f5e9"
                            BorderBrush="#27ae60"
                            BorderThickness="1"
                            CornerRadius="3"
                            Padding="8,4"
                            Margin="0,0,10,0"
                            Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🏢 Kontrahenci: " FontWeight="Bold" Foreground="#27ae60"/>
                            <TextBlock x:Name="txtAktywneKontrahenci" Text="Wszyscy" Foreground="#27ae60"/>
                            <Button Content="✗" 
                                  Background="Transparent"
                                  BorderThickness="0"
                                  Foreground="#27ae60"
                                  FontWeight="Bold"
                                  Cursor="Hand"
                                  Margin="5,0,0,0"
                                  Click="BtnWyczyscKontrahentow_Click"/>
                        </StackPanel>
                    </Border>

                    <Border x:Name="borderAktywniHandlowcy"
                            Background="#f3e5f5"
                            BorderBrush="#9b59b6"
                            BorderThickness="1"
                            CornerRadius="3"
                            Padding="8,4"
                            Margin="0,0,10,0"
                            Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="👥 Handlowcy: " FontWeight="Bold" Foreground="#9b59b6"/>
                            <TextBlock x:Name="txtAktywniHandlowcy" Text="Wszyscy" Foreground="#9b59b6"/>
                            <Button Content="✗" 
                                  Background="Transparent"
                                  BorderThickness="0"
                                  Foreground="#9b59b6"
                                  FontWeight="Bold"
                                  Cursor="Hand"
                                  Margin="5,0,0,0"
                                  Click="BtnWyczyscHandlowcow_Click"/>
                        </StackPanel>
                    </Border>

                    <Border x:Name="borderAktywnyTowar"
                            Background="#fff3e0"
                            BorderBrush="#f39c12"
                            BorderThickness="1"
                            CornerRadius="3"
                            Padding="8,4"
                            Margin="0,0,10,0"
                            Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📦 Towar: " FontWeight="Bold" Foreground="#f39c12"/>
                            <TextBlock x:Name="txtAktywnyTowar" Text="" Foreground="#f39c12"/>
                            <Button Content="✗" 
                                  Background="Transparent"
                                  BorderThickness="0"
                                  Foreground="#f39c12"
                                  FontWeight="Bold"
                                  Cursor="Hand"
                                  Margin="5,0,0,0"
                                  Click="BtnWyczyscTowar_Click"/>
                        </StackPanel>
                    </Border>

                    <TextBlock x:Name="txtStatus" 
                               Text="ℹ Gotowy"
                             VerticalAlignment="Center"
                             Foreground="#7f8c8d"
                             Margin="10,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <DataGrid Grid.Row="2" 
                x:Name="dgDane"
                AutoGenerateColumns="False"
                IsReadOnly="True"
                SelectionMode="Single"
                GridLinesVisibility="Horizontal"
                HeadersVisibility="Column"
                RowHeight="35"
                ColumnHeaderHeight="45"
                AlternatingRowBackground="#f8f9fa"
                Background="White"
                BorderThickness="0"
                Margin="10">

            <DataGrid.Resources>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="#34495e"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Padding" Value="10"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                </Style>

                <Style TargetType="DataGridCell">
                    <Setter Property="Padding" Value="8"/>
                    <Setter Property="BorderThickness" Value="0"/>
                </Style>
            </DataGrid.Resources>
        </DataGrid>

        <Border Grid.Row="3" Background="#ecf0f1" 
                BorderBrush="#bdc3c7" BorderThickness="0,1,0,0"
                Padding="20,15">
            <StackPanel>
                <TextBlock x:Name="txtPodsumowanie"
                         FontSize="12" 
                         Foreground="#2c3e50"
                         Text="Podsumowanie: 0 towarów"/>

                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                    <TextBlock Text="Dzień o największym zapotrzebowaniu: " 
                                 FontWeight="Bold" Margin="0,0,5,0"/>
                    <TextBlock x:Name="txtNajwiekszyDzien" 
                             Text="-" 
                             Foreground="#27ae60"
                             FontWeight="Bold"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                    <TextBlock Text="Dzień o najmniejszym zapotrzebowaniu (Pon-Pt): " 
                                   FontWeight="Bold" Margin="0,0,5,0"/>
                    <TextBlock x:Name="txtNajmniejszyDzien" 
                             Text="-" 
                             Foreground="#e74c3c"
                             FontWeight="Bold"/>
                </StackPanel>

                <TextBlock x:Name="txtSredniaTygodniowa"
                         FontWeight="Bold"
                         Foreground="#3498db"
                         Margin="0,5,0,0"
                         Text="Średnia tyg: 0 kg"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="4" Background="White" 
                BorderBrush="#e0e0e0" BorderThickness="0,1,0,0"
                Padding="15,10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Eksportuj CSV" 
                      Style="{StaticResource ModernButton}"
                      Background="#27ae60"
                      Click="BtnEksportCSV_Click"/>
                <Button Content="Wykres tygodniowy" 
                      Style="{StaticResource ModernButton}"
                      Background="#9b59b6"
                      Click="BtnWykresTygodniowy_Click"/>
                <Button Content="Instrukcja" 
                      Style="{StaticResource ModernButton}"
                      Background="#f39c12"
                      Click="BtnInstrukcja_Click"/>
                <Button Content="Zamknij" 
                      Style="{StaticResource ModernButton}"
                      Background="#95a5a6"
                      Click="BtnZamknij_Click" Cursor="Hand"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>