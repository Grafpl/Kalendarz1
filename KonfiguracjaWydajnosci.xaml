<Window x:Class="Kalendarz1.KonfiguracjaWydajnosci"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Konfiguracja Wydajności Produkcji" 
        Height="650" Width="950"
        WindowStartupLocation="CenterOwner"
        Background="White"
        FontFamily="Segoe UI">

    <Window.Resources>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#5C8A3A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="3"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="DataGridStyle" TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="GridLinesVisibility" Value="All"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="RowHeight" Value="32"/>
            <Setter Property="AlternatingRowBackground" Value="#F8F9FA"/>
            <Setter Property="BorderBrush" Value="#BDC3C7"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <Style x:Key="ColumnHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#5C8A3A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Nagłówek -->
        <Border Grid.Row="0" Background="#5C8A3A" Padding="15,12">
            <TextBlock Text="KONFIGURACJA WYDAJNOŚCI PRODUKCJI" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Foreground="White"/>
        </Border>

        <!-- Formularz dodawania nowej konfiguracji -->
        <Border Grid.Row="1" 
                Background="#ECF0F1" 
                Padding="15" 
                Margin="10,10,10,0">
            <StackPanel>
                <TextBlock Text="Dodaj nową konfigurację wydajności od określonej daty" 
                           FontWeight="SemiBold" 
                           FontSize="13"
                           Margin="0,0,0,10"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="110"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="110"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="110"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" 
                               Text="Data od:" 
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               Margin="0,0,8,0"/>
                    <DatePicker Grid.Column="1" 
                                x:Name="dpDataOd"
                                VerticalAlignment="Center"
                                FontSize="12"/>

                    <TextBlock Grid.Column="3" 
                               Text="% Tuszki:" 
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               Margin="0,0,8,0"/>
                    <TextBox Grid.Column="4" 
                             x:Name="txtWspolczynnikTuszki"
                             Text="78.00"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Right"
                             Padding="5"
                             FontSize="12"/>

                    <TextBlock Grid.Column="5" 
                               Text="% A:" 
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               Margin="0,0,8,0"/>
                    <TextBox Grid.Column="6" 
                             x:Name="txtProcentA"
                             Text="85.00"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Right"
                             Padding="5"
                             FontSize="12"/>

                    <TextBlock Grid.Column="7" 
                               Text="% B:" 
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               Margin="0,0,8,0"/>
                    <TextBox Grid.Column="7" 
                             x:Name="txtProcentB"
                             Text="15.00"
                             VerticalAlignment="Center"
                             HorizontalContentAlignment="Right"
                             Padding="5"
                             FontSize="12" Grid.ColumnSpan="4" Margin="82,0,110,0"/>

                    <Button Grid.Column="12" 
                            Content="➕ Dodaj konfigurację"
                            Style="{StaticResource ButtonStyle}"
                            Click="BtnDodaj_Click"
                            Width="150"/>
                </Grid>

                <TextBlock Text="Przykład: Jeśli od 1.01.2025 wydajność tuszki ma być 78%, a podział A/B ma być 85/15, ustaw te wartości i wybierz datę 01.01.2025" 
                           FontSize="11"
                           Foreground="#7F8C8D"
                           FontStyle="Italic"
                           Margin="0,8,0,0"
                           TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- Lista konfiguracji -->
        <Border Grid.Row="2" 
                BorderBrush="#BDC3C7" 
                BorderThickness="1"
                Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Border Grid.Row="0" 
                        Background="#ECF0F1" 
                        Padding="10,8"
                        BorderBrush="#BDC3C7"
                        BorderThickness="0,0,0,1">
                    <TextBlock Text="Historia konfiguracji wydajności (najnowsze na górze)" 
                               FontWeight="SemiBold" 
                               FontSize="12"/>
                </Border>

                <DataGrid Grid.Row="1"
                          x:Name="dgKonfiguracje" 
                          Style="{StaticResource DataGridStyle}"
                          ColumnHeaderStyle="{StaticResource ColumnHeaderStyle}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Data od" 
                                          Binding="{Binding DataOd, StringFormat=yyyy-MM-dd}" 
                                          Width="120"/>

                        <DataGridTextColumn Header="% Tuszki z żywca" 
                                          Binding="{Binding WspolczynnikTuszki, StringFormat=F2}" 
                                          Width="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Foreground" Value="#2C3E50"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="% Tuszka A" 
                                          Binding="{Binding ProcentTuszkaA, StringFormat=F2}" 
                                          Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="#5C8A3A"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="% Tuszka B" 
                                          Binding="{Binding ProcentTuszkaB, StringFormat=F2}" 
                                          Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Status" 
                                          Binding="{Binding StatusTekst}" 
                                          Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <DataGridTextColumn Header="Ostatnia modyfikacja" 
                                          Binding="{Binding DataModyfikacji, StringFormat=yyyy-MM-dd HH:mm}" 
                                          Width="*"/>

                        <DataGridTemplateColumn Header="Akcje" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <Button Content="✕" 
                                                Width="30" 
                                                Height="25"
                                                Background="#E74C3C"
                                                Foreground="White"
                                                BorderThickness="0"
                                                FontWeight="Bold"
                                                Cursor="Hand"
                                                Click="BtnUsun_Click"
                                                Tag="{Binding}"
                                                ToolTip="Dezaktywuj"
                                                Margin="2"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Stopka -->
        <Border Grid.Row="3" Background="#34495E" Padding="15,10">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="💡 Wskazówka: " 
                               Foreground="White" 
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="System automatycznie wybiera najnowszą aktywną konfigurację dla danej daty. Możesz mieć różne parametry w różnych okresach." 
                               Foreground="White" 
                               FontSize="11"
                               VerticalAlignment="Center"
                               TextWrapping="Wrap"/>
                </StackPanel>

                <Button Content="✓ Zamknij"
                        HorizontalAlignment="Right"
                        Style="{StaticResource ButtonStyle}"
                        Width="100"
                        Click="BtnZamknij_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>