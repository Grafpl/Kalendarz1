<Window x:Class="Kalendarz1.Zadania.MeetingChangePopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Zmiana spotkania"
        Width="360" Height="Auto"
        SizeToContent="Height"
        MaxHeight="400"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        WindowStartupLocation="Manual"
        ResizeMode="NoResize">

    <Window.Resources>
        <Storyboard x:Key="SlideIn">
            <DoubleAnimation Storyboard.TargetProperty="(Window.RenderTransform).(TranslateTransform.X)"
                           From="400" To="0" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0" To="1" Duration="0:0:0.2"/>
        </Storyboard>

        <Storyboard x:Key="SlideOut">
            <DoubleAnimation Storyboard.TargetProperty="(Window.RenderTransform).(TranslateTransform.X)"
                           From="0" To="400" Duration="0:0:0.25">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="1" To="0" Duration="0:0:0.2"/>
        </Storyboard>
    </Window.Resources>

    <Window.RenderTransform>
        <TranslateTransform/>
    </Window.RenderTransform>

    <Border Background="#1A1F26" CornerRadius="14" BorderBrush="#2C3E50" BorderThickness="1" Margin="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="25" ShadowDepth="3" Opacity="0.5" Color="#000"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Padding="16,14,16,10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Icon -->
                    <Border x:Name="iconBorder" Grid.Column="0" Width="36" Height="36" CornerRadius="10" Margin="0,0,12,0">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="8" ShadowDepth="0" Opacity="0.4" Color="#F39C12"/>
                        </Border.Effect>
                        <TextBlock x:Name="iconText" Text="⚡" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <!-- Title -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="txtTitle" Text="Zmiana w spotkaniu" FontSize="14" FontWeight="SemiBold" Foreground="White"/>
                        <TextBlock x:Name="txtTime" Text="Przed chwilą" FontSize="10" Foreground="#7F8C8D" Margin="0,2,0,0"/>
                    </StackPanel>

                    <!-- Close -->
                    <Button Grid.Column="2" Content="✕" Background="Transparent" Foreground="#7F8C8D"
                            BorderThickness="0" FontSize="14" Padding="6,2" Cursor="Hand"
                            Click="BtnClose_Click" VerticalAlignment="Top"/>
                </Grid>
            </Border>

            <!-- Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" MaxHeight="250" Margin="16,0,16,0">
                <StackPanel x:Name="changesPanel">
                    <!-- Changes will be added here -->
                </StackPanel>
            </ScrollViewer>

            <!-- Footer -->
            <Border Grid.Row="2" Padding="16,10,16,14">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" Content="Odrzuć" Background="#2C3E50" Foreground="White"
                            BorderThickness="0" Padding="14,8" FontSize="11" Cursor="Hand"
                            Click="BtnDismiss_Click" Margin="0,0,8,0">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Grid.Column="1" x:Name="btnAction" Content="Zobacz szczegóły" Foreground="White"
                            BorderThickness="0" Padding="14,8" FontSize="11" FontWeight="SemiBold" Cursor="Hand"
                            Click="BtnAction_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
