<Window x:Class="Kalendarz1.Kartoteka.Features.Mapa.MapaKlientowWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mapa klientÃ³w" Width="1200" Height="800"
        WindowStartupLocation="CenterScreen" WindowState="Maximized" Background="#F3F4F6">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Panel filtrÃ³w -->
        <Border Grid.Column="0" Background="White" BorderBrush="#E5E7EB" BorderThickness="0,0,1,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="14">
                    <TextBlock Text="ðŸ—ºï¸ Mapa klientÃ³w" FontSize="16" FontWeight="Bold" Foreground="#166534" Margin="0,0,0,12"/>

                    <!-- Filtry kategorii -->
                    <TextBlock Text="Kategoria" FontWeight="SemiBold" FontSize="12" Foreground="#374151" Margin="0,0,0,6"/>
                    <CheckBox x:Name="chkKatA" Content="Kategoria A" IsChecked="True" Margin="0,0,0,3" FontSize="12"
                              Foreground="#10B981" FontWeight="SemiBold" Checked="Filtr_Changed" Unchecked="Filtr_Changed"/>
                    <CheckBox x:Name="chkKatB" Content="Kategoria B" IsChecked="True" Margin="0,0,0,3" FontSize="12"
                              Foreground="#3B82F6" FontWeight="SemiBold" Checked="Filtr_Changed" Unchecked="Filtr_Changed"/>
                    <CheckBox x:Name="chkKatC" Content="Kategoria C" IsChecked="True" Margin="0,0,0,3" FontSize="12"
                              Foreground="#F59E0B" FontWeight="SemiBold" Checked="Filtr_Changed" Unchecked="Filtr_Changed"/>
                    <CheckBox x:Name="chkKatD" Content="Kategoria D" IsChecked="True" Margin="0,0,0,3" FontSize="12"
                              Foreground="#6B7280" FontWeight="SemiBold" Checked="Filtr_Changed" Unchecked="Filtr_Changed"/>
                    <CheckBox x:Name="chkBezKat" Content="Brak kategorii" IsChecked="True" Margin="0,0,0,8" FontSize="12"
                              Foreground="#EF4444" Checked="Filtr_Changed" Unchecked="Filtr_Changed"/>

                    <!-- Filtr alertÃ³w -->
                    <CheckBox x:Name="chkAlerty" Content="Tylko z alertami" Margin="0,0,0,10" FontSize="12"
                              Checked="Filtr_Changed" Unchecked="Filtr_Changed"/>

                    <!-- Filtr handlowca -->
                    <TextBlock Text="Handlowiec" FontWeight="SemiBold" FontSize="12" Foreground="#374151" Margin="0,0,0,6"/>
                    <ComboBox x:Name="cmbHandlowiec" FontSize="12" Margin="0,0,0,10" SelectionChanged="CmbHandlowiec_Changed">
                        <ComboBoxItem Content="Wszyscy" IsSelected="True"/>
                    </ComboBox>

                    <Separator Margin="0,4,0,10"/>

                    <!-- Geokodowanie -->
                    <Button x:Name="btnGeokoduj" Content="ðŸ“ Geokoduj adresy" Click="BtnGeokoduj_Click"
                            Padding="10,6" FontSize="12" Background="#059669" Foreground="White"
                            BorderThickness="0" Cursor="Hand" Margin="0,0,0,6">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#166534"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock x:Name="txtGeokodStatus" FontSize="10" Foreground="#6B7280" TextWrapping="Wrap" Margin="0,0,0,10"/>

                    <Separator Margin="0,4,0,10"/>

                    <!-- Statystyki -->
                    <TextBlock Text="Statystyki" FontWeight="SemiBold" FontSize="12" Foreground="#374151" Margin="0,0,0,6"/>
                    <TextBlock x:Name="txtStatKlienci" FontSize="12" Foreground="#374151" Margin="0,0,0,3"/>
                    <TextBlock x:Name="txtStatMapa" FontSize="12" Foreground="#374151" Margin="0,0,0,3"/>
                    <TextBlock x:Name="txtStatObroty" FontSize="12" Foreground="#374151" Margin="0,0,0,3"/>

                    <Separator Margin="0,10,0,10"/>

                    <!-- Lista widocznych klientÃ³w -->
                    <TextBlock Text="Klienci na mapie" FontWeight="SemiBold" FontSize="12" Foreground="#374151" Margin="0,0,0,6"/>
                    <ListBox x:Name="lstKlienci" MaxHeight="300" FontSize="11" BorderThickness="0"
                             SelectionChanged="LstKlienci_SelectionChanged"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Mapa (WindowsFormsHost z GMapControl) -->
        <WindowsFormsHost Grid.Column="1" x:Name="mapHost"/>

        <!-- Loading overlay -->
        <Border Grid.Column="1" x:Name="loadingOverlay" Background="#80FFFFFF" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="Åadowanie mapy..." FontSize="16" Foreground="#374151" HorizontalAlignment="Center"/>
                <ProgressBar IsIndeterminate="True" Width="200" Height="4" Margin="0,10,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
