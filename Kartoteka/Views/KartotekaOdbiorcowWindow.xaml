<Window x:Class="Kalendarz1.Kartoteka.Views.KartotekaOdbiorcowWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Kartoteka OdbiorcÃ³w - ZPSP"
        Width="1400" Height="900"
        MinWidth="1100" MinHeight="700"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded"
        Closing="Window_Closing">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/KartotekaStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="5*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="5*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- NAGÅÃ“WEK -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Row="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#166534" Offset="0"/>
                    <GradientStop Color="#059669" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid Margin="16,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Logo -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,16,0">
                    <Border Width="40" Height="40" Background="White" CornerRadius="20" Margin="0,0,8,0">
                        <TextBlock Text="ðŸ”" FontSize="22" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="UBOJNIA DROBIU" FontWeight="Bold" Foreground="White" FontSize="10"/>
                        <TextBlock Text="PIÃ“RKOWSCY" Foreground="#A7F3D0" FontSize="9" FontWeight="SemiBold"/>
                    </StackPanel>
                </StackPanel>

                <!-- Separator -->
                <Border Grid.Column="1" Width="1" Background="#40FFFFFF" Margin="8,4" VerticalAlignment="Stretch"/>

                <!-- TytuÅ‚ -->
                <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="16,0">
                    <TextBlock Text="ðŸ“‹ Kartoteka OdbiorcÃ³w" FontWeight="Bold" FontSize="16" Foreground="White"/>
                    <TextBlock x:Name="TextBlockHandlowiec" Text="Handlowiec:" FontSize="11" Foreground="#A7F3D0"/>
                </StackPanel>

                <!-- Filtry -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                    <TextBox x:Name="TextBoxSzukaj" Width="220"
                             Style="{StaticResource KartotekaSearchBox}"
                             Tag="ðŸ” Szukaj (firma, miasto, NIP)..."
                             TextChanged="TextBoxSzukaj_TextChanged"/>

                    <ComboBox x:Name="ComboBoxKategoria" Width="110" Margin="8,0,0,0"
                              SelectionChanged="ComboBoxKategoria_SelectionChanged">
                        <ComboBoxItem Content="Kategoria" IsSelected="True"/>
                        <ComboBoxItem Content="A"/>
                        <ComboBoxItem Content="B"/>
                        <ComboBoxItem Content="C"/>
                    </ComboBox>

                    <ComboBox x:Name="ComboBoxHandlowiec" Width="130" Margin="8,0,0,0"
                              Visibility="Collapsed"
                              SelectionChanged="ComboBoxHandlowiec_SelectionChanged"/>

                    <CheckBox x:Name="CheckBoxAlerty" Content="âš ï¸ Tylko alerty"
                              Foreground="White" Margin="12,0,0,0"
                              VerticalAlignment="Center"
                              Checked="CheckBoxAlerty_Changed" Unchecked="CheckBoxAlerty_Changed"/>

                    <Button x:Name="ButtonDebug" Content="ðŸ› Debug"
                            Background="#7C3AED" Foreground="White" FontSize="11"
                            Padding="8,4" Margin="12,0,0,0" Cursor="Hand"
                            BorderThickness="0" FontWeight="SemiBold"
                            Click="ButtonDebug_Click"
                            ToolTip="Uruchom test wydajnoÅ›ci Å‚adowania danych"/>
                </StackPanel>

                <!-- Przyciski -->
                <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Content="ðŸ”„ OdÅ›wieÅ¼" Style="{StaticResource KartotekaPrimaryButton}"
                            Click="ButtonOdswiez_Click" Margin="0,0,8,0"/>
                    <Button Content="ðŸ“¥ Excel" Style="{StaticResource KartotekaSecondaryButton}"
                            Click="ButtonExcel_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- LEGENDA ALERTÃ“W -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Row="1" Background="White" BorderBrush="#E5E7EB" BorderThickness="0,0,0,1" Padding="16,4">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Legenda:" Foreground="#6B7280" FontSize="11" VerticalAlignment="Center" Margin="0,0,12,0"/>

                <Border Width="12" Height="12" Background="#FEE2E2" BorderBrush="#F87171" BorderThickness="1" CornerRadius="2"/>
                <TextBlock Text=" Przekroczony limit" FontSize="11" VerticalAlignment="Center" Margin="4,0,16,0"/>

                <Border Width="12" Height="12" Background="#FEF9C3" BorderBrush="#FACC15" BorderThickness="1" CornerRadius="2"/>
                <TextBlock Text=" Przeterminowane" FontSize="11" VerticalAlignment="Center" Margin="4,0,16,0"/>

                <Border Width="12" Height="12" Background="#FFEDD5" BorderBrush="#FB923C" BorderThickness="1" CornerRadius="2"/>
                <TextBlock Text=" Nieaktywny 30d" FontSize="11" VerticalAlignment="Center" Margin="4,0,16,0"/>

                <Border Width="12" Height="12" Background="#DBEAFE" BorderBrush="#60A5FA" BorderThickness="1" CornerRadius="2"/>
                <TextBlock Text=" Nowy klient" FontSize="11" VerticalAlignment="Center" Margin="4,0,16,0"/>

                <!-- Licznik -->
                <TextBlock x:Name="TextBlockLicznik" Text="" FontSize="11" Foreground="#6B7280"
                           VerticalAlignment="Center" HorizontalAlignment="Right" Margin="20,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- TABELA GÅÃ“WNA -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <DataGrid Grid.Row="2" x:Name="DataGridOdbiorcy"
                  Style="{StaticResource KartotekaDataGrid}"
                  ColumnHeaderStyle="{StaticResource KartotekaColumnHeader}"
                  CellStyle="{StaticResource KartotekaDataGridCell}"
                  RowStyle="{StaticResource KartotekaDataGridRow}"
                  SelectionChanged="DataGridOdbiorcy_SelectionChanged"
                  MouseDoubleClick="DataGridOdbiorcy_MouseDoubleClick"
                  Margin="0">

            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="ðŸ“ Edytuj dane" InputGestureText="Enter" Click="MenuEdytuj_Click"/>
                    <MenuItem Header="ðŸ“ž ZadzwoÅ„" Click="MenuZadzwon_Click"/>
                    <MenuItem Header="ðŸ“§ WyÅ›lij email" Click="MenuEmail_Click"/>
                    <Separator/>
                    <MenuItem Header="ðŸ“‹ Kopiuj dane" InputGestureText="Ctrl+C" Click="MenuKopiuj_Click"/>
                </ContextMenu>
            </DataGrid.ContextMenu>

            <DataGrid.Columns>
                <!-- Alert icon + Firma -->
                <DataGridTemplateColumn Header="Firma" Width="220" SortMemberPath="NazwaFirmy" CanUserSort="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding AlertType, Converter={StaticResource AlertToIconConverter}}"
                                           FontSize="12" Margin="0,0,4,0" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding NazwaFirmy}" FontWeight="SemiBold"
                                           TextTrimming="CharacterEllipsis" VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header="Miasto" Binding="{Binding Miasto}" Width="100"/>
                <DataGridTextColumn Header="Kontakt" Binding="{Binding OsobaKontaktowa}" Width="120"/>

                <!-- Telefon - klikalny -->
                <DataGridTemplateColumn Header="Telefon" Width="110">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Hyperlink Click="Hyperlink_Telefon_Click"
                                           NavigateUri="{Binding TelefonKontakt, StringFormat=tel:{0}}"
                                           Style="{StaticResource KartotekaHyperlink}">
                                    <TextBlock Text="{Binding TelefonKontakt}"/>
                                </Hyperlink>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Email - klikalny -->
                <DataGridTemplateColumn Header="Email" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock TextTrimming="CharacterEllipsis">
                                <Hyperlink Click="Hyperlink_Email_Click"
                                           NavigateUri="{Binding EmailKontakt, StringFormat=mailto:{0}}"
                                           Style="{StaticResource KartotekaHyperlink}">
                                    <TextBlock Text="{Binding EmailKontakt}"/>
                                </Hyperlink>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header="Limit" Binding="{Binding LimitKupiecki, StringFormat=N0}" Width="90">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Wykorzystano -->
                <DataGridTemplateColumn Header="Wykorzystano" Width="90">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding WykorzystanoLimit, Converter={StaticResource DecimalToFormattedConverter}}"
                                       TextAlignment="Right" HorizontalAlignment="Right">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding PrzekroczonyLimit}" Value="True">
                                                <Setter Property="Foreground" Value="#DC2626"/>
                                                <Setter Property="FontWeight" Value="Bold"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- % z ProgressBar -->
                <DataGridTemplateColumn Header="%" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <ProgressBar Value="{Binding ProcentWykorzystania, Mode=OneWay}"
                                             Maximum="100" Height="8" VerticalAlignment="Center"
                                             Background="#E5E7EB"
                                             Foreground="{Binding ProcentWykorzystania, Converter={StaticResource ProcentToProgressColorConverter}}"/>
                                <TextBlock Text="{Binding ProcentWykorzystania, StringFormat={}{0:F0}%}"
                                           HorizontalAlignment="Right" FontSize="10" Margin="0,0,2,0"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Kategoria (kÃ³Å‚ko) -->
                <DataGridTemplateColumn Header="Kat." Width="50">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Width="28" Height="28" CornerRadius="14"
                                    Background="{Binding KategoriaHandlowca, Converter={StaticResource KategoriaToBackgroundConverter}}"
                                    HorizontalAlignment="Center">
                                <TextBlock Text="{Binding KategoriaHandlowca}" HorizontalAlignment="Center"
                                           VerticalAlignment="Center" FontWeight="Bold" FontSize="12"
                                           Foreground="{Binding KategoriaHandlowca, Converter={StaticResource KategoriaToForegroundConverter}}"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header="Asortyment" Binding="{Binding AsortymentSkrocony}" Width="150"/>

                <!-- Handlowiec - tylko admin -->
                <DataGridTextColumn x:Name="ColumnHandlowiec" Header="Handlowiec" Binding="{Binding Handlowiec}" Width="90"
                                    Visibility="Collapsed"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- SPLITTER -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <GridSplitter Grid.Row="3" Height="4" HorizontalAlignment="Stretch"
                      Background="#BBF7D0" ResizeDirection="Rows"/>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- PANEL SZCZEGÃ“ÅÃ“W -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Row="4" Background="#F0FDF4">
            <TabControl x:Name="TabControlSzczegoly" Background="Transparent"
                        BorderBrush="#BBF7D0" BorderThickness="0,1,0,0"
                        SelectionChanged="TabControlSzczegoly_SelectionChanged">

                <!-- ===== KONTAKTY ===== -->
                <TabItem Header="ðŸ“ž Kontakty" Style="{StaticResource KartotekaTabItem}">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Padding="12">
                        <WrapPanel x:Name="WrapPanelKontakty" Margin="8"/>
                    </ScrollViewer>
                </TabItem>

                <!-- ===== FINANSE ===== -->
                <TabItem Header="ðŸ’° Finanse" Style="{StaticResource KartotekaTabItem}">
                    <Grid Margin="8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="4*"/>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="3*"/>
                            <ColumnDefinition Width="3*"/>
                        </Grid.ColumnDefinitions>

                        <!-- â•â•â• KOLUMNA 1: Limit kupiecki (gradient) â•â•â• -->
                        <Border Grid.Column="0" Margin="0,0,4,0" CornerRadius="8" Padding="12">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#16A34A" Offset="0"/>
                                    <GradientStop Color="#15803D" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <DockPanel Grid.Row="0">
                                    <TextBlock Text="Limit kupiecki" Foreground="#BBF7D0" FontSize="11"/>
                                    <TextBlock Text="ðŸ’°" FontSize="24" Opacity="0.5" HorizontalAlignment="Right"/>
                                </DockPanel>

                                <TextBlock Grid.Row="1" x:Name="TextFinanseLimitKwota" Text="-"
                                           Foreground="White" FontSize="28" FontWeight="Bold"/>

                                <Grid Grid.Row="2" Margin="0,8,0,4">
                                    <ProgressBar x:Name="ProgressFinanseLimit" Value="0" Maximum="100"
                                                 Height="10" Background="#22C55E" Foreground="White"/>
                                    <TextBlock x:Name="TextFinanseProcentLabel" Text="0%"
                                               HorizontalAlignment="Right" Foreground="White" FontSize="10"/>
                                </Grid>

                                <UniformGrid Grid.Row="3" Columns="2" Margin="0,4,0,0">
                                    <Border Background="#FFFFFF33" CornerRadius="4" Padding="8" Margin="0,0,2,0">
                                        <StackPanel>
                                            <TextBlock Text="Wolne" Foreground="#BBF7D0" FontSize="10"/>
                                            <TextBlock x:Name="TextFinanseWolne" Text="-"
                                                       Foreground="White" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Background="#FFFFFF33" CornerRadius="4" Padding="8" Margin="2,0,0,0">
                                        <StackPanel>
                                            <TextBlock Text="ZajÄ™te" Foreground="#BBF7D0" FontSize="10"/>
                                            <TextBlock x:Name="TextFinanseZajete" Text="-"
                                                       Foreground="White" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                </UniformGrid>
                            </Grid>
                        </Border>

                        <!-- â•â•â• KOLUMNA 2: Warunki pÅ‚atnoÅ›ci â•â•â• -->
                        <StackPanel Grid.Column="1" Margin="4,0">
                            <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                    CornerRadius="4" Padding="8" Margin="0,0,0,4">
                                <StackPanel>
                                    <TextBlock Text="Warunki pÅ‚atnoÅ›ci" Foreground="#6B7280" FontSize="10"/>
                                    <TextBlock x:Name="TextFinansePlatnosc" Text="-"
                                               FontSize="18" FontWeight="Bold"/>
                                    <TextBlock x:Name="TextFinanseFormaPlatnosci" Text="-" Foreground="#6B7280" FontSize="11"/>
                                </StackPanel>
                            </Border>

                            <Border Background="#FFF7ED" BorderBrush="#FDBA74" BorderThickness="1"
                                    CornerRadius="4" Padding="8" Margin="0,0,0,4">
                                <StackPanel>
                                    <TextBlock Text="Do zapÅ‚aty" Foreground="#EA580C" FontSize="10"/>
                                    <TextBlock x:Name="TextFinanseDoZaplaty" Text="-"
                                               Foreground="#EA580C" FontSize="16" FontWeight="Bold"/>
                                </StackPanel>
                            </Border>

                            <Border Background="#FEF2F2" BorderBrush="#FCA5A5" BorderThickness="1"
                                    CornerRadius="4" Padding="8">
                                <StackPanel>
                                    <TextBlock Text="Przeterminowane" Foreground="#DC2626" FontSize="10"/>
                                    <TextBlock x:Name="TextFinansePrzeteminowane" Text="-"
                                               Foreground="#DC2626" FontSize="16" FontWeight="Bold"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- â•â•â• KOLUMNA 3: Wykres obrotÃ³w â•â•â• -->
                        <Border Grid.Column="2" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" Padding="8" Margin="4,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="ðŸ“Š Obroty miesiÄ™czne (12m)"
                                           Foreground="#6B7280" FontSize="10" Margin="0,0,0,8"/>

                                <Grid Grid.Row="1" x:Name="GridObrotyWykres" ClipToBounds="True">
                                    <!-- SÅ‚upki generowane w code-behind -->
                                </Grid>

                                <StackPanel Grid.Row="2" HorizontalAlignment="Center" Margin="0,8,0,0">
                                    <TextBlock x:Name="TextFinanseObrot" Text="-"
                                               FontSize="16" FontWeight="Bold" Foreground="#16A34A"
                                               HorizontalAlignment="Center"/>
                                    <TextBlock x:Name="TextFinanseFakturCount" Text=""
                                               Foreground="#6B7280" FontSize="10" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- â•â•â• KOLUMNA 4: Ostatnie faktury â•â•â• -->
                        <Border Grid.Column="3" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" Padding="8" Margin="4,0,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="ðŸ“… Ostatnie dokumenty"
                                           Foreground="#6B7280" FontSize="10" Margin="0,0,0,8"/>

                                <DataGrid Grid.Row="1" x:Name="DataGridFaktury"
                                          AutoGenerateColumns="False" IsReadOnly="True"
                                          HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                                          BorderThickness="0" RowHeight="24" FontSize="11"
                                          Background="Transparent" CanUserResizeRows="False">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Nr dok." Binding="{Binding NumerDokumentu}" Width="*">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="FontSize" Value="10"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Termin" Binding="{Binding TerminPlatnosci, StringFormat=dd.MM}" Width="50">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="FontSize" Value="10"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTemplateColumn Header="Status" Width="60">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Status}" FontSize="10" FontWeight="Medium"
                                                               Foreground="{Binding Status, Converter={StaticResource FakturaStatusToColorConverter}}"/>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                    </DataGrid.Columns>
                                </DataGrid>

                                <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="#E5E7EB"
                                        Padding="0,6,0,0" Margin="0,4,0,0">
                                    <TextBlock x:Name="TextFinanseStatusPlatnosci" Text=""
                                               Foreground="#16A34A" FontSize="10"
                                               HorizontalAlignment="Center"/>
                                </Border>
                            </Grid>
                        </Border>
                    </Grid>
                </TabItem>

                <!-- ===== ASORTYMENT ===== -->
                <TabItem Header="ðŸ— Asortyment" Style="{StaticResource KartotekaTabItem}">
                    <Grid Margin="8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*"/>
                            <ColumnDefinition Width="3*"/>
                            <ColumnDefinition Width="6*"/>
                        </Grid.ColumnDefinitions>

                        <!-- â•â•â• KOLUMNA 1: Preferencje klienta + dostawy â•â•â• -->
                        <StackPanel Grid.Column="0" Margin="0,0,4,0">
                            <!-- Preferencje klienta -->
                            <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                    CornerRadius="4" Padding="8" Margin="0,0,0,4">
                                <StackPanel>
                                    <TextBlock Text="âš™ï¸ PREFERENCJE KLIENTA" FontWeight="SemiBold"
                                               Foreground="#6B7280" FontSize="10" Margin="0,0,0,8"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Pakowanie:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TextAsortymentPakowanie" Text="-"
                                                   FontWeight="Medium" FontSize="11" Margin="8,2,0,2"/>

                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="JakoÅ›Ä‡:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="TextAsortymentJakosc" Text="-"
                                                   FontWeight="Medium" FontSize="11" Margin="8,2,0,2"/>

                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Asortyment:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TextAsortymentLista" Text="-"
                                                   FontWeight="Medium" Foreground="#16A34A" FontSize="11"
                                                   Margin="8,2,0,2" TextWrapping="Wrap"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Preferencje dostawy -->
                            <Border Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                    CornerRadius="4" Padding="8">
                                <StackPanel>
                                    <TextBlock Text="ðŸšš PREFERENCJE DOSTAWY" FontWeight="SemiBold"
                                               Foreground="#6B7280" FontSize="10" Margin="0,0,0,8"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Dni:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TextAsortymentDni" Text="-"
                                                   FontWeight="Medium" FontSize="11" Margin="8,2,0,2"/>

                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Godzina:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="TextAsortymentGodzina" Text="-"
                                                   FontWeight="Medium" FontSize="11" Margin="8,2,0,2"/>

                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Adres:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TextAsortymentAdres" Text="= adres gÅ‚Ã³wny"
                                                   FontWeight="Medium" FontSize="11" Margin="8,2,0,2" TextWrapping="Wrap"/>

                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Trasa:"
                                                   Foreground="#6B7280" FontSize="11" Margin="0,2"/>
                                        <TextBlock Grid.Row="3" Grid.Column="1" x:Name="TextAsortymentTrasa" Text="-"
                                                   FontWeight="Medium" FontSize="11" Margin="8,2,0,2"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- â•â•â• KOLUMNA 2: Struktura zakupÃ³w â•â•â• -->
                        <Border Grid.Column="1" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" Padding="8" Margin="4,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="ðŸ“Š STRUKTURA ZAKUPÃ“W" FontWeight="SemiBold"
                                           Foreground="#6B7280" FontSize="10" Margin="0,0,0,8"/>

                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                    <StackPanel x:Name="PanelStrukturaZakupow">
                                        <!-- Generowane w code-behind -->
                                    </StackPanel>
                                </ScrollViewer>

                                <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="#E5E7EB"
                                        Padding="0,6,0,0" Margin="0,4,0,0">
                                    <DockPanel>
                                        <TextBlock x:Name="TextAsortymentIloscProduktow" Text="0 produktÃ³w"
                                                   Foreground="#6B7280" FontSize="10"/>
                                        <TextBlock x:Name="TextAsortymentSumaKg" Text="0 kg"
                                                   HorizontalAlignment="Right" FontWeight="Medium" FontSize="10"/>
                                    </DockPanel>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- â•â•â• KOLUMNA 3: Historia produktÃ³w (tabela) â•â•â• -->
                        <Border Grid.Column="2" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" Margin="4,0,0,0" ClipToBounds="True">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Border Grid.Row="0" Background="#F9FAFB" BorderBrush="#E5E7EB"
                                        BorderThickness="0,0,0,1" Padding="8,6">
                                    <DockPanel>
                                        <TextBlock Text="ðŸ“¦ Historia produktÃ³w (12 mies.)"
                                                   FontWeight="SemiBold" FontSize="11"/>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <TextBlock Text="WartoÅ›Ä‡: " Foreground="#6B7280" FontSize="10"/>
                                            <TextBlock x:Name="TextAsortymentSumaWartosc" Text="0 zÅ‚"
                                                       Foreground="#16A34A" FontWeight="Bold" FontSize="10"/>
                                            <TextBlock Text=" | Åšr: " Foreground="#6B7280" FontSize="10"/>
                                            <TextBlock x:Name="TextAsortymentSredniaCena" Text="-"
                                                       FontWeight="Bold" FontSize="10"/>
                                        </StackPanel>
                                    </DockPanel>
                                </Border>

                                <DataGrid Grid.Row="1" x:Name="DataGridAsortyment"
                                          AutoGenerateColumns="False" IsReadOnly="True"
                                          HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                                          BorderThickness="0" RowHeight="24" FontSize="11"
                                          Background="Transparent" CanUserResizeRows="False">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Kod" Binding="{Binding ProduktKod}" Width="80">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="FontWeight" Value="Medium"/>
                                                    <Setter Property="Foreground" Value="#15803D"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Nazwa" Binding="{Binding ProduktNazwa}" Width="*"/>
                                        <DataGridTextColumn Header="IloÅ›Ä‡ (kg)" Binding="{Binding SumaKg, StringFormat=N0}" Width="80">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="WartoÅ›Ä‡" Binding="{Binding SumaWartosc, StringFormat=N0}" Width="80">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                                    <Setter Property="FontWeight" Value="Medium"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Åšr. cena" Binding="{Binding SredniaCena, StringFormat=N2}" Width="60">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Faktur" Binding="{Binding LiczbaFaktur}" Width="50">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Ostatnio" Binding="{Binding OstatniaSprzedaz, StringFormat=dd.MM.yy}" Width="65"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Border>
                    </Grid>
                </TabItem>

                <!-- ===== HISTORIA ===== -->
                <TabItem Header="ðŸ“Š Historia" Style="{StaticResource KartotekaTabItem}">
                    <Grid Margin="8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- â•â•â• Pasek filtrÃ³w â•â•â• -->
                        <Border Grid.Row="0" Background="#F9FAFB" CornerRadius="4" Padding="8" Margin="0,0,0,8">
                            <DockPanel>
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox x:Name="ComboHistoriaOkres" Width="130" Margin="0,0,8,0"
                                              SelectionChanged="ComboHistoriaOkres_SelectionChanged">
                                        <ComboBoxItem Content="Ostatnie 30 dni"/>
                                        <ComboBoxItem Content="Ostatnie 90 dni" IsSelected="True"/>
                                        <ComboBoxItem Content="Ostatni rok"/>
                                        <ComboBoxItem Content="Wszystko"/>
                                    </ComboBox>
                                    <ComboBox x:Name="ComboHistoriaTyp" Width="140" Margin="0,0,8,0"
                                              SelectionChanged="ComboHistoriaTyp_SelectionChanged">
                                        <ComboBoxItem Content="Wszystkie typy" IsSelected="True"/>
                                        <ComboBoxItem Content="FVS - Faktury"/>
                                        <ComboBoxItem Content="FVZ - Korekty"/>
                                        <ComboBoxItem Content="FVR - VAT RR"/>
                                    </ComboBox>
                                    <ComboBox x:Name="ComboHistoriaStatus" Width="140"
                                              SelectionChanged="ComboHistoriaStatus_SelectionChanged">
                                        <ComboBoxItem Content="Wszystkie statusy" IsSelected="True"/>
                                        <ComboBoxItem Content="ZapÅ‚acone"/>
                                        <ComboBoxItem Content="NieopÅ‚acone"/>
                                        <ComboBoxItem Content="Przeterminowane"/>
                                    </ComboBox>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <TextBlock Text="Znaleziono: " Foreground="#6B7280" FontSize="11"
                                               VerticalAlignment="Center"/>
                                    <TextBlock x:Name="TextHistoriaLiczba" Text="0" FontWeight="Bold" FontSize="11"
                                               VerticalAlignment="Center"/>
                                    <TextBlock Text=" | WartoÅ›Ä‡: " Foreground="#6B7280" FontSize="11"
                                               VerticalAlignment="Center"/>
                                    <TextBlock x:Name="TextHistoriaSuma" Text="0 zÅ‚"
                                               Foreground="#16A34A" FontWeight="Bold" FontSize="11"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                            </DockPanel>
                        </Border>

                        <!-- â•â•â• Tabela dokumentÃ³w â•â•â• -->
                        <Border Grid.Row="1" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" ClipToBounds="True">
                            <DataGrid x:Name="DataGridHistoria"
                                      AutoGenerateColumns="False" IsReadOnly="True"
                                      HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                                      BorderThickness="0" RowHeight="26" FontSize="11"
                                      AlternatingRowBackground="#F9FAFB"
                                      Background="Transparent" CanUserResizeRows="False">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Data" Binding="{Binding DataFaktury, StringFormat=dd.MM.yy}" Width="60"/>
                                    <DataGridTextColumn Header="Nr dokumentu" Binding="{Binding NumerDokumentu}" Width="130">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="FontFamily" Value="Consolas"/>
                                                <Setter Property="FontWeight" Value="Medium"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                    <DataGridTemplateColumn Header="Typ" Width="50">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Border Background="#DBEAFE" CornerRadius="2" Padding="4,1"
                                                        HorizontalAlignment="Center">
                                                    <TextBlock Text="{Binding Typ}" Foreground="#1D4ED8"
                                                               FontSize="10" FontWeight="Medium"/>
                                                </Border>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Header="Brutto" Binding="{Binding Brutto, StringFormat=N2}" Width="100">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                                <Setter Property="FontWeight" Value="Medium"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Header="Rozliczono" Binding="{Binding Rozliczono, StringFormat=N2}" Width="90">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Header="Do zapÅ‚aty" Binding="{Binding DoZaplaty, StringFormat=N2}" Width="85">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                                <Setter Property="FontWeight" Value="Medium"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Header="Termin" Binding="{Binding TerminPlatnosci, StringFormat=dd.MM.yy}" Width="60"/>
                                    <DataGridTemplateColumn Header="Status" Width="90">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Status}" FontSize="10" FontWeight="Medium"
                                                           Foreground="{Binding Status, Converter={StaticResource FakturaStatusToColorConverter}}"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Header="Dni" Binding="{Binding DniPoTerminie}" Width="40">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                                <Setter Property="Foreground" Value="#9CA3AF"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                    </Grid>
                </TabItem>

                <!-- ===== NOTATKI ===== -->
                <TabItem Header="ðŸ“ Notatki" Style="{StaticResource KartotekaTabItem}">
                    <Grid Margin="8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5*"/>
                            <ColumnDefinition Width="7*"/>
                        </Grid.ColumnDefinitions>

                        <!-- â•â•â• KOLUMNA 1: Notatki handlowca â•â•â• -->
                        <Border Grid.Column="0" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" Margin="0,0,4,0" ClipToBounds="True">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Border Grid.Row="0" Background="#F9FAFB" BorderBrush="#E5E7EB"
                                        BorderThickness="0,0,0,1" Padding="8,6">
                                    <TextBlock Text="ðŸ“ Notatki handlowca" FontWeight="SemiBold" FontSize="11"/>
                                </Border>

                                <TextBox Grid.Row="1" x:Name="TextBoxNotatki"
                                         AcceptsReturn="True" TextWrapping="Wrap"
                                         BorderThickness="0" Padding="8" FontSize="11"
                                         VerticalScrollBarVisibility="Auto"/>

                                <Border Grid.Row="2" Background="#F9FAFB" BorderBrush="#E5E7EB"
                                        BorderThickness="0,1,0,0" Padding="8,6">
                                    <DockPanel>
                                        <TextBlock x:Name="TextNotatkaInfo" Foreground="#6B7280" FontSize="10"
                                                   VerticalAlignment="Center" Text=""/>
                                        <Button Content="ðŸ’¾ Zapisz notatki" HorizontalAlignment="Right"
                                                Background="#16A34A" Foreground="White"
                                                Padding="12,4" FontSize="11" Cursor="Hand"
                                                BorderThickness="0"
                                                Click="ButtonZapiszNotatki_Click"/>
                                    </DockPanel>
                                </Border>
                            </Grid>
                        </Border>

                        <!-- â•â•â• KOLUMNA 2: Historia kontaktÃ³w â•â•â• -->
                        <Border Grid.Column="1" Background="White" BorderBrush="#E5E7EB" BorderThickness="1"
                                CornerRadius="4" Margin="4,0,0,0" ClipToBounds="True">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Border Grid.Row="0" Background="#F9FAFB" BorderBrush="#E5E7EB"
                                        BorderThickness="0,0,0,1" Padding="8,6">
                                    <TextBlock Text="ðŸ“… Historia dokumentÃ³w klienta" FontWeight="SemiBold" FontSize="11"/>
                                </Border>

                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                    <StackPanel x:Name="PanelHistoriaKontaktow" Margin="8">
                                        <!-- Generowane z code-behind na podstawie faktur -->
                                    </StackPanel>
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </Grid>
                </TabItem>

                <!-- ===== POJEMNIKI ===== -->
                <TabItem Header="ðŸ“¦ Pojemniki" Style="{StaticResource KartotekaTabItem}">
                    <Grid Margin="12">
                        <Border Style="{StaticResource StatCard}">
                            <StackPanel>
                                <TextBlock Text="ðŸ“¦ Saldo pojemnikÃ³w" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>
                                <TextBlock Text="Dane pojemnikÃ³w dostÄ™pne w module Opakowania" Foreground="#6B7280" FontSize="12"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </TabItem>

                <!-- ===== DOSTAWY ===== -->
                <TabItem Header="ðŸšš Dostawy" Style="{StaticResource KartotekaTabItem}">
                    <ScrollViewer Padding="12">
                        <Grid Margin="8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" Style="{StaticResource StatCard}">
                                <StackPanel>
                                    <TextBlock Text="ðŸšš Preferencje dostawy" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>
                                    <TextBlock x:Name="TextDostawyDni" Text="Preferowane dni: -" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TextDostawyGodzina" Text="Godzina: -" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TextDostawyAdres" Text="Adres: = adres gÅ‚Ã³wny" TextWrapping="Wrap" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TextDostawyTrasa" Text="Trasa: -" Margin="0,0,0,4"/>
                                </StackPanel>
                            </Border>

                            <Border Grid.Column="1" Style="{StaticResource StatCard}">
                                <StackPanel>
                                    <TextBlock Text="ðŸ“‹ Dane adresowe (Symfonia)" FontWeight="Bold" FontSize="14" Margin="0,0,0,12"/>
                                    <TextBlock x:Name="TextDostawyFirma" Text="-" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TextDostawyUlica" Text="-" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TextDostawyMiasto" Text="-" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TextDostawyNIP" Text="-" Foreground="#6B7280" Margin="0,0,0,4"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </ScrollViewer>
                </TabItem>

                <!-- ===== REKLAMACJE ===== -->
                <TabItem Header="âš ï¸ Reklamacje" Style="{StaticResource KartotekaTabItem}">
                    <Grid Margin="12">
                        <Border Style="{StaticResource StatCard}">
                            <StackPanel>
                                <TextBlock Text="âš ï¸ Reklamacje" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>
                                <TextBlock Text="ModuÅ‚ reklamacji w przygotowaniu" Foreground="#6B7280" FontSize="12"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </TabItem>
            </TabControl>
        </Border>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- STOPKA -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border Grid.Row="5" Background="#14532D" Padding="16,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Podpowiedzi -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ’¡ Dwuklik = edycja" Foreground="#BBF7D0" FontSize="11"/>
                    <TextBlock Text=" â€¢ " Foreground="#4B5563" FontSize="11"/>
                    <TextBlock Text="PPM = menu" Foreground="#BBF7D0" FontSize="11"/>
                    <TextBlock Text=" â€¢ " Foreground="#4B5563" FontSize="11"/>
                    <TextBlock Text="F5 = odÅ›wieÅ¼ | Ctrl+F = szukaj" Foreground="#4ADE80" FontSize="11"/>
                </StackPanel>

                <!-- Statystyki -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Suma limitÃ³w: " Foreground="#BBF7D0" FontSize="11"/>
                    <TextBlock x:Name="TextStopkaSumaLimitow" Text="0" Foreground="White" FontWeight="Bold" FontSize="11"/>
                    <TextBlock Text=" zÅ‚" Foreground="#BBF7D0" FontSize="11" Margin="0,0,16,0"/>

                    <TextBlock Text="Wykorzystano: " Foreground="#BBF7D0" FontSize="11"/>
                    <TextBlock x:Name="TextStopkaWykorzystano" Text="0" Foreground="#FDE047" FontWeight="Bold" FontSize="11"/>
                    <TextBlock Text=" zÅ‚" Foreground="#BBF7D0" FontSize="11" Margin="0,0,16,0"/>

                    <TextBlock Text="Wolne: " Foreground="#BBF7D0" FontSize="11"/>
                    <TextBlock x:Name="TextStopkaWolne" Text="0" Foreground="#4ADE80" FontWeight="Bold" FontSize="11"/>
                    <TextBlock Text=" zÅ‚" Foreground="#BBF7D0" FontSize="11" Margin="0,0,16,0"/>

                    <TextBlock Text="Przeterminowane: " Foreground="#BBF7D0" FontSize="11"/>
                    <TextBlock x:Name="TextStopkaPrzeterminowane" Text="0" Foreground="#F87171" FontWeight="Bold" FontSize="11"/>
                    <TextBlock Text=" zÅ‚" Foreground="#BBF7D0" FontSize="11"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Loading overlay -->
        <Border x:Name="LoadingOverlay" Grid.RowSpan="6" Background="#80000000" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="â³ Åadowanie danych..." Foreground="White" FontSize="18" FontWeight="Bold"
                           HorizontalAlignment="Center"/>
                <ProgressBar IsIndeterminate="True" Width="200" Height="4" Margin="0,12,0,0"
                             Foreground="#059669"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
