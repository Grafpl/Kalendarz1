<UserControl x:Class="Kalendarz1.WPF.Controls.DiffViewer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="diffControl">

    <UserControl.Resources>
        <Style x:Key="DiffHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#7F8C8D"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <Style x:Key="DiffValueStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="0,0,0,3"/>
        </Style>
    </UserControl.Resources>

    <Border Background="White" CornerRadius="8" Padding="12" BorderBrush="#E0E0E0" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Stara wartość -->
            <StackPanel Grid.Row="0" Grid.Column="0">
                <TextBlock Text="Było:" Style="{StaticResource DiffHeaderStyle}"/>
                <Border Style="{StaticResource DiffValueStyle}" Background="#FADBD8">
                    <TextBlock x:Name="txtOldValue"
                               Text="{Binding OldValue, ElementName=diffControl}"
                               TextWrapping="Wrap"
                               FontSize="12"
                               Foreground="#C0392B"/>
                </Border>
            </StackPanel>

            <!-- Strzałka -->
            <TextBlock Grid.Row="0" Grid.Column="1"
                       Text="→"
                       FontSize="20"
                       Foreground="#95A5A6"
                       VerticalAlignment="Center"
                       Margin="15,15,15,0"/>

            <!-- Nowa wartość -->
            <StackPanel Grid.Row="0" Grid.Column="2">
                <TextBlock Text="Jest:" Style="{StaticResource DiffHeaderStyle}"/>
                <Border Style="{StaticResource DiffValueStyle}" Background="#D5F5E3">
                    <TextBlock x:Name="txtNewValue"
                               Text="{Binding NewValue, ElementName=diffControl}"
                               TextWrapping="Wrap"
                               FontSize="12"
                               Foreground="#27AE60"/>
                </Border>
            </StackPanel>

            <!-- Pole i czas zmiany -->
            <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3"
                        Orientation="Horizontal" Margin="0,8,0,0">
                <Border Background="#EBF5FB" CornerRadius="4" Padding="8,4" Margin="0,0,10,0">
                    <TextBlock FontSize="10" Foreground="#2980B9">
                        <Run Text="Pole: " FontWeight="SemiBold"/>
                        <Run Text="{Binding FieldName, ElementName=diffControl}"/>
                    </TextBlock>
                </Border>
                <Border Background="#F4ECF7" CornerRadius="4" Padding="8,4" Margin="0,0,10,0">
                    <TextBlock FontSize="10" Foreground="#8E44AD">
                        <Run Text="Zmienił: " FontWeight="SemiBold"/>
                        <Run Text="{Binding ChangedBy, ElementName=diffControl}"/>
                    </TextBlock>
                </Border>
                <Border Background="#FEF9E7" CornerRadius="4" Padding="8,4">
                    <TextBlock FontSize="10" Foreground="#B7950B">
                        <Run Text="Kiedy: " FontWeight="SemiBold"/>
                        <Run Text="{Binding ChangeDate, ElementName=diffControl, StringFormat='yyyy-MM-dd HH:mm'}"/>
                    </TextBlock>
                </Border>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
