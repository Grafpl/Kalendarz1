<Window x:Class="Kalendarz1.CRM.CallReminderAdminPanel"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Kalendarz1.CRM"
        Title="Panel administracyjny - Przypomnienia telefonów"
        Width="1000" Height="700"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow"
        Background="#0d1117"
        ResizeMode="CanResize"
        MinWidth="900" MinHeight="600">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles/GlassStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>

            <!-- Converter: show placeholder when text is empty -->
            <local:InverseLengthToVisibilityConverter x:Key="InverseLengthToVisibility"/>
        </ResourceDictionary>
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.3"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>

    <Border BorderThickness="0">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0d1117" Offset="0"/>
                <GradientStop Color="#161b22" Offset="0.5"/>
                <GradientStop Color="#0d1117" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>

        <Grid Margin="0">
            <!-- Decorative Background Blobs -->
            <Ellipse Width="400" Height="400" HorizontalAlignment="Right" VerticalAlignment="Top"
                     Margin="0,-100,-100,0" Opacity="0.04" IsHitTestVisible="False">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#58a6ff" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="100"/>
                </Ellipse.Effect>
            </Ellipse>

            <Ellipse Width="350" Height="350" HorizontalAlignment="Left" VerticalAlignment="Bottom"
                     Margin="-80,0,0,-80" Opacity="0.04" IsHitTestVisible="False">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#3fb950" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="100"/>
                </Ellipse.Effect>
            </Ellipse>

            <Grid Margin="32">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- ============================================ -->
                <!-- HEADER                                       -->
                <!-- ============================================ -->
                <Border Grid.Row="0" Background="#08FFFFFF" BorderBrush="#14FFFFFF"
                        BorderThickness="1" CornerRadius="16" Padding="28,20" Margin="0,0,0,24">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <!-- White gear icon using Path -->
                            <Grid Width="28" Height="28" VerticalAlignment="Center">
                                <Path Fill="White" Stretch="Uniform" Width="22" Height="22"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Data="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                            </Grid>
                            <TextBlock Text="Panel administracyjny" FontSize="26" FontWeight="Bold"
                                       Foreground="White" Margin="14,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock Text="Zarządzaj harmonogramem telefonów zespołu" FontSize="14"
                                   Foreground="#66FFFFFF" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- ============================================ -->
                <!-- STATS CARDS                                  -->
                <!-- ============================================ -->
                <Grid Grid.Row="1" Margin="0,0,0,24">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Stat 1 - Calls Today -->
                    <Border Grid.Column="0" Background="#18181f" BorderBrush="#252530"
                            BorderThickness="1" CornerRadius="16" Padding="24" Margin="0,0,10,0">
                        <StackPanel>
                            <Grid Width="40" Height="40" HorizontalAlignment="Left" Margin="0,0,0,12">
                                <Border CornerRadius="10" Background="#1A3fb950"/>
                                <Path Fill="#3fb950" Stretch="Uniform" Width="20" Height="20"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Data="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5C20.55,15.5 21,15.95 21,16.5V20C21,20.55 20.55,21 20,21C10.61,21 3,13.39 3,4C3,3.45 3.45,3 4,3H7.5C8.05,3 8.5,3.45 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"/>
                            </Grid>
                            <TextBlock x:Name="txtStatsDzis" Text="0" FontSize="32" FontWeight="Bold"
                                       Foreground="#3fb950"/>
                            <Border CornerRadius="10" Padding="8,3" HorizontalAlignment="Left" Margin="0,8,0,10">
                                <Border.Background>
                                    <SolidColorBrush Color="#263fb950"/>
                                </Border.Background>
                                <TextBlock x:Name="txtStatsCallsChange" Text="+0%" FontSize="12"
                                           Foreground="#3fb950" FontWeight="SemiBold"/>
                            </Border>
                            <TextBlock Text="Telefonów dziś" FontSize="14" Foreground="#66FFFFFF"/>
                        </StackPanel>
                    </Border>

                    <!-- Stat 2 - Active Agents -->
                    <Border Grid.Column="1" Background="#18181f" BorderBrush="#252530"
                            BorderThickness="1" CornerRadius="16" Padding="24" Margin="10,0">
                        <StackPanel>
                            <Grid Width="40" Height="40" HorizontalAlignment="Left" Margin="0,0,0,12">
                                <Border CornerRadius="10" Background="#1A58a6ff"/>
                                <Path Fill="#58a6ff" Stretch="Uniform" Width="22" Height="22"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Data="M16,11c1.66,0,2.99-1.34,2.99-3S17.66,5,16,5c-1.66,0-3,1.34-3,3S14.34,11,16,11z M8,11c1.66,0,2.99-1.34,2.99-3S9.66,5,8,5C6.34,5,5,6.34,5,8S6.34,11,8,11z M8,13c-2.33,0-7,1.17-7,3.5V19h14v-2.5C15,14.17,10.33,13,8,13z M16,13c-0.29,0-0.62,0.02-0.97,0.05 c1.16,0.84,1.97,1.97,1.97,3.45V19h6v-2.5C23,14.17,18.33,13,16,13z"/>
                            </Grid>
                            <TextBlock x:Name="txtStatsTelefony" Text="0/0" FontSize="32" FontWeight="Bold"
                                       Foreground="#58a6ff"/>
                            <Border CornerRadius="10" Padding="8,3" HorizontalAlignment="Left" Margin="0,8,0,10">
                                <Border.Background>
                                    <SolidColorBrush Color="#2658a6ff"/>
                                </Border.Background>
                                <TextBlock x:Name="txtStatsAgentsPercent" Text="0%" FontSize="12"
                                           Foreground="#58a6ff" FontWeight="SemiBold"/>
                            </Border>
                            <TextBlock Text="Aktywni agenci" FontSize="14" Foreground="#66FFFFFF"/>
                        </StackPanel>
                    </Border>

                    <!-- Stat 3 - Week -->
                    <Border Grid.Column="2" Background="#18181f" BorderBrush="#252530"
                            BorderThickness="1" CornerRadius="16" Padding="24" Margin="10,0">
                        <StackPanel>
                            <Grid Width="40" Height="40" HorizontalAlignment="Left" Margin="0,0,0,12">
                                <Border CornerRadius="10" Background="#1Af59e0b"/>
                                <Path Fill="#f59e0b" Stretch="Uniform" Width="20" Height="20"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Data="M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C19,3.9,20.1,3,19,3z M9,17H7v-7h2V17z M13,17h-2V7h2V17z M17,17h-2v-4h2V17z"/>
                            </Grid>
                            <TextBlock x:Name="txtStatsTydzien" Text="0" FontSize="32" FontWeight="Bold"
                                       Foreground="#f59e0b"/>
                            <Border CornerRadius="10" Padding="8,3" HorizontalAlignment="Left" Margin="0,8,0,10">
                                <Border.Background>
                                    <SolidColorBrush Color="#26f59e0b"/>
                                </Border.Background>
                                <TextBlock x:Name="txtStatsWeekChange" Text="+0%" FontSize="12"
                                           Foreground="#f59e0b" FontWeight="SemiBold"/>
                            </Border>
                            <TextBlock Text="Ten tydzień" FontSize="14" Foreground="#66FFFFFF"/>
                        </StackPanel>
                    </Border>

                    <!-- Stat 4 - Month -->
                    <Border Grid.Column="3" Background="#18181f" BorderBrush="#252530"
                            BorderThickness="1" CornerRadius="16" Padding="24" Margin="10,0,0,0">
                        <StackPanel>
                            <Grid Width="40" Height="40" HorizontalAlignment="Left" Margin="0,0,0,12">
                                <Border CornerRadius="10" Background="#1Aa78bfa"/>
                                <Path Fill="#a78bfa" Stretch="Uniform" Width="20" Height="20"
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Data="M16,6l2.29,2.29-4.88,4.88-4-4L2,16.59 3.41,18l6-6 4,4 6.3-6.29L22,12V6z"/>
                            </Grid>
                            <TextBlock x:Name="txtStatsMiesiac" Text="0" FontSize="32" FontWeight="Bold"
                                       Foreground="#a78bfa"/>
                            <Border CornerRadius="10" Padding="8,3" HorizontalAlignment="Left" Margin="0,8,0,10">
                                <Border.Background>
                                    <SolidColorBrush Color="#26a78bfa"/>
                                </Border.Background>
                                <TextBlock x:Name="txtStatsMonthChange" Text="+0%" FontSize="12"
                                           Foreground="#a78bfa" FontWeight="SemiBold"/>
                            </Border>
                            <TextBlock Text="Ten miesiąc" FontSize="14" Foreground="#66FFFFFF"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- ============================================ -->
                <!-- SEARCH BAR                                   -->
                <!-- ============================================ -->
                <Border Grid.Row="2" Background="#08FFFFFF" BorderBrush="#14FFFFFF"
                        BorderThickness="1" CornerRadius="12" Padding="16,10" Margin="0,0,0,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Path Fill="#66FFFFFF" Stretch="Uniform" Width="16" Height="16"
                              VerticalAlignment="Center" Margin="0,0,12,0"
                              Data="M15.5,14h-0.79l-0.28-0.27C15.41,12.59,16,11.11,16,9.5C16,5.91,13.09,3,9.5,3S3,5.91,3,9.5S5.91,16,9.5,16 c1.61,0,3.09-0.59,4.23-1.57l0.27,0.28v0.79l5,4.99L20.49,19L15.5,14z M9.5,14C7.01,14,5,11.99,5,9.5S7.01,5,9.5,5 S14,7.01,14,9.5S11.99,14,9.5,14z"/>
                        <TextBox x:Name="txtSearchHandlowiec" Grid.Column="1"
                                 Background="Transparent" BorderThickness="0"
                                 Foreground="White" FontSize="14" CaretBrush="White"
                                 VerticalAlignment="Center"
                                 TextChanged="TxtSearchHandlowiec_TextChanged">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="Tag" Value="Szukaj handlowca..."/>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                        <TextBlock Grid.Column="1" Text="Szukaj handlowca..." FontSize="14"
                                   Foreground="#44FFFFFF" VerticalAlignment="Center"
                                   IsHitTestVisible="False"
                                   Visibility="{Binding Text.Length, ElementName=txtSearchHandlowiec, Converter={StaticResource InverseLengthToVisibility}}"/>
                        <TextBlock x:Name="txtSearchCount" Grid.Column="2" Text="" FontSize="12"
                                   Foreground="#66FFFFFF" VerticalAlignment="Center" Margin="12,0,0,0"/>
                    </Grid>
                </Border>

                <!-- ============================================ -->
                <!-- MAIN TABLE                                   -->
                <!-- ============================================ -->
                <Border Grid.Row="3" Background="#0C0C12" BorderBrush="#1E1E2A"
                        BorderThickness="1" CornerRadius="16" ClipToBounds="True">
                    <DataGrid x:Name="dgHandlowcy" AutoGenerateColumns="False"
                              Background="Transparent" BorderThickness="0"
                              GridLinesVisibility="Horizontal"
                              HorizontalGridLinesBrush="#0EFFFFFF"
                              RowBackground="Transparent"
                              AlternatingRowBackground="Transparent"
                              HeadersVisibility="Column"
                              SelectionMode="Single"
                              SelectionUnit="FullRow"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              CanUserReorderColumns="False"
                              CanUserResizeRows="False"
                              RowHeight="68"
                              ColumnHeaderHeight="52"
                              Foreground="White"
                              FontSize="13"
                              HorizontalScrollBarVisibility="Disabled"
                              VerticalScrollBarVisibility="Auto">

                        <DataGrid.Resources>
                            <!-- Override default DataGrid scrollbar to dark -->
                            <Style TargetType="ScrollBar">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Width" Value="8"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ScrollBar">
                                            <Grid>
                                                <Track x:Name="PART_Track" IsDirectionReversed="True">
                                                    <Track.Thumb>
                                                        <Thumb>
                                                            <Thumb.Style>
                                                                <Style TargetType="Thumb">
                                                                    <Setter Property="Template">
                                                                        <Setter.Value>
                                                                            <ControlTemplate TargetType="Thumb">
                                                                                <Border Background="#3AFFFFFF" CornerRadius="4"/>
                                                                            </ControlTemplate>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Style>
                                                            </Thumb.Style>
                                                        </Thumb>
                                                    </Track.Thumb>
                                                </Track>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGrid.Resources>

                        <DataGrid.ColumnHeaderStyle>
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="Background" Value="#0A0A10"/>
                                <Setter Property="Foreground" Value="#8899AA"/>
                                <Setter Property="FontSize" Value="11"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                                <Setter Property="Padding" Value="20,14"/>
                                <Setter Property="BorderBrush" Value="#14FFFFFF"/>
                                <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="DataGridColumnHeader">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    Padding="{TemplateBinding Padding}">
                                                <TextBlock Text="{TemplateBinding Content}"
                                                           Foreground="{TemplateBinding Foreground}"
                                                           FontSize="{TemplateBinding FontSize}"
                                                           FontWeight="{TemplateBinding FontWeight}"
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGrid.ColumnHeaderStyle>

                        <DataGrid.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Padding" Value="20,0"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="DataGridCell">
                                            <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#1A58a6ff"/>
                                        <Setter Property="Foreground" Value="White"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.CellStyle>

                        <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Setter Property="Background" Value="Transparent"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#0CFFFFFF"/>
                                    </Trigger>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#1A58a6ff"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.RowStyle>

                        <DataGrid.Columns>
                            <!-- Enabled Checkbox -->
                            <DataGridTemplateColumn Header="AKTYWNY" Width="80">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged}"
                                                  HorizontalAlignment="Center" Style="{StaticResource GlassCheckBox}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Handlowiec Name with Avatar -->
                            <DataGridTemplateColumn Header="HANDLOWIEC" Width="*" MinWidth="250">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <!-- Avatar circle with image or initials fallback -->
                                            <Grid Width="42" Height="42">
                                                <!-- Fallback: gradient circle with initials -->
                                                <Border Width="42" Height="42" CornerRadius="21"
                                                        Visibility="{Binding HasNoAvatar, Converter={StaticResource BoolToVisibility}}">
                                                    <Border.Background>
                                                        <SolidColorBrush Color="{Binding AvatarColor}"/>
                                                    </Border.Background>
                                                    <TextBlock Text="{Binding Initials}" FontSize="15" FontWeight="Bold"
                                                               Foreground="White" HorizontalAlignment="Center"
                                                               VerticalAlignment="Center"/>
                                                </Border>
                                                <!-- Real avatar image -->
                                                <Border Width="42" Height="42" CornerRadius="21"
                                                        Visibility="{Binding HasAvatar, Converter={StaticResource BoolToVisibility}}">
                                                    <Border.Background>
                                                        <ImageBrush ImageSource="{Binding AvatarSource}" Stretch="UniformToFill"/>
                                                    </Border.Background>
                                                </Border>
                                                <!-- Online indicator dot -->
                                                <Ellipse Width="12" Height="12"
                                                         HorizontalAlignment="Right" VerticalAlignment="Bottom"
                                                         Stroke="#0C0C12" StrokeThickness="2"
                                                         Visibility="{Binding IsEnabled, Converter={StaticResource BoolToVisibility}}">
                                                    <Ellipse.Fill>
                                                        <SolidColorBrush Color="#3fb950"/>
                                                    </Ellipse.Fill>
                                                </Ellipse>
                                            </Grid>
                                            <StackPanel Margin="14,0,0,0" VerticalAlignment="Center">
                                                <TextBlock Text="{Binding UserName}" FontSize="14" FontWeight="SemiBold"
                                                           Foreground="White"/>
                                                <TextBlock Text="{Binding RoleName}" FontSize="11"
                                                           Foreground="#66FFFFFF" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Time 1 -->
                            <DataGridTemplateColumn Header="GODZINA 1" Width="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedValue="{Binding Time1String, UpdateSourceTrigger=PropertyChanged}"
                                                  ItemsSource="{Binding AvailableTimes}"
                                                  Style="{StaticResource GlassComboBox}"
                                                  Width="90"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Time 2 -->
                            <DataGridTemplateColumn Header="GODZINA 2" Width="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedValue="{Binding Time2String, UpdateSourceTrigger=PropertyChanged}"
                                                  ItemsSource="{Binding AvailableTimes}"
                                                  Style="{StaticResource GlassComboBox}"
                                                  Width="90"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Contacts Count -->
                            <DataGridTemplateColumn Header="KONTAKTÓW" Width="110">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <ComboBox SelectedValue="{Binding ContactsPerReminder, UpdateSourceTrigger=PropertyChanged}"
                                                  ItemsSource="{Binding AvailableCounts}"
                                                  Style="{StaticResource GlassComboBox}"
                                                  Width="70"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Only New -->
                            <DataGridTemplateColumn Header="TYLKO NOWI" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding ShowOnlyNewContacts, UpdateSourceTrigger=PropertyChanged}"
                                                  HorizontalAlignment="Center" Style="{StaticResource GlassCheckBox}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Only Assigned -->
                            <DataGridTemplateColumn Header="PRZYPISANI" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding ShowOnlyAssigned, UpdateSourceTrigger=PropertyChanged}"
                                                  HorizontalAlignment="Center" Style="{StaticResource GlassCheckBox}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Today Count with colored badge -->
                            <DataGridTemplateColumn Header="DZIŚ" Width="90">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border CornerRadius="12" Padding="12,6" HorizontalAlignment="Center"
                                                MinWidth="40">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="#1A3fb950"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding TodayCalls}" Value="0">
                                                            <Setter Property="Background" Value="#1Aef4444"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock Text="{Binding TodayCalls}" FontWeight="Bold"
                                                       FontSize="14" HorizontalAlignment="Center">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Foreground" Value="#3fb950"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding TodayCalls}" Value="0">
                                                                <Setter Property="Foreground" Value="#ef4444"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!-- Week Count with subtle badge -->
                            <DataGridTemplateColumn Header="TYDZIEŃ" Width="90">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border CornerRadius="12" Padding="12,6" HorizontalAlignment="Center"
                                                Background="#14FFFFFF" MinWidth="40">
                                            <TextBlock Text="{Binding WeekCalls}" FontWeight="SemiBold"
                                                       FontSize="14" Foreground="#B3FFFFFF"
                                                       HorizontalAlignment="Center"/>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Border>

                <!-- ============================================ -->
                <!-- BOTTOM PANEL                                 -->
                <!-- ============================================ -->
                <Grid Grid.Row="4" Margin="0,24,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="380"/>
                    </Grid.ColumnDefinitions>

                    <!-- Weekly Activity Chart -->
                    <Border Grid.Column="0" Background="#08FFFFFF" BorderBrush="#14FFFFFF"
                            BorderThickness="1" CornerRadius="16" Padding="24" Margin="0,0,16,0">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                <Path Fill="White" Stretch="Uniform" Width="16" Height="16"
                                      VerticalAlignment="Center" Margin="0,0,10,0"
                                      Data="M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C19,3.9,20.1,3,19,3z M9,17H7v-7h2V17z M13,17h-2V7h2V17z M17,17h-2v-4h2V17z"/>
                                <TextBlock Text="Aktywność tygodnia" FontSize="16" FontWeight="SemiBold"
                                           Foreground="White"/>
                            </StackPanel>

                            <Grid Height="140">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Monday -->
                                <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Margin="6,0">
                                    <Border x:Name="barMon" Height="40" CornerRadius="6,6,0,0" Background="#252530"/>
                                    <TextBlock Text="Pon" FontSize="12" Foreground="#66FFFFFF"
                                               HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </StackPanel>

                                <!-- Tuesday -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Margin="6,0">
                                    <Border x:Name="barTue" Height="60" CornerRadius="6,6,0,0" Background="#252530"/>
                                    <TextBlock Text="Wt" FontSize="12" Foreground="#66FFFFFF"
                                               HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </StackPanel>

                                <!-- Wednesday -->
                                <StackPanel Grid.Column="2" VerticalAlignment="Bottom" Margin="6,0">
                                    <Border x:Name="barWed" Height="50" CornerRadius="6,6,0,0" Background="#252530"/>
                                    <TextBlock Text="Śr" FontSize="12" Foreground="#66FFFFFF"
                                               HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </StackPanel>

                                <!-- Thursday (highlighted) -->
                                <StackPanel Grid.Column="3" VerticalAlignment="Bottom" Margin="6,0">
                                    <Border x:Name="barThu" Height="90" CornerRadius="6,6,0,0">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#3fb950" Offset="0"/>
                                                <GradientStop Color="#22c55e" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>
                                    <TextBlock Text="Czw" FontSize="12" Foreground="#3fb950" FontWeight="SemiBold"
                                               HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </StackPanel>

                                <!-- Friday -->
                                <StackPanel Grid.Column="4" VerticalAlignment="Bottom" Margin="6,0">
                                    <Border x:Name="barFri" Height="70" CornerRadius="6,6,0,0" Background="#252530"/>
                                    <TextBlock Text="Pt" FontSize="12" Foreground="#66FFFFFF"
                                               HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Quick Actions -->
                    <Border Grid.Column="1" Background="#08FFFFFF" BorderBrush="#14FFFFFF"
                            BorderThickness="1" CornerRadius="16" Padding="24">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                <Path Fill="#f59e0b" Stretch="Uniform" Width="16" Height="16"
                                      VerticalAlignment="Center" Margin="0,0,10,0"
                                      Data="M7,2v11h3v9l7-12h-4l4-8z"/>
                                <TextBlock Text="Szybkie akcje" FontSize="16" FontWeight="SemiBold"
                                           Foreground="White"/>
                            </StackPanel>

                            <Button Style="{StaticResource GlassButton}" Margin="0,0,0,10"
                                    Click="BtnTest_Click" HorizontalContentAlignment="Left" Padding="16,12">
                                <StackPanel Orientation="Horizontal">
                                    <Path Fill="#58a6ff" Stretch="Uniform" Width="14" Height="14"
                                          VerticalAlignment="Center" Margin="0,0,12,0"
                                          Data="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10,10-4.48,10-10S17.52,2,12,2zM10,17l-5-5,1.41-1.41L10,14.17l7.59-7.59L19,8l-9,9z"/>
                                    <TextBlock Text="Testuj przypomnienie" FontSize="14" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource GlassButton}" Margin="0,0,0,10"
                                    Click="BtnApplyToAll_Click" HorizontalContentAlignment="Left" Padding="16,12">
                                <StackPanel Orientation="Horizontal">
                                    <Path Fill="#a78bfa" Stretch="Uniform" Width="14" Height="14"
                                          VerticalAlignment="Center" Margin="0,0,12,0"
                                          Data="M16,1H4C2.9,1,2,1.9,2,3v14h2V3h12V1z M19,5H8C6.9,5,6,5.9,6,7v14c0,1.1,0.9,2,2,2h11c1.1,0,2-0.9,2-2V7C21,5.9,20.1,5,19,5z M19,21H8V7h11V21z"/>
                                    <TextBlock Text="Zastosuj do wszystkich" FontSize="14" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource GlassButton}" Margin="0,0,0,18"
                                    Click="BtnRefresh_Click" HorizontalContentAlignment="Left" Padding="16,12">
                                <StackPanel Orientation="Horizontal">
                                    <Path Fill="#3fb950" Stretch="Uniform" Width="14" Height="14"
                                          VerticalAlignment="Center" Margin="0,0,12,0"
                                          Data="M17.65,6.35C16.2,4.9,14.21,4,12,4c-4.42,0-7.99,3.58-7.99,8s3.57,8,7.99,8c3.73,0,6.84-2.55,7.73-6h-2.08c-0.82,2.33-3.04,4-5.65,4-3.31,0-6-2.69-6-6s2.69-6,6-6c1.66,0,3.14,0.69,4.22,1.78L13,11h7V4L17.65,6.35z"/>
                                    <TextBlock Text="Odśwież dane" FontSize="14" Foreground="White"/>
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource SuccessButton}" Click="BtnSave_Click" Padding="18,14">
                                <StackPanel Orientation="Horizontal">
                                    <Path Fill="White" Stretch="Uniform" Width="18" Height="18"
                                          VerticalAlignment="Center" Margin="0,0,12,0"
                                          Data="M17,3H5C3.89,3,3,3.9,3,5v14c0,1.1,0.89,2,2,2h14c1.1,0,2-0.9,2-2V7L17,3z M12,19c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3S13.66,19,12,19z M15,9H5V5h10V9z"/>
                                    <TextBlock Text="Zapisz wszystkie zmiany" FontSize="15" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>
