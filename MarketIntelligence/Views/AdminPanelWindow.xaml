<Window x:Class="Kalendarz1.MarketIntelligence.Views.AdminPanelWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Panel Administracyjny - MarketIntelligence"
        Height="800" Width="1000"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterOwner"
        FontFamily="Segoe UI"
        Background="#0B0F19">

    <Window.Resources>
        <!-- BACKGROUNDS -->
        <SolidColorBrush x:Key="BgDeep" Color="#0B0F19"/>
        <SolidColorBrush x:Key="BgCard" Color="#111827"/>
        <SolidColorBrush x:Key="BgCardHover" Color="#1A2332"/>
        <SolidColorBrush x:Key="BgSurface" Color="#1F2937"/>
        <SolidColorBrush x:Key="BgTertiary" Color="#334155"/>
        <SolidColorBrush x:Key="BgElevated" Color="#374151"/>
        <SolidColorBrush x:Key="BgBorder" Color="#2A3441"/>

        <!-- TEXT -->
        <SolidColorBrush x:Key="TextBright" Color="#F9FAFB"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#E5E7EB"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#9CA3AF"/>
        <SolidColorBrush x:Key="TextMuted" Color="#6B7280"/>

        <!-- ACCENT -->
        <SolidColorBrush x:Key="AccentBlue" Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentIndigo" Color="#6366F1"/>
        <SolidColorBrush x:Key="AccentIndigoLight" Color="#818CF8"/>
        <SolidColorBrush x:Key="AccentGreen" Color="#10B981"/>
        <SolidColorBrush x:Key="AccentRed" Color="#EF4444"/>

        <!-- Tab Control Style -->
        <Style TargetType="TabControl">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style TargetType="TabItem">
            <Setter Property="Background" Value="{StaticResource BgCard}"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Border" Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}"
                                BorderThickness="0,0,0,2" BorderBrush="Transparent"
                                Cursor="Hand">
                            <ContentPresenter x:Name="ContentSite"
                                              ContentSource="Header"
                                              HorizontalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Foreground" Value="{StaticResource TextBright}"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource AccentIndigo}"/>
                                <Setter TargetName="Border" Property="Background" Value="{StaticResource BgSurface}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{StaticResource BgCardHover}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource BgElevated}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BgBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="CaretBrush" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="{StaticResource AccentIndigo}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Button Style -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentIndigo}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBright}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="6" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource AccentIndigoLight}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource AccentBlue}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource BgElevated}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BgBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource BgTertiary}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DangerButton" TargetType="Button">
            <Setter Property="Background" Value="#7F1D1D"/>
            <Setter Property="Foreground" Value="#FCA5A5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource AccentRed}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- CheckBox Style -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal">
                            <Border x:Name="checkBorder" Width="18" Height="18"
                                    Background="{StaticResource BgElevated}"
                                    BorderBrush="{StaticResource BgBorder}"
                                    BorderThickness="1" CornerRadius="3"
                                    VerticalAlignment="Center">
                                <Path x:Name="checkMark" Data="M 3 9 L 7 13 L 15 5"
                                      Stroke="{StaticResource AccentGreen}"
                                      StrokeThickness="2" Visibility="Collapsed"
                                      Margin="1"/>
                            </Border>
                            <ContentPresenter Margin="8,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="checkBorder" Property="BorderBrush" Value="{StaticResource AccentGreen}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="checkBorder" Property="BorderBrush" Value="{StaticResource AccentIndigo}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Label Style -->
        <Style x:Key="FieldLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>

        <!-- Field Description Style - stały opis pod polem -->
        <Style x:Key="FieldDescription" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextMuted}"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Margin" Value="0,6,0,0"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="LineHeight" Value="16"/>
        </Style>

        <!-- Field Hint Style - krótka podpowiedź -->
        <Style x:Key="FieldHint" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#6B7280"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
        </Style>

        <!-- Section Header -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextBright}"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <!-- Card Border -->
        <Style x:Key="CardBorder" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource BgCard}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BgBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <!-- DataGrid Styles -->
        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="{StaticResource BgCard}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BgBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource BgBorder}"/>
            <Setter Property="RowBackground" Value="Transparent"/>
            <Setter Property="AlternatingRowBackground" Value="{StaticResource BgSurface}"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{StaticResource BgSurface}"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="BorderBrush" Value="{StaticResource BgBorder}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource BgTertiary}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="Transparent"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource BgTertiary}"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource BgCardHover}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <Border Grid.Row="0" Background="{StaticResource BgCard}"
                BorderBrush="{StaticResource BgBorder}" BorderThickness="0,0,0,1"
                Padding="25,15">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="PANEL ADMINISTRACYJNY" FontSize="18" FontWeight="Bold"
                               Foreground="{StaticResource TextBright}"/>
                    <TextBlock Text=" - MarketIntelligence" FontSize="18"
                               Foreground="{StaticResource TextMuted}" Margin="5,0,0,0"/>
                </StackPanel>
                <TextBlock x:Name="ConfigPathText" HorizontalAlignment="Right"
                           Foreground="{StaticResource TextMuted}" FontSize="11"
                           VerticalAlignment="Center" Cursor="Hand"
                           MouseLeftButtonUp="ConfigPathText_Click"
                           ToolTip="Kliknij aby otworzyc folder konfiguracji"/>
            </Grid>
        </Border>

        <!-- MAIN CONTENT - TAB CONTROL -->
        <TabControl Grid.Row="1" x:Name="MainTabControl" Margin="0">

            <!-- TAB 1: ZWIAD (Search Queries) -->
            <TabItem Header="ZWIAD" ToolTip="Frazy wyszukiwania - co system szuka w internecie">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="25,20">
                    <StackPanel>
                        <TextBlock Style="{StaticResource SectionHeader}"
                                   Text="Frazy wyszukiwania Brave Search"/>
                        <TextBlock Foreground="{StaticResource TextMuted}" FontSize="12" Margin="0,0,0,20"
                                   TextWrapping="Wrap"
                                   Text="Tutaj zarzadzasz frazami, ktore system wysyla do wyszukiwarki Brave. Kazda aktywna fraza generuje osobne wyszukiwanie. Zaznacz 'Quick' dla 5-7 najwazniejszych fraz do szybkiego poranka."/>

                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <!-- Legenda kolumn -->
                                <Border Background="{StaticResource BgSurface}" CornerRadius="4" Padding="12,8" Margin="0,0,0,10">
                                    <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" TextWrapping="Wrap">
                                        <Run FontWeight="SemiBold">Aktywna</Run><Run> = czy fraza jest uzywana | </Run>
                                        <Run FontWeight="SemiBold">Fraza</Run><Run> = tekst wysylany do wyszukiwarki | </Run>
                                        <Run FontWeight="SemiBold">Kategoria</Run><Run> = do jakiej zakladki trafia artykul | </Run>
                                        <Run FontWeight="SemiBold">Quick</Run><Run> = uzywana w trybie szybkim | </Run>
                                        <Run FontWeight="SemiBold">Priorytet</Run><Run> = nizszy = wazniejszy (1=HPAI, 60=Info)</Run>
                                    </TextBlock>
                                </Border>

                                <DataGrid x:Name="QueriesDataGrid"
                                          AutoGenerateColumns="False"
                                          CanUserAddRows="False"
                                          CanUserDeleteRows="False"
                                          Height="350"
                                          ToolTip="Kliknij w komorke aby edytowac. Dwuklik otwiera edycje tekstu.">
                                    <DataGrid.Columns>
                                        <DataGridCheckBoxColumn Header="Aktywna" Binding="{Binding IsActive}" Width="70"/>
                                        <DataGridTextColumn Header="Fraza wyszukiwania" Binding="{Binding Phrase}" Width="*"/>
                                        <DataGridComboBoxColumn Header="Kategoria" Width="120"
                                                                SelectedItemBinding="{Binding Category}">
                                            <DataGridComboBoxColumn.ElementStyle>
                                                <Style TargetType="ComboBox">
                                                    <Setter Property="IsReadOnly" Value="True"/>
                                                </Style>
                                            </DataGridComboBoxColumn.ElementStyle>
                                        </DataGridComboBoxColumn>
                                        <DataGridCheckBoxColumn Header="Quick" Binding="{Binding IsQuickMode}" Width="60"/>
                                        <DataGridTextColumn Header="Priorytet" Binding="{Binding Priority}" Width="70"/>
                                    </DataGrid.Columns>
                                </DataGrid>

                                <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                    <Button Content="+ Dodaj fraze" Style="{StaticResource SecondaryButton}"
                                            Click="AddQuery_Click"
                                            ToolTip="Dodaje nowa fraze wyszukiwania na koncu listy"/>
                                    <Button Content="Usun zaznaczona" Style="{StaticResource DangerButton}"
                                            Margin="10,0,0,0" Click="RemoveQuery_Click"
                                            ToolTip="Usuwa zaznaczony wiersz - NIEODWRACALNE"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- TAB 2: MOZG AI (Prompts) -->
            <TabItem Header="MOZG AI" ToolTip="Konfiguracja sztucznej inteligencji - jak AI analizuje artykuly">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="25,20">
                    <StackPanel>
                        <TextBlock Style="{StaticResource SectionHeader}"
                                   Text="Konfiguracja promptow AI"/>
                        <TextBlock Foreground="{StaticResource TextMuted}" FontSize="12" Margin="0,0,0,20" TextWrapping="Wrap"
                                   Text="Tutaj konfigurujesz JAK sztuczna inteligencja analizuje artykuly. Model wplywa na jakosc i koszt, temperatura na kreatywnosc, a prompty na styl odpowiedzi."/>

                        <!-- Model Settings -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Parametry modelu AI" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,15"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Model OpenAI"/>
                                        <ComboBox x:Name="ModelComboBox">
                                            <ComboBoxItem Content="gpt-4o" IsSelected="True"/>
                                            <ComboBoxItem Content="gpt-4o-mini"/>
                                            <ComboBoxItem Content="gpt-4-turbo"/>
                                        </ComboBox>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run FontWeight="SemiBold" Foreground="#10B981">gpt-4o</Run><Run> = najlepszy (~$2.50/1M tok)</Run><LineBreak/>
                                            <Run FontWeight="SemiBold">gpt-4o-mini</Run><Run> = tanszy (~$0.15/1M tok)</Run><LineBreak/>
                                            <Run FontWeight="SemiBold">gpt-4-turbo</Run><Run> = starszy, wolniejszy</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Max Tokens"/>
                                        <TextBox x:Name="MaxTokensTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Max dlugosc odpowiedzi AI.</Run><LineBreak/>
                                            <Run>1 token = ~4 znaki polskie</Run><LineBreak/>
                                            <Run>8000 tok = ~6000 slow</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 8000</Run><LineBreak/>
                                            <Run Foreground="#EF4444">Zbyt malo = obcieta analiza!</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Temperatura (0.0-1.0)"/>
                                        <TextBox x:Name="TemperatureTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Kontroluje 'kreatywnosc' AI:</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">0.0-0.3 = konkretny, faktograficzny</Run><LineBreak/>
                                            <Run>0.4-0.6 = zbalansowany</Run><LineBreak/>
                                            <Run>0.7-1.0 = kreatywny, zmienny</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 0.3</Run>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- System Prompt -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Style="{StaticResource FieldLabel}" Text="System Prompt (instrukcje dla AI)"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,10" TextWrapping="Wrap"
                                           Text="WAZNE: Jesli pole jest PUSTE - uzyty zostanie wbudowany Super-Prompt (zalecane). Wpisz wlasny tekst TYLKO jesli chcesz nadpisac domyslne zachowanie AI."/>
                                <TextBox x:Name="SystemPromptTextBox" Style="{StaticResource DarkTextBox}"
                                         AcceptsReturn="True" TextWrapping="Wrap" Height="150"
                                         VerticalScrollBarVisibility="Auto"
                                         ToolTip="System Prompt = 'osobowosc' AI.&#x0a;Okresla jak AI ma sie zachowywac, w jakim formacie odpowiadac.&#x0a;&#x0a;PUSTE POLE = uzycie wbudowanego Super-Prompt (ZALECANE)&#x0a;&#x0a;Wpisz wlasny tekst tylko jesli wiesz co robisz."/>
                                <TextBlock Foreground="#10B981" FontSize="10" Margin="0,4,0,0"
                                           Text="PUSTE = Super-Prompt (ekspercka analiza biznesowa)"/>
                            </StackPanel>
                        </Border>

                        <!-- Analysis Prompt Template -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Style="{StaticResource FieldLabel}" Text="Szablon Promptu Analizy"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,10"
                                           TextWrapping="Wrap"
                                           Text="Szablon wysylany do AI dla KAZDEGO artykulu. Uzywaj zmiennych w klamrach: {CompanyName}, {Location}, {BusinessContext}, {Source}, {Title}, {Content}"/>
                                <TextBox x:Name="AnalysisPromptTextBox" Style="{StaticResource DarkTextBox}"
                                         AcceptsReturn="True" TextWrapping="Wrap" Height="250"
                                         VerticalScrollBarVisibility="Auto"
                                         ToolTip="Zmienne do uzycia:&#x0a;{CompanyName} = nazwa firmy z zakladki KONTEKST&#x0a;{Location} = lokalizacja firmy&#x0a;{BusinessContext} = pelny kontekst biznesowy&#x0a;{Source} = zrodlo artykulu (np. portalspozywczy.pl)&#x0a;{Title} = tytul artykulu&#x0a;{Content} = pelna tresc artykulu"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- TAB 3: KONTEKST BIZNESOWY -->
            <TabItem Header="KONTEKST" ToolTip="Dane Twojej firmy - AI uzywa tych informacji do personalizacji analiz">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="25,20">
                    <StackPanel>
                        <TextBlock Style="{StaticResource SectionHeader}"
                                   Text="Kontekst biznesowy firmy"/>
                        <TextBlock Foreground="{StaticResource TextMuted}" FontSize="12" Margin="0,0,0,20" TextWrapping="Wrap"
                                   Text="Te dane sa uzywane przez AI do personalizacji analiz. Im dokladniej opiszesz firme, tym trafniejsze beda rekomendacje. AI bedzie wiedziec gdzie jestes, z kim konkurujesz i komu sprzedajesz."/>

                        <!-- Company Info -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Podstawowe dane firmy" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,15"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,15,15">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Nazwa firmy"/>
                                        <TextBox x:Name="CompanyNameTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Pelna nazwa firmy uzywana w analizach AI.</Run><LineBreak/>
                                            <Run>Np. 'Ubojnia Drobiu Piorkowscy'</Run><LineBreak/>
                                            <Run>AI pisze: 'dla firmy [nazwa]...'</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Row="0" Grid.Column="1" Margin="0,0,0,15">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Dyrektor/Prezes"/>
                                        <TextBox x:Name="DirectorTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Imie i nazwisko decydenta.</Run><LineBreak/>
                                            <Run>AI adresuje rekomendacje do tej osoby.</Run><LineBreak/>
                                            <Run>Np. 'Pani Dyrektor powinna...'</Run>
                                        </TextBlock>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Lokalizacja"/>
                                        <TextBox x:Name="LocationTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Pelny adres lub miejscowosc z kodem. Np. 'Koziolek, 95-060 Brzeziny, woj. lodzkie'</Run><LineBreak/>
                                            <Run FontWeight="SemiBold">Wazne dla:</Run><Run> alertow HPAI (ogniska w poblizu), kosztow logistyki, regionalnych regulacji</Run>
                                        </TextBlock>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Region (woj.)"/>
                                        <TextBox x:Name="RegionTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Wojewodztwo (bez 'woj.').</Run><LineBreak/>
                                            <Run>Np. 'lodzkie', 'mazowieckie'</Run><LineBreak/>
                                            <Run Foreground="#EF4444" FontWeight="SemiBold">KRYTYCZNE dla alertow HPAI!</Run><LineBreak/>
                                            <Run>AI priorytetowo traktuje ogniska w Twoim regionie.</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Row="2" Grid.Column="1">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Specjalizacja"/>
                                        <TextBox x:Name="SpecializationTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Glowny profil dzialalnosci.</Run><LineBreak/>
                                            <Run>Np. 'uboj i przetworstwo drobiu',</Run><LineBreak/>
                                            <Run>'hodowla brojlerow', 'przetwory'</Run><LineBreak/>
                                            <Run>Pomaga AI filtrowac nieistotne artykuly.</Run>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Financial Context -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Style="{StaticResource FieldLabel}" Text="Kontekst finansowy/operacyjny"/>
                                <TextBox x:Name="FinancialContextTextBox" Style="{StaticResource DarkTextBox}"
                                         AcceptsReturn="True" TextWrapping="Wrap" Height="120"
                                         VerticalScrollBarVisibility="Auto"/>
                                <TextBlock Style="{StaticResource FieldDescription}">
                                    <Run FontWeight="SemiBold">Opisz sytuacje finansowa firmy - AI uzyje tego do konkretnych rekomendacji.</Run><LineBreak/>
                                    <Run FontWeight="SemiBold">Co wpisac:</Run><LineBreak/>
                                    <Run>• Wolumeny: np. '50 ton tygodniowo'</Run><LineBreak/>
                                    <Run>• Marze: np. 'marza 8-12%'</Run><LineBreak/>
                                    <Run>• Problemy: np. 'strata 200k na HPAI w 2025'</Run><LineBreak/>
                                    <Run>• Plany: np. 'planowana modernizacja linii'</Run><LineBreak/>
                                    <Run>• Ograniczenia: np. 'kredyt 2M do splaty'</Run><LineBreak/>
                                    <Run Foreground="#10B981" FontWeight="SemiBold">Im wiecej szczegolow, tym konkretniejsze rekomendacje AI!</Run>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Competitors -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Style="{StaticResource FieldLabel}" Text="Konkurenci (jeden na linie)"/>
                                <TextBox x:Name="CompetitorsTextBox" Style="{StaticResource DarkTextBox}"
                                         AcceptsReturn="True" TextWrapping="Wrap" Height="100"
                                         VerticalScrollBarVisibility="Auto"/>
                                <TextBlock Style="{StaticResource FieldDescription}">
                                    <Run>Lista firm konkurencyjnych - AI sledzi newsy o nich.</Run><LineBreak/>
                                    <Run FontWeight="SemiBold">Wpisz jeden na linie:</Run><Run> SuperDrob, Cedrob, Indykpol, Animex...</Run><LineBreak/>
                                    <Run FontWeight="SemiBold">AI bedzie:</Run><LineBreak/>
                                    <Run>• Informowac o akwizycjach konkurentow</Run><LineBreak/>
                                    <Run>• Porownywac ich ruchy z Twoja strategia</Run><LineBreak/>
                                    <Run>• Ostrzegac o zagrozeniach</Run>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Main Clients -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Style="{StaticResource FieldLabel}" Text="Glowni klienci (jeden na linie)"/>
                                <TextBox x:Name="MainClientsTextBox" Style="{StaticResource DarkTextBox}"
                                         AcceptsReturn="True" TextWrapping="Wrap" Height="100"
                                         VerticalScrollBarVisibility="Auto"/>
                                <TextBlock Style="{StaticResource FieldDescription}">
                                    <Run>Lista glownych odbiorcow - AI sledzi ich sytuacje.</Run><LineBreak/>
                                    <Run FontWeight="SemiBold">Wpisz jeden na linie:</Run><Run> Biedronka, Dino, Lidl, Makro, Selgros...</Run><LineBreak/>
                                    <Run FontWeight="SemiBold">AI bedzie:</Run><LineBreak/>
                                    <Run>• Informowac o zmianach polityki sieci</Run><LineBreak/>
                                    <Run>• Sledic fuzje i przejecia</Run><LineBreak/>
                                    <Run>• Analizowac szanse na nowe kontrakty</Run>
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- TAB 4: SYSTEM -->
            <TabItem Header="SYSTEM" ToolTip="Ustawienia techniczne - klucze API, timeouty, limity. Dla zaawansowanych.">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="25,20">
                    <StackPanel>
                        <TextBlock Style="{StaticResource SectionHeader}"
                                   Text="Ustawienia systemowe"/>
                        <TextBlock Foreground="{StaticResource TextMuted}" FontSize="12" Margin="0,0,0,20" TextWrapping="Wrap"
                                   Text="Ustawienia techniczne systemu. Zmien TYLKO jesli wiesz co robisz. Bledne wartosci moga spowodowac bledy w dzialaniu aplikacji lub przekroczenie limitow API."/>

                        <!-- API Keys -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Klucze API" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,5"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,15" TextWrapping="Wrap"
                                           Text="Klucze sa wymagane do dzialania aplikacji. Bez nich system nie bedzie dzialal!"/>

                                <StackPanel Margin="0,0,0,15">
                                    <TextBlock Style="{StaticResource FieldLabel}" Text="OpenAI API Key"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="OpenAiKeyTextBox" Style="{StaticResource DarkTextBox}"
                                                 Grid.Column="0"/>
                                        <Button Content="Test" Style="{StaticResource SecondaryButton}"
                                                Grid.Column="1" Margin="10,0,0,0"
                                                Click="TestOpenAiKey_Click"/>
                                    </Grid>
                                    <TextBlock Style="{StaticResource FieldDescription}">
                                        <Run FontWeight="SemiBold">Klucz API z platform.openai.com</Run><LineBreak/>
                                        <Run>Zaczyna sie od 'sk-proj-...'</Run><LineBreak/>
                                        <Run FontWeight="SemiBold">Jak uzyskac:</Run><Run> 1) Zaloguj sie na platform.openai.com 2) Idz do API Keys 3) Utworz nowy klucz</Run><LineBreak/>
                                        <Run Foreground="#EF4444" FontWeight="SemiBold">UWAGA: Klucz = Twoje pieniadze! Nie udostepniaj nikomu.</Run>
                                    </TextBlock>
                                </StackPanel>

                                <StackPanel>
                                    <TextBlock Style="{StaticResource FieldLabel}" Text="Brave Search API Key"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="BraveKeyTextBox" Style="{StaticResource DarkTextBox}"
                                                 Grid.Column="0"/>
                                        <Button Content="Test" Style="{StaticResource SecondaryButton}"
                                                Grid.Column="1" Margin="10,0,0,0"
                                                Click="TestBraveKey_Click"/>
                                    </Grid>
                                    <TextBlock Style="{StaticResource FieldDescription}">
                                        <Run FontWeight="SemiBold">Klucz API z brave.com/search/api</Run><LineBreak/>
                                        <Run>Zaczyna sie od 'BSA...'</Run><LineBreak/>
                                        <Run FontWeight="SemiBold">Jak uzyskac:</Run><Run> 1) Zaloz konto na brave.com/search/api 2) Wybierz plan (darmowy = 2000 zapytan/mies) 3) Skopiuj klucz API</Run><LineBreak/>
                                        <Run Foreground="#10B981">Plan darmowy wystarcza na ~10 sesji dziennie.</Run>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Timeouts -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Timeouty (sekundy)" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,5"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,15" TextWrapping="Wrap"
                                           Text="Ile sekund czekac na odpowiedz przed przerwaniem. Zbyt krotkie = przerywanie dobrych zapytan. Zbyt dlugie = dlugie czekanie na bledy."/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="OpenAI (sekundy)"/>
                                        <TextBox x:Name="OpenAiTimeoutTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Czas oczekiwania na odpowiedz AI.</Run><LineBreak/>
                                            <Run>AI analizuje artykul 30-90 sek.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 120-300 sek</Run><LineBreak/>
                                            <Run Foreground="#EF4444">Zbyt krotki = przerwane analizy!</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Brave (sekundy)"/>
                                        <TextBox x:Name="BraveTimeoutTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Czas na wyniki wyszukiwania.</Run><LineBreak/>
                                            <Run>Brave odpowiada w 1-5 sek.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 30-60 sek</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Content Fetch (sek)"/>
                                        <TextBox x:Name="ContentTimeoutTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Czas na pobranie artykulu.</Run><LineBreak/>
                                            <Run>Strony laduja sie 2-10 sek.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 30-60 sek</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="3">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Puppeteer (sek)"/>
                                        <TextBox x:Name="PuppeteerTimeoutTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Przegladarka dla trudnych stron.</Run><LineBreak/>
                                            <Run>Wolniejszy niz HTTP.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 60-90 sek</Run>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Rate Limiting -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Rate Limiting (ograniczanie predkosci)" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,5"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,15" TextWrapping="Wrap"
                                           Text="KRYTYCZNE! Te ustawienia zapobiegaja bledom 429 (Rate Limit Exceeded). Zmniejsz opoznienia TYLKO jesli masz drogi plan API."/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Delay miedzy req. (ms)"/>
                                        <TextBox x:Name="DelayTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Przerwa miedzy zapytaniami AI.</Run><LineBreak/>
                                            <Run>1000ms = 1 sekunda</Run><LineBreak/>
                                            <Run FontWeight="SemiBold">OpenAI limit: 30,000 tok/min</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 3000ms (3 sek)</Run><LineBreak/>
                                            <Run Foreground="#EF4444" FontWeight="SemiBold">Min. 2000ms! Inaczej bledy 429!</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Max Retries (prob)"/>
                                        <TextBox x:Name="MaxRetriesTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Ile razy ponowic przy bledzie.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 3-5</Run><LineBreak/>
                                            <Run>Wiecej = dluzsza sesja</Run><LineBreak/>
                                            <Run>Mniej = szybsze porzucanie</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Retry Base Delay (sek)"/>
                                        <TextBox x:Name="RetryDelayTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Bazowy czas przed ponowna proba.</Run><LineBreak/>
                                            <Run>Podwajany: 5s, 10s, 20s...</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 5 sekund</Run><LineBreak/>
                                            <Run>Przy 429 system czeka dluzej.</Run>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Article Limits -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Limity artykulow" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,5"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,15" TextWrapping="Wrap"
                                           Text="Ile artykulow przetwarzac w jednej sesji. Wiecej = pelniejszy obraz, ale wiecej czasu i kosztow API."/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Max artykulow (pelny)"/>
                                        <TextBox x:Name="MaxArticlesTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Limit dla 'Pobierz z internetu'.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 25-35 artykulow</Run><LineBreak/>
                                            <Run>25 art. = ~15-20 min pracy</Run><LineBreak/>
                                            <Run>Koszt: ~$0.50-1.00 za sesje</Run><LineBreak/>
                                            <Run>Wiecej = pelniejszy briefing</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="0,0,15,0">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Tryb szybki (art.)"/>
                                        <TextBox x:Name="QuickModeTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Limit dla przycisku 'Szybki'.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 10 artykulow</Run><LineBreak/>
                                            <Run>10 art. = ~5-7 min pracy</Run><LineBreak/>
                                            <Run>Koszt: ~$0.20-0.30 za sesje</Run><LineBreak/>
                                            <Run>Uzywa fraz z 'Quick' w ZWIAD</Run>
                                        </TextBlock>
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Style="{StaticResource FieldLabel}" Text="Wynikow na query"/>
                                        <TextBox x:Name="ResultsPerQueryTextBox" Style="{StaticResource DarkTextBox}"/>
                                        <TextBlock Style="{StaticResource FieldDescription}">
                                            <Run>Ile wynikow z jednego Brave.</Run><LineBreak/>
                                            <Run Foreground="#10B981" FontWeight="SemiBold">Zalecane: 10 (max 20)</Run><LineBreak/>
                                            <Run>Wiecej = wiecej zrodel</Run><LineBreak/>
                                            <Run>System deduplikuje po URL.</Run>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Test "1 artykuł" -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Zapytanie testowe (1 artykul)" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,5"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,15" TextWrapping="Wrap"
                                           Text="Zapytanie uzywane w trybie '1 artykul'. Zmien aby przetestowac inne tematy."/>
                                <TextBlock Style="{StaticResource FieldLabel}" Text="Zapytanie testowe"/>
                                <TextBox x:Name="TestSearchQueryTextBox" Style="{StaticResource DarkTextBox}"/>
                                <TextBlock Style="{StaticResource FieldDescription}">
                                    <Run FontWeight="SemiBold">Wpisz dowolne zapytanie do Brave Search.</Run><LineBreak/>
                                    <Run>Przyklady:</Run><LineBreak/>
                                    <Run>• "HPAI Polska luty 2026"</Run><LineBreak/>
                                    <Run>• "Cedrob przejecie ADQ"</Run><LineBreak/>
                                    <Run>• "ceny kurczaka hurt Polska"</Run><LineBreak/>
                                    <Run>• "import drobiu Brazylia Mercosur"</Run><LineBreak/>
                                    <Run Foreground="#10B981">Zmiana dziala natychmiast po zapisaniu.</Run>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Features -->
                        <Border Style="{StaticResource CardBorder}">
                            <StackPanel>
                                <TextBlock Text="Funkcje dodatkowe" FontSize="14" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextBright}" Margin="0,0,0,5"/>
                                <TextBlock Foreground="{StaticResource TextMuted}" FontSize="11" Margin="0,0,0,15" TextWrapping="Wrap"
                                           Text="Wlacz lub wylacz dodatkowe funkcje systemu."/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,20,15">
                                        <CheckBox x:Name="PuppeteerEnabledCheckBox" Content="Puppeteer wlaczony"/>
                                        <TextBlock Style="{StaticResource FieldDescription}" Margin="26,4,0,0">
                                            <Run>Przegladarka bez interfejsu dla trudnych stron (JavaScript, blokady).</Run><LineBreak/>
                                            <Run Foreground="#10B981">WLACZ jesli widac 'brak tresci'</Run><LineBreak/>
                                            <Run Foreground="#EF4444">WYLACZ jesli problemy z pamiecia</Run>
                                        </TextBlock>
                                    </StackPanel>

                                    <StackPanel Grid.Row="0" Grid.Column="1" Margin="0,0,0,15">
                                        <CheckBox x:Name="CostTrackingCheckBox" Content="Sledzenie kosztow"/>
                                        <TextBlock Style="{StaticResource FieldDescription}" Margin="26,4,0,0">
                                            <Run>Liczy tokeny i szacuje koszty API.</Run><LineBreak/>
                                            <Run>Wyswietlane w podsumowaniu sesji.</Run><LineBreak/>
                                            <Run Foreground="#10B981">Zalecane: WLACZ</Run>
                                        </TextBlock>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,20,0">
                                        <CheckBox x:Name="FileLoggingCheckBox" Content="Logowanie do pliku"/>
                                        <TextBlock Style="{StaticResource FieldDescription}" Margin="26,4,0,0">
                                            <Run>Zapisuje logi do: Documents\PiorkaBriefing\Logs\</Run><LineBreak/>
                                            <Run Foreground="#10B981">WLACZ do debugowania problemow</Run><LineBreak/>
                                            <Run>WYLACZ aby oszczedzic miejsce</Run>
                                        </TextBlock>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1" Grid.Column="1">
                                        <CheckBox x:Name="OpenLogsFolderCheckBox" Content="Otworz folder logow po sesji"/>
                                        <TextBlock Style="{StaticResource FieldDescription}" Margin="26,4,0,0">
                                            <Run>Automatycznie otwiera folder z logami po briefingu.</Run><LineBreak/>
                                            <Run>WLACZ jesli analizujesz logi</Run><LineBreak/>
                                            <Run>WYLACZ normalnie</Run>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- FOOTER -->
        <Border Grid.Row="2" Background="{StaticResource BgCard}"
                BorderBrush="{StaticResource BgBorder}" BorderThickness="0,1,0,0"
                Padding="25,15">
            <Grid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button Content="Przywroc domyslne" Style="{StaticResource DangerButton}"
                            Click="ResetToDefaults_Click"
                            ToolTip="UWAGA! Resetuje WSZYSTKIE ustawienia do wartosci fabrycznych.&#x0a;Klucze API zostana zachowane.&#x0a;&#x0a;Uzyj jesli zepsules konfiguracje."/>
                    <Button Content="Otworz folder konfiguracji" Style="{StaticResource SecondaryButton}"
                            Margin="10,0,0,0" Click="OpenConfigFolder_Click"
                            ToolTip="Otwiera folder z plikiem konfiguracji JSON.&#x0a;Folder: Documents\PiorkaBriefing\config\&#x0a;&#x0a;Mozesz recznie edytowac plik app_settings.json"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Anuluj" Style="{StaticResource SecondaryButton}"
                            Click="Cancel_Click"
                            ToolTip="Zamyka panel BEZ zapisywania zmian.&#x0a;Wszystkie niezapisane zmiany zostana utracone."/>
                    <Button Content="Zapisz i zastosuj" Style="{StaticResource PrimaryButton}"
                            Margin="10,0,0,0" Click="SaveAndApply_Click"
                            ToolTip="Zapisuje wszystkie zmiany do pliku i zamyka panel.&#x0a;Zmiany zostana natychmiast zastosowane."/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
