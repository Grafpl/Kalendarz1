<Window x:Class="Kalendarz1.Zywiec.Kalendarz.WidokKalendarzaWPF"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Kalendarz Dostaw - Harmonogram Å»ywca"
        Height="1000" Width="1920"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="#ECEFF1"
        FontFamily="Segoe UI"
        Loaded="Window_Loaded">

    <Window.Resources>
        <!-- ==================== ANIMACJE ==================== -->

        <!-- Storyboard: Pulsowanie dla dzisiejszego nagÅ‚Ã³wka -->
        <Storyboard x:Key="TodayPulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="(Border.Effect).(DropShadowEffect.Opacity)"
                             From="0.3" To="0.8" Duration="0:0:1" AutoReverse="True"/>
            <DoubleAnimation Storyboard.TargetProperty="(Border.Effect).(DropShadowEffect.BlurRadius)"
                             From="5" To="15" Duration="0:0:1" AutoReverse="True"/>
        </Storyboard>

        <!-- Storyboard: Flash zielony przy sukcesie -->
        <Storyboard x:Key="SuccessFlashAnimation">
            <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                            To="#4CAF50" Duration="0:0:0.15"/>
            <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                            To="White" Duration="0:0:0.3" BeginTime="0:0:0.15"/>
        </Storyboard>

        <!-- Storyboard: Checkmark pojawienie -->
        <Storyboard x:Key="CheckmarkAppearAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                             From="0" To="1" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                             From="0" To="1" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             To="0" Duration="0:0:0.2" BeginTime="0:0:1"/>
        </Storyboard>

        <!-- Storyboard: Slide z prawej -->
        <Storyboard x:Key="SlideInFromRightAnimation">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                             From="50" To="0" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.3"/>
        </Storyboard>

        <!-- Storyboard: Fade In -->
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Storyboard: Fade Out -->
        <Storyboard x:Key="FadeOutAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             To="0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <QuadraticEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- ==================== ANIMACJE PRZEJÅšCIA TYGODNI ==================== -->

        <!-- Storyboard: WyjÅ›cie w lewo (nastÄ™pny tydzieÅ„) -->
        <Storyboard x:Key="WeekSlideOutLeftAnimation">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                             To="-120" Duration="0:0:0.35">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             To="0.3" Duration="0:0:0.35">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Storyboard: WejÅ›cie z prawej (nastÄ™pny tydzieÅ„) -->
        <Storyboard x:Key="WeekSlideInFromRightAnimation">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                             From="120" To="0" Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1" Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Storyboard: WyjÅ›cie w prawo (poprzedni tydzieÅ„) -->
        <Storyboard x:Key="WeekSlideOutRightAnimation">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                             To="120" Duration="0:0:0.35">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             To="0.3" Duration="0:0:0.35">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Storyboard: WejÅ›cie z lewej (poprzedni tydzieÅ„) -->
        <Storyboard x:Key="WeekSlideInFromLeftAnimation">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                             From="-120" To="0" Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1" Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- ==================== STYLE PRZYCISKÃ“W ==================== -->
        <Style x:Key="MainButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#2E7D32"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="#1B5E20"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4"
                                Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="2" Color="#000000" Opacity="0.4" BlurRadius="4"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#388E3C"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#2E7D32"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1B5E20"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#0D3D12"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#CCCCCC"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#AAAAAA"/>
                                <Setter TargetName="border" Property="Opacity" Value="0.7"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SmallButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="8,4"/>
        </Style>

        <Style x:Key="NavButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#1565C0"/>
            <Setter Property="BorderBrush" Value="#0D47A1"/>
            <Setter Property="Width" Value="35"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="0"/>
        </Style>

        <Style x:Key="ActionButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#1976D2"/>
            <Setter Property="BorderBrush" Value="#0D47A1"/>
        </Style>

        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#D32F2F"/>
            <Setter Property="BorderBrush" Value="#B71C1C"/>
        </Style>

        <Style x:Key="WarningButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#F57C00"/>
            <Setter Property="BorderBrush" Value="#E65100"/>
        </Style>

        <!-- ==================== STYLE CHECKBOX ==================== -->
        <Style x:Key="FilterCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Margin" Value="6,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <!-- ==================== STYLE TEXTBOX ==================== -->
        <Style x:Key="FormTextBoxStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="BorderBrush" Value="#BDC3C7"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Margin" Value="2"/>
        </Style>

        <Style x:Key="ReadOnlyTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource FormTextBoxStyle}">
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="Background" Value="#F5F5F5"/>
        </Style>

        <!-- ==================== STYLE COMBOBOX ==================== -->
        <Style x:Key="FormComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="BorderBrush" Value="#BDC3C7"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Margin" Value="2"/>
        </Style>

        <!-- ==================== STYLE LABEL ==================== -->
        <Style x:Key="FormLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#7F8C8D"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Margin" Value="2,4,2,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- ==================== STYLE DATAGRID ==================== -->
        <Style x:Key="DataGridHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#2C3E50"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="4,6"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="#1A252F"/>
            <Setter Property="BorderThickness" Value="0,0,1,0"/>
            <Setter Property="Cursor" Value="Arrow"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridColumnHeader">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DataGridCellStyle" TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border x:Name="cellBorder" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="8,0" SnapsToDevicePixels="True">
                            <ContentPresenter VerticalAlignment="Center" SnapsToDevicePixels="True"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E3F2FD"/>
                    <Setter Property="Foreground" Value="#1565C0"/>
                </Trigger>
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsSelected" Value="False"/>
                        <Condition Property="IsMouseOver" Value="True"/>
                    </MultiTrigger.Conditions>
                    <Setter Property="Background" Value="#F5F5F5"/>
                </MultiTrigger>
            </Style.Triggers>
        </Style>

        <!-- Styl wiersza DataGrid - prosty bez cieni -->
        <Style x:Key="AnimatedDataGridRowStyle" TargetType="DataGridRow">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
        </Style>

        <!-- Styl dla CheckBox w DataGrid - wiÄ™kszy i Å‚atwiejszy do klikniÄ™cia -->
        <Style x:Key="DataGridCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid Background="Transparent" Width="32" Height="28">
                            <Border x:Name="checkBorder" Width="18" Height="18"
                                    Background="White" BorderBrush="#90A4AE" BorderThickness="2"
                                    CornerRadius="3" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Path x:Name="checkMark" Data="M2,6 L6,10 L12,2"
                                      Stroke="#4CAF50" StrokeThickness="2.5"
                                      Visibility="Collapsed" Margin="1"
                                      StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="checkBorder" Property="BorderBrush" Value="#4CAF50"/>
                                <Setter TargetName="checkBorder" Property="Background" Value="#E8F5E9"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="checkBorder" Property="BorderBrush" Value="#66BB6A"/>
                                <Setter TargetName="checkBorder" Property="Background" Value="#F1F8E9"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="MainDataGridStyle" TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="CanUserReorderColumns" Value="False"/>
            <Setter Property="CanUserResizeRows" Value="False"/>
            <Setter Property="CanUserSortColumns" Value="False"/>
            <Setter Property="SelectionMode" Value="Extended"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#ECEFF1"/>
            <Setter Property="RowHeight" Value="26"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#CFD8DC"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="ColumnHeaderStyle" Value="{StaticResource DataGridHeaderStyle}"/>
            <Setter Property="CellStyle" Value="{StaticResource DataGridCellStyle}"/>
            <Setter Property="RowStyle" Value="{StaticResource AnimatedDataGridRowStyle}"/>
            <Setter Property="RowHeaderWidth" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <!-- WydajnoÅ›Ä‡ - wirtualizacja -->
            <Setter Property="VirtualizingPanel.IsVirtualizing" Value="True"/>
            <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>
            <Setter Property="EnableRowVirtualization" Value="True"/>
            <Setter Property="EnableColumnVirtualization" Value="True"/>
            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
        </Style>

        <Style x:Key="SmallDataGridStyle" TargetType="DataGrid" BasedOn="{StaticResource MainDataGridStyle}">
            <Setter Property="RowHeight" Value="26"/>
            <Setter Property="FontSize" Value="11"/>
        </Style>

        <!-- ==================== STYLE GRUPBOX ==================== -->
        <Style x:Key="ModernGroupBoxStyle" TargetType="GroupBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Padding" Value="6"/>
        </Style>

        <!-- ==================== KOLORY STATUSÃ“W ==================== -->
        <SolidColorBrush x:Key="StatusPotwierdzonyBrush" Color="#C8E6C9"/>
        <SolidColorBrush x:Key="StatusAnulowanyBrush" Color="#FFCDD2"/>
        <SolidColorBrush x:Key="StatusSprzedanyBrush" Color="#BBDEFB"/>
        <SolidColorBrush x:Key="StatusBKontrBrush" Color="#7E57C2"/>
        <SolidColorBrush x:Key="StatusBWolnyBrush" Color="#FFF9C4"/>
        <SolidColorBrush x:Key="StatusDoWykupieniaBrush" Color="#F5F5F5"/>
        <SolidColorBrush x:Key="HeaderDayBrush" Color="#37474F"/>

        <!-- ==================== STYL TOAST ==================== -->
        <Style x:Key="ToastBorderStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="20"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Bottom"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="3" Color="#000000" Opacity="0.3" BlurRadius="10"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ==================== STYL SEARCH BOX ==================== -->
        <Style x:Key="SearchBoxStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="BorderBrush" Value="#BDC3C7"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="ðŸ”" VerticalAlignment="Center" Margin="8,0,4,0" Foreground="#90A4AE"/>
                                <ScrollViewer Grid.Column="1" x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="500"/>
            <ColumnDefinition Width="580"/>
        </Grid.ColumnDefinitions>

        <!-- Toast Notification Overlay -->
        <Border x:Name="toastBorder" Style="{StaticResource ToastBorderStyle}"
                Background="#4CAF50" Visibility="Collapsed" Panel.ZIndex="1000"
                Grid.ColumnSpan="2">
            <TextBlock x:Name="txtToastMessage" Text="" Foreground="White" FontSize="13" FontWeight="SemiBold"/>
        </Border>

        <!-- ==================== LEWA STRONA - TABELE DOSTAW ==================== -->
        <Grid Grid.Column="0">
            <!-- TABELE DOSTAW -->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition x:Name="colNastepnyTydzien" Width="0"/>
                </Grid.ColumnDefinitions>

                <!-- TABELA GÅÃ“WNA (bieÅ¼Ä…cy tydzieÅ„) -->
                <Border Grid.Column="0" Margin="6,3,3,3" Background="White" CornerRadius="4" BorderBrush="#DDDDDD" BorderThickness="1" ClipToBounds="True">
                    <DataGrid x:Name="dgDostawy" Style="{StaticResource MainDataGridStyle}"
                                  RenderTransformOrigin="0.5,0.5"
                                  SelectionChanged="DgDostawy_SelectionChanged" MouseDoubleClick="DgDostawy_MouseDoubleClick" LoadingRow="DgDostawy_LoadingRow">
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="âž• Nowa dostawa na ten dzieÅ„" Click="MenuItemNowaDostawaZDaty_Click" FontWeight="SemiBold"/>
                                <Separator/>
                                <MenuItem Header="ðŸ“‹ Duplikuj dostawÄ™" Click="BtnDuplikuj_Click"/>
                                <MenuItem Header="â–² PrzesuÅ„ o dzieÅ„ w gÃ³rÄ™" Click="BtnDateUp_Click"/>
                                <MenuItem Header="â–¼ PrzesuÅ„ o dzieÅ„ w dÃ³Å‚" Click="BtnDateDown_Click"/>
                                <Separator/>
                                <MenuItem Header="ðŸ—‘ UsuÅ„ dostawÄ™" Click="BtnUsun_Click" Foreground="#E74C3C"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                        <DataGrid.RenderTransform>
                            <TranslateTransform X="0" Y="0"/>
                        </DataGrid.RenderTransform>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="LP" Binding="{Binding LP}" Visibility="Collapsed"/>
                                <DataGridTextColumn x:Name="colDostawcaHeader" Header="TydzieÅ„" Binding="{Binding DostawcaDisplay}" Width="100" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                            <Setter Property="ToolTip" Value="{Binding DostawcaDisplay}"/>
                                            <Setter Property="FontSize" Value="11"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="A" Binding="{Binding AutaDisplay}" Width="28" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="HorizontalAlignment" Value="Center"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTemplateColumn Header="Szt" Width="65" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Padding="2,0">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding PotwSztuki}" Value="True">
                                                                <Setter Property="Background" Value="#C8E6C9"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding IsHeaderRow}" Value="True">
                                                                <Setter Property="Background" Value="Transparent"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBlock Text="{Binding SztukiDekDisplay}" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Waga" Width="55" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Padding="2,0">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding PotwWaga}" Value="True">
                                                                <Setter Property="Background" Value="#C8E6C9"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding IsHeaderRow}" Value="True">
                                                                <Setter Property="Background" Value="Transparent"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBlock Text="{Binding WagaDekDisplay}" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Header="Ub" Binding="{Binding RoznicaDniDisplay}" Width="42" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock"><Setter Property="HorizontalAlignment" Value="Center"/></Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTemplateColumn Header="Typ" Width="45" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Padding="2,0" CornerRadius="2" Margin="1">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Setter Property="Background" Value="Transparent"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="wol.">
                                                                <Setter Property="Background" Value="#FFF59D"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="rol.">
                                                                <Setter Property="Background" Value="#2E7D32"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="mini.">
                                                                <Setter Property="Background" Value="#1976D2"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="Å‚Ä…cz.">
                                                                <Setter Property="Background" Value="#7B1FA2"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBlock Text="{Binding TypCenyDisplay}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="10">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Foreground" Value="Black"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding TypCenyDisplay}" Value="rol.">
                                                                    <Setter Property="Foreground" Value="White"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TypCenyDisplay}" Value="mini.">
                                                                    <Setter Property="Foreground" Value="White"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding TypCenyDisplay}" Value="Å‚Ä…cz.">
                                                                    <Setter Property="Foreground" Value="White"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn x:Name="colCena" Header="Cena" Binding="{Binding CenaDisplay}" Width="45" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock"><Setter Property="HorizontalAlignment" Value="Right"/></Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="KM" Binding="{Binding KmDisplay}" Width="35" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="HorizontalAlignment" Value="Right"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="Uwagi" Binding="{Binding UwagiDisplay}" Width="*" MinWidth="60" IsReadOnly="True">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                            <Setter Property="ToolTip" Value="{Binding Uwagi}"/>
                                            <Setter Property="FontSize" Value="10"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTemplateColumn x:Name="colCheckConfirm" Header="âœ“" Width="38" Visibility="Collapsed">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding IsConfirmed, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                      Style="{StaticResource DataGridCheckBoxStyle}"
                                                      Click="ChkConfirm_Click" Tag="{Binding LP}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn x:Name="colCheckWstawienie" Header="W" Width="38" Visibility="Collapsed">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding IsWstawienieConfirmed, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                      Style="{StaticResource DataGridCheckBoxStyle}"
                                                      Click="ChkWstawienie_Click" Tag="{Binding LpW}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Header="Status" Binding="{Binding Bufor}" Visibility="Collapsed"/>
                            </DataGrid.Columns>
                        </DataGrid>
                </Border>

                <!-- TABELA NASTÄ˜PNY TYDZIEÅƒ -->
                <Border x:Name="borderNastepnyTydzien" Grid.Column="1" Margin="3,3,3,3" Background="White" CornerRadius="4" BorderBrush="#3498DB" BorderThickness="2" Visibility="Collapsed" ClipToBounds="True">
                    <DataGrid x:Name="dgDostawyNastepny" Style="{StaticResource MainDataGridStyle}" LoadingRow="DgDostawy_LoadingRow"
                              RenderTransformOrigin="0.5,0.5"
                              SelectionChanged="DgDostawyNastepny_SelectionChanged" MouseDoubleClick="DgDostawy_MouseDoubleClick">
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="âž• Nowa dostawa na ten dzieÅ„" Click="MenuItemNowaDostawaZDaty_Click" FontWeight="SemiBold"/>
                                <Separator/>
                                <MenuItem Header="ðŸ“‹ Duplikuj dostawÄ™" Click="BtnDuplikuj_Click"/>
                                <MenuItem Header="â–² PrzesuÅ„ o dzieÅ„ w gÃ³rÄ™" Click="BtnDateUp_Click"/>
                                <MenuItem Header="â–¼ PrzesuÅ„ o dzieÅ„ w dÃ³Å‚" Click="BtnDateDown_Click"/>
                                <Separator/>
                                <MenuItem Header="ðŸ—‘ UsuÅ„ dostawÄ™" Click="BtnUsun_Click" Foreground="#E74C3C"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                        <DataGrid.RenderTransform>
                            <TranslateTransform X="0" Y="0"/>
                        </DataGrid.RenderTransform>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="LP" Binding="{Binding LP}" Visibility="Collapsed"/>
                            <DataGridTextColumn x:Name="colDostawcaHeader2" Header="TydzieÅ„" Binding="{Binding DostawcaDisplay}" Width="100" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                        <Setter Property="ToolTip" Value="{Binding DostawcaDisplay}"/>
                                        <Setter Property="FontSize" Value="11"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="A" Binding="{Binding AutaDisplay}" Width="28" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="HorizontalAlignment" Value="Center"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTemplateColumn Header="Szt" Width="65" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Padding="2,0">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding PotwSztuki}" Value="True">
                                                            <Setter Property="Background" Value="#C8E6C9"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsHeaderRow}" Value="True">
                                                            <Setter Property="Background" Value="Transparent"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock Text="{Binding SztukiDekDisplay}" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Waga" Width="55" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Padding="2,0">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding PotwWaga}" Value="True">
                                                            <Setter Property="Background" Value="#C8E6C9"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsHeaderRow}" Value="True">
                                                            <Setter Property="Background" Value="Transparent"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock Text="{Binding WagaDekDisplay}" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Ub" Binding="{Binding RoznicaDniDisplay}" Width="42" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock"><Setter Property="HorizontalAlignment" Value="Center"/></Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTemplateColumn Header="Typ" Width="45" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Padding="2,0" CornerRadius="2" Margin="1">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding TypCenyDisplay}" Value="wol.">
                                                            <Setter Property="Background" Value="#FFF59D"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding TypCenyDisplay}" Value="rol.">
                                                            <Setter Property="Background" Value="#2E7D32"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding TypCenyDisplay}" Value="mini.">
                                                            <Setter Property="Background" Value="#1976D2"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding TypCenyDisplay}" Value="Å‚Ä…cz.">
                                                            <Setter Property="Background" Value="#7B1FA2"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock Text="{Binding TypCenyDisplay}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="10">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Foreground" Value="Black"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="rol.">
                                                                <Setter Property="Foreground" Value="White"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="mini.">
                                                                <Setter Property="Foreground" Value="White"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding TypCenyDisplay}" Value="Å‚Ä…cz.">
                                                                <Setter Property="Foreground" Value="White"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Cena" Binding="{Binding CenaDisplay}" Width="45" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock"><Setter Property="HorizontalAlignment" Value="Right"/></Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="KM" Binding="{Binding KmDisplay}" Width="35" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock"><Setter Property="HorizontalAlignment" Value="Right"/></Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Uwagi" Binding="{Binding UwagiDisplay}" Width="*" MinWidth="60" IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                        <Setter Property="ToolTip" Value="{Binding Uwagi}"/>
                                        <Setter Property="FontSize" Value="10"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTemplateColumn x:Name="colCheckConfirm2" Header="âœ“" Width="38" Visibility="Collapsed">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsConfirmed, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                  Style="{StaticResource DataGridCheckBoxStyle}"
                                                  Click="ChkConfirm_Click" Tag="{Binding LP}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn x:Name="colCheckWstawienie2" Header="W" Width="38" Visibility="Collapsed">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsWstawienieConfirmed, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                  Style="{StaticResource DataGridCheckBoxStyle}"
                                                  Click="ChkWstawienie_Click" Tag="{Binding LpW}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Status" Binding="{Binding Bufor}" Visibility="Collapsed"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Border>
        </Grid>

        <!-- ==================== PRAWA STRONA - SZCZEGÃ“ÅY ==================== -->
        <Grid Grid.Column="1" Margin="3,6,6,6">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- PASEK GÃ“RNY: Ceny + TydzieÅ„ + Przyciski -->
            <Border Grid.Row="0" Background="White" CornerRadius="4" Padding="6" Margin="0,0,0,3">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- LEWA: Ceny rynkowe w jednej linii -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Border Background="#E8F5E9" CornerRadius="3" Padding="6,3" Margin="0,0,3,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Roln." FontSize="9" Foreground="#2E7D32" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtCenaRolnicza" Style="{StaticResource ReadOnlyTextBoxStyle}" FontSize="10" FontWeight="Bold" Foreground="#2E7D32" Background="Transparent" Padding="3,0" BorderThickness="0" Width="45"/>
                            </StackPanel>
                        </Border>
                        <Border Background="#E3F2FD" CornerRadius="3" Padding="6,3" Margin="0,0,3,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Min." FontSize="9" Foreground="#1565C0" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtCenaMinister" Style="{StaticResource ReadOnlyTextBoxStyle}" FontSize="10" FontWeight="Bold" Foreground="#1565C0" Background="Transparent" Padding="3,0" BorderThickness="0" Width="35"/>
                            </StackPanel>
                        </Border>
                        <Border Background="#F3E5F5" CornerRadius="3" Padding="6,3" Margin="0,0,3,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ÅÄ…cz." FontSize="9" Foreground="#7B1FA2" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtCenaLaczona" Style="{StaticResource ReadOnlyTextBoxStyle}" FontSize="10" FontWeight="Bold" Foreground="#7B1FA2" Background="Transparent" Padding="3,0" BorderThickness="0" Width="45"/>
                            </StackPanel>
                        </Border>
                        <Border Background="#FFF3E0" CornerRadius="3" Padding="6,3" Margin="0,0,6,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Tusz." FontSize="9" Foreground="#E65100" VerticalAlignment="Center"/>
                                <TextBox x:Name="txtCenaTuszki" Style="{StaticResource ReadOnlyTextBoxStyle}" FontSize="10" FontWeight="Bold" Foreground="#E65100" Background="Transparent" Padding="3,0" BorderThickness="0" Width="45"/>
                            </StackPanel>
                        </Border>

                        <!-- TydzieÅ„ badge -->
                        <Border CornerRadius="4" Padding="8,3" Margin="0,0,6,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#1565C0" Offset="0"/>
                                    <GradientStop Color="#1976D2" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="TYG." FontSize="9" Foreground="#B3E5FC" VerticalAlignment="Center" FontWeight="SemiBold"/>
                                <TextBlock x:Name="txtWeekNumber" Text="1" FontSize="16" FontWeight="Bold" Foreground="White" Margin="4,0,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- PRAWA: Przyciski akcji -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="â–²" Click="BtnDateUp_Click" ToolTip="DzieÅ„ w gÃ³rÄ™" Style="{StaticResource ActionButtonStyle}" Padding="8,4" Margin="1,0"/>
                        <Button Content="â–¼" Click="BtnDateDown_Click" ToolTip="DzieÅ„ w dÃ³Å‚" Style="{StaticResource ActionButtonStyle}" Padding="8,4" Margin="1,0"/>
                        <Button Content="âž• Nowa" Click="BtnNowaDostawa_Click" ToolTip="Nowa dostawa" Style="{StaticResource MainButtonStyle}" Padding="8,4" Margin="1,0"/>
                        <Button Content="ðŸ“‹" Click="BtnDuplikuj_Click" ToolTip="Duplikuj" Style="{StaticResource ActionButtonStyle}" Padding="8,4" Margin="1,0"/>
                        <Button Content="ðŸ”„" Click="BtnRefresh_Click" ToolTip="OdÅ›wieÅ¼" Style="{StaticResource ActionButtonStyle}" Padding="8,4" Margin="1,0"/>
                        <Button Content="ðŸ“œ" Click="BtnHistoriaZmian_Click" ToolTip="Historia" Style="{StaticResource ActionButtonStyle}" Padding="8,4" Margin="1,0"/>
                        <Button Content="ðŸ—‘" Click="BtnUsun_Click" ToolTip="UsuÅ„" Style="{StaticResource DangerButtonStyle}" Padding="8,4" Margin="1,0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- FILTRY I WYSZUKIWARKA -->
            <Border Grid.Row="1" Background="White" CornerRadius="4" Padding="6" Margin="0,0,0,3">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Filtry -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Filtry:" FontWeight="SemiBold" Foreground="#2C3E50" VerticalAlignment="Center" Margin="0,0,4,0" FontSize="9"/>
                        <CheckBox x:Name="chkAnulowane" Content="Anul." Style="{StaticResource FilterCheckBoxStyle}" Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                        <CheckBox x:Name="chkSprzedane" Content="Sprz." Style="{StaticResource FilterCheckBoxStyle}" Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                        <CheckBox x:Name="chkDoWykupienia" Content="DoWyk." IsChecked="True" Style="{StaticResource FilterCheckBoxStyle}" Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                        <CheckBox x:Name="chkPokazCeny" Content="Ceny" IsChecked="True" Style="{StaticResource FilterCheckBoxStyle}" Checked="Filter_Changed" Unchecked="Filter_Changed"/>
                        <CheckBox x:Name="chkPokazCheckboxy" Content="âœ“/W" Style="{StaticResource FilterCheckBoxStyle}" Checked="ChkPokazCheckboxy_Changed" Unchecked="ChkPokazCheckboxy_Changed"/>
                        <CheckBox x:Name="chkNastepnyTydzien" Content="+Nast.tyg" IsChecked="True" Style="{StaticResource FilterCheckBoxStyle}" Foreground="#3498DB" FontWeight="SemiBold" Checked="ChkNastepnyTydzien_Changed" Unchecked="ChkNastepnyTydzien_Changed"/>
                    </StackPanel>

                    <!-- Wyszukiwarka -->
                    <TextBox x:Name="txtSearch" Grid.Column="1" Style="{StaticResource SearchBoxStyle}" ToolTip="Szukaj hodowcy (Ctrl+F)" TextChanged="TxtSearch_TextChanged" Margin="8,0"/>

                    <!-- Info -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <TextBlock x:Name="txtRefreshCountdown" Text="10:00" Foreground="#7F8C8D" FontSize="9" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtUserName" Text="-" FontWeight="SemiBold" Foreground="#2C3E50" VerticalAlignment="Center" FontSize="9" Margin="6,0,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- KALENDARZ -->
            <Border Grid.Row="2" Background="White" CornerRadius="4" Padding="4" Margin="0,0,0,3">
                <StackPanel>
                    <Calendar x:Name="calendarMain" HorizontalAlignment="Center" SelectedDatesChanged="CalendarMain_SelectedDatesChanged"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,4,0,0">
                        <Button Content="â—€" Style="{StaticResource NavButtonStyle}" Click="BtnPreviousWeek_Click" Width="40" Margin="2,0" ToolTip="Poprzedni tydzieÅ„"/>
                        <Button Content="DziÅ›" Style="{StaticResource MainButtonStyle}" Click="BtnToday_Click" Width="60" Margin="2,0"/>
                        <Button Content="â–¶" Style="{StaticResource NavButtonStyle}" Click="BtnNextWeek_Click" Width="40" Margin="2,0" ToolTip="NastÄ™pny tydzieÅ„"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- PANEL SZCZEGÃ“ÅÃ“W - TABCONTROL -->
            <Border Grid.Row="3" Background="White" CornerRadius="4" Margin="0,0,0,3">
                <TabControl x:Name="tabSzczegoly" FontSize="10">
                    <!-- TAB: KARTA (Dostawa + Transport + Wstawienia + Notatki) -->
                    <TabItem Header="Karta">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="4">
                                <!-- SEKCJA: DOSTAWA -->
                                <Border Background="#E3F2FD" CornerRadius="4" Padding="4" Margin="0,0,0,4">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“¦ DOSTAWA" FontWeight="Bold" FontSize="10" Foreground="#1565C0" Margin="0,0,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="45"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="24"/>
                                                <RowDefinition Height="24"/>
                                            </Grid.RowDefinitions>

                                            <!-- Wiersz 1: Waga, Szt/szuf, Sztuki, Auta -->
                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Waga:" VerticalAlignment="Center" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBox x:Name="txtWagaDek" Grid.Row="0" Grid.Column="1" Margin="1" FontSize="9" Padding="2" Background="#BBDEFB"/>

                                            <TextBlock Grid.Row="0" Grid.Column="2" Text="Szt/szuf:" VerticalAlignment="Center" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBox x:Name="txtSztNaSzuflade" Grid.Row="0" Grid.Column="3" Margin="1" FontSize="9" Padding="2" Background="#BBDEFB"/>

                                            <TextBlock Grid.Row="0" Grid.Column="4" Text="Sztuki:" VerticalAlignment="Center" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBox x:Name="txtSztuki" Grid.Row="0" Grid.Column="5" Margin="1" FontSize="9" Padding="2" Background="#BBDEFB"/>

                                            <TextBlock Grid.Row="0" Grid.Column="6" Text="Auta:" VerticalAlignment="Center" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBox x:Name="txtAuta" Grid.Row="0" Grid.Column="7" Margin="1" FontSize="9" Padding="2" Background="#BBDEFB"/>

                                            <!-- Wiersz 2: Cena, Data, Status, Typ ceny -->
                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Cena:" VerticalAlignment="Center" FontSize="9" FontWeight="SemiBold"/>
                                            <TextBox x:Name="txtCena" Grid.Row="1" Grid.Column="1" Margin="1" FontSize="9" Padding="2" Background="#BBDEFB"/>

                                            <TextBlock Grid.Row="1" Grid.Column="2" Text="Data:" VerticalAlignment="Center" FontSize="9"/>
                                            <DatePicker x:Name="dpData" Grid.Row="1" Grid.Column="3" Margin="1" FontSize="9" Padding="2"/>

                                            <TextBlock Grid.Row="1" Grid.Column="4" Text="Status:" VerticalAlignment="Center" FontSize="9"/>
                                            <ComboBox x:Name="cmbStatus" Grid.Row="1" Grid.Column="5" Margin="1" FontSize="9"/>

                                            <TextBlock Grid.Row="1" Grid.Column="6" Text="Typ ceny:" VerticalAlignment="Center" FontSize="9"/>
                                            <ComboBox x:Name="cmbTypCeny" Grid.Row="1" Grid.Column="7" Margin="1" FontSize="9"/>
                                        </Grid>
                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                            <TextBlock Text="Typ umowy:" VerticalAlignment="Center" FontSize="9" Margin="0,0,4,0"/>
                                            <ComboBox x:Name="cmbTypUmowy" Width="80" FontSize="9" Margin="0,0,6,0"/>
                                            <TextBlock Text="Dodatek:" VerticalAlignment="Center" FontSize="9" Margin="0,0,4,0"/>
                                            <TextBox x:Name="txtDodatek" Width="50" FontSize="9" Padding="2" Margin="0,0,6,0"/>
                                            <CheckBox x:Name="chkPotwWaga" Content="âœ“Waga" FontSize="9" VerticalAlignment="Center" Margin="0,0,2,0"/>
                                            <TextBlock x:Name="txtKtoWaga" FontSize="8" Foreground="#757575" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                            <CheckBox x:Name="chkPotwSztuki" Content="âœ“Sztuki" FontSize="9" VerticalAlignment="Center" Margin="0,0,2,0"/>
                                            <TextBlock x:Name="txtKtoSztuki" FontSize="8" Foreground="#757575" VerticalAlignment="Center"/>
                                            <Button Content="ðŸ’¾ Zapisz" Style="{StaticResource MainButtonStyle}" Click="BtnZapiszDostawe_Click" Padding="8,2" Margin="8,0,0,0" FontSize="9"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- SEKCJA: NOTATKI -->
                                <Border Background="#E8F5E9" CornerRadius="4" Padding="4" Margin="0,0,0,4">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ“ NOTATKI" FontWeight="Bold" FontSize="10" Foreground="#2E7D32" Margin="0,0,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox x:Name="txtNowaNotatkKarta" Grid.Column="0" FontSize="9" Padding="4" Height="28" VerticalContentAlignment="Center" ToolTip="Wpisz nowÄ… notatkÄ™"/>
                                            <Button Grid.Column="1" Content="âž•" Style="{StaticResource MainButtonStyle}" Click="BtnDodajNotatkeKarta_Click" Width="30" Margin="4,0,0,0" Padding="2" FontSize="12"/>
                                        </Grid>
                                        <DataGrid x:Name="dgNotatkiKarta" Style="{StaticResource SmallDataGridStyle}" Margin="0,4,0,0" MaxHeight="130" FontSize="9">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Data" Binding="{Binding DataUtworzenia, StringFormat=MM-dd HH:mm}" Width="75"/>
                                                <DataGridTextColumn Header="Kto" Binding="{Binding KtoDodal}" Width="50"/>
                                                <DataGridTextColumn Header="TreÅ›Ä‡" Binding="{Binding Tresc}" Width="*"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </StackPanel>
                                </Border>

                                <!-- SEKCJA: TRANSPORT -->
                                <Border Background="#FFF3E0" CornerRadius="4" Padding="6" Margin="0,0,0,4">
                                    <StackPanel>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="ðŸš› TRANSPORT" FontWeight="Bold" FontSize="10" Foreground="#E65100"/>
                                            <Button Grid.Column="1" Content="ðŸ“‹ Wklej" Style="{StaticResource ActionButtonStyle}" Click="BtnWklejObliczenia_Click" FontSize="9" Padding="8,2" Height="22"/>
                                        </Grid>

                                        <!-- Obliczenia transportu -->
                                        <Border Background="#FFECB3" CornerRadius="3" Padding="6" Margin="0,6,0,0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Szt/szuflada" FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtSztNaSzufladeCalc" Grid.Row="1" Grid.Column="0" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" TextChanged="TxtSztNaSzufladeCalc_TextChanged" Background="White"/>

                                                <TextBlock Grid.Row="0" Grid.Column="1" Text="Wyliczone" FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtWyliczone" Grid.Row="1" Grid.Column="1" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" IsReadOnly="True" Background="#FFF8E1" FontWeight="SemiBold"/>

                                                <TextBlock Grid.Row="0" Grid.Column="2" Text="Auta" FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtObliczoneAuta" Grid.Row="1" Grid.Column="2" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" TextChanged="TxtObliczoneAuta_TextChanged" Background="White"/>

                                                <TextBlock Grid.Row="0" Grid.Column="3" Text="Obl. sztuki" FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtObliczoneSztuki" Grid.Row="1" Grid.Column="3" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" IsReadOnly="True" Background="#FFF8E1" FontWeight="SemiBold"/>
                                            </Grid>
                                        </Border>

                                        <!-- Waga transportu -->
                                        <Border Background="#FFE0B2" CornerRadius="3" Padding="6" Margin="0,4,0,0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="1.2*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="KG/skrzynka" FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtKGwSkrzynce" Grid.Row="1" Grid.Column="0" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" TextChanged="TxtKGwSkrzynce_TextChanged" Background="White"/>

                                                <TextBlock Grid.Row="0" Grid.Column="1" Text="KG skrz." FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtKGwSkrzynekWAucie" Grid.Row="1" Grid.Column="1" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" IsReadOnly="True" Background="#FFF8E1"/>

                                                <CheckBox x:Name="chkPaleciak" Grid.Row="0" Grid.RowSpan="2" Grid.Column="2" Content="Paleciak" FontSize="9" VerticalAlignment="Center" Margin="6,0" Checked="ChkPaleciak_Changed" Unchecked="ChkPaleciak_Changed"/>

                                                <TextBlock Grid.Row="0" Grid.Column="3" Text="KG palec." FontSize="8" Foreground="#5D4037" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtKGwPaleciak" Grid.Row="1" Grid.Column="3" Margin="2" FontSize="10" Padding="4,2" TextAlignment="Center" Background="White"/>

                                                <TextBlock Grid.Row="0" Grid.Column="4" Text="SUMA KG" FontSize="8" Foreground="#BF360C" FontWeight="Bold" HorizontalAlignment="Center"/>
                                                <TextBox x:Name="txtKGSuma" Grid.Row="1" Grid.Column="4" Margin="2" FontSize="11" Padding="4,2" TextAlignment="Center" IsReadOnly="True" Background="#C8E6C9" FontWeight="Bold" Foreground="#1B5E20"/>
                                            </Grid>
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <!-- SEKCJA: WSTAWIENIA -->
                                <Border Background="#F3E5F5" CornerRadius="4" Padding="4">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ£ WSTAWIENIA" FontWeight="Bold" FontSize="10" Foreground="#7B1FA2" Margin="0,0,0,4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="60"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="70"/>
                                                <ColumnDefinition Width="70"/>
                                                <ColumnDefinition Width="70"/>
                                                <ColumnDefinition Width="70"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Grid.Column="0" Text="Nr wstaw.:" VerticalAlignment="Center" FontSize="9"/>
                                            <ComboBox x:Name="cmbLpWstawienia" Grid.Column="1" Margin="1" FontSize="9" SelectionChanged="CmbLpWstawienia_SelectionChanged"/>

                                            <TextBlock Grid.Column="2" Text="Data:" VerticalAlignment="Center" FontSize="9" Margin="4,0,0,0"/>
                                            <TextBox x:Name="txtDataWstawienia" Grid.Column="3" Margin="1" FontSize="9" Padding="2" IsReadOnly="True" Background="#F5F5F5"/>

                                            <TextBlock Grid.Column="4" Text="IloÅ›Ä‡:" VerticalAlignment="Center" FontSize="9" Margin="4,0,0,0"/>
                                            <TextBox x:Name="txtSztukiWstawienia" Grid.Column="5" Margin="1" FontSize="9" Padding="2" IsReadOnly="True" Background="#F5F5F5"/>
                                        </Grid>
                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                            <TextBlock Text="Doba:" VerticalAlignment="Center" FontSize="9" Margin="0,0,4,0"/>
                                            <TextBox x:Name="txtObecnaDoba" Width="40" Margin="0,0,8,0" FontSize="9" Padding="2" IsReadOnly="True" Background="#F5F5F5"/>
                                            <TextBlock Text="PozostaÅ‚o:" VerticalAlignment="Center" FontSize="9" FontWeight="SemiBold" Margin="0,0,4,0"/>
                                            <TextBlock x:Name="txtSztukiPozostale" FontWeight="Bold" VerticalAlignment="Center" FontSize="10" Foreground="#7B1FA2"/>
                                        </StackPanel>
                                        <DataGrid x:Name="dgWstawienia" Style="{StaticResource SmallDataGridStyle}" Margin="0,4,0,0" MaxHeight="120" FontSize="9">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Data" Binding="{Binding DataOdbioru, StringFormat=MM-dd ddd}" Width="70"/>
                                                <DataGridTextColumn Header="A" Binding="{Binding Auta}" Width="25"/>
                                                <DataGridTextColumn Header="Sztuki" Binding="{Binding SztukiDekDisplay}" Width="55"/>
                                                <DataGridTextColumn Header="Waga" Binding="{Binding WagaDek}" Width="45"/>
                                                <DataGridTextColumn Header="Status" Binding="{Binding Bufor}" Width="*"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- TAB: HODOWCA -->
                    <TabItem Header="Hodowca">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="8">
                                <GroupBox Header="Dane hodowcy" Style="{StaticResource ModernGroupBoxStyle}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Dostawca:" Style="{StaticResource FormLabelStyle}"/>
                                        <ComboBox x:Name="cmbDostawca" Grid.Row="0" Grid.Column="1" Style="{StaticResource FormComboBoxStyle}" SelectionChanged="CmbDostawca_SelectionChanged"/>

                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Adres:" Style="{StaticResource FormLabelStyle}"/>
                                        <TextBox x:Name="txtUlicaH" Grid.Row="1" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Kod/Miasto:" Style="{StaticResource FormLabelStyle}"/>
                                        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                                            <TextBox x:Name="txtKodPocztowyH" Style="{StaticResource FormTextBoxStyle}" Width="60"/>
                                            <TextBox x:Name="txtMiejscH" Style="{StaticResource FormTextBoxStyle}" Width="120"/>
                                        </StackPanel>

                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="KM:" Style="{StaticResource FormLabelStyle}"/>
                                        <TextBox x:Name="txtKmH" Grid.Row="3" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}" Width="60" HorizontalAlignment="Left"/>

                                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Email:" Style="{StaticResource FormLabelStyle}"/>
                                        <TextBox x:Name="txtEmail" Grid.Row="4" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>
                                    </Grid>
                                </GroupBox>

                                <GroupBox Header="Kontakt" Style="{StaticResource ModernGroupBoxStyle}" Margin="0,4,0,0">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBox x:Name="txtTel1" Grid.Row="0" Grid.Column="0" Style="{StaticResource FormTextBoxStyle}" />
                                        <TextBox x:Name="txtInfo1" Grid.Row="0" Grid.Column="1" Style="{StaticResource ReadOnlyTextBoxStyle}"/>

                                        <TextBox x:Name="txtTel2" Grid.Row="1" Grid.Column="0" Style="{StaticResource FormTextBoxStyle}"/>
                                        <TextBox x:Name="txtInfo2" Grid.Row="1" Grid.Column="1" Style="{StaticResource ReadOnlyTextBoxStyle}"/>

                                        <TextBox x:Name="txtTel3" Grid.Row="2" Grid.Column="0" Style="{StaticResource FormTextBoxStyle}"/>
                                        <TextBox x:Name="txtInfo3" Grid.Row="2" Grid.Column="1" Style="{StaticResource ReadOnlyTextBoxStyle}"/>
                                    </Grid>
                                </GroupBox>

                                <GroupBox Header="OsobowoÅ›Ä‡" Style="{StaticResource ModernGroupBoxStyle}" Margin="0,4,0,0">
                                    <StackPanel Orientation="Horizontal">
                                        <ComboBox x:Name="cmbOsobowosc1" Style="{StaticResource FormComboBoxStyle}" Width="100"/>
                                        <ComboBox x:Name="cmbOsobowosc2" Style="{StaticResource FormComboBoxStyle}" Width="100" Margin="4,0,0,0"/>
                                    </StackPanel>
                                </GroupBox>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0">
                                    <Button Content="ðŸ“ Mapa" Style="{StaticResource ActionButtonStyle}" Click="BtnMapa_Click"/>
                                    <Button Content="ðŸ“± SMS" Style="{StaticResource WarningButtonStyle}" Click="BtnSMS_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- TAB: NOTATKI -->
                    <TabItem Header="Notatki">
                        <Grid Margin="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <GroupBox Grid.Row="0" Header="Nowa notatka" Style="{StaticResource ModernGroupBoxStyle}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="txtNowaNotatka" Grid.Column="0" Style="{StaticResource FormTextBoxStyle}" Height="50" TextWrapping="Wrap" AcceptsReturn="True"/>
                                    <Button Grid.Column="1" Content="âž•" Style="{StaticResource MainButtonStyle}" Click="BtnDodajNotatke_Click" Width="40" VerticalAlignment="Stretch" Margin="4,2,2,2"/>
                                </Grid>
                            </GroupBox>

                            <DataGrid x:Name="dgNotatki" Grid.Row="1" Style="{StaticResource SmallDataGridStyle}" Margin="0,4,0,0">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Data" Binding="{Binding DataUtworzenia, StringFormat=MM-dd HH:mm}" Width="85"/>
                                    <DataGridTextColumn Header="Kto" Binding="{Binding KtoDodal}" Width="60"/>
                                    <DataGridTextColumn Header="TreÅ›Ä‡" Binding="{Binding Tresc}" Width="*">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextWrapping" Value="Wrap"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>

                            <GroupBox Grid.Row="2" Header="Ostatnie notatki (wszystkie)" Style="{StaticResource ModernGroupBoxStyle}" Margin="0,4,0,0" MaxHeight="150">
                                <DataGrid x:Name="dgOstatnieNotatki" Style="{StaticResource SmallDataGridStyle}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Data" Binding="{Binding DataUtworzenia, StringFormat=MM-dd HH:mm}" Width="75"/>
                                        <DataGridTextColumn Header="OdbiÃ³r" Binding="{Binding DataOdbioru}" Width="70"/>
                                        <DataGridTextColumn Header="Dostawca" Binding="{Binding Dostawca}" Width="90"/>
                                        <DataGridTextColumn Header="TreÅ›Ä‡" Binding="{Binding Tresc}" Width="*"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </GroupBox>
                        </Grid>
                    </TabItem>

                    <!-- TAB: RANKING -->
                    <TabItem Header="Ranking">
                        <Grid Margin="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <DataGrid x:Name="dgRanking" Grid.Row="0" Style="{StaticResource SmallDataGridStyle}">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="#" Binding="{Binding Pozycja}" Width="30"/>
                                    <DataGridTextColumn Header="Dostawca" Binding="{Binding Dostawca}" Width="120"/>
                                    <DataGridTextColumn Header="Åšr. waga" Binding="{Binding SredniaWaga}" Width="60"/>
                                    <DataGridTextColumn Header="Dostawy" Binding="{Binding LiczbaD}" Width="55"/>
                                    <DataGridTextColumn Header="Punkty" Binding="{Binding Punkty}" Width="55"/>
                                </DataGrid.Columns>
                            </DataGrid>

                            <Button Grid.Row="1" Content="ðŸ“Š PokaÅ¼ historiÄ™" Style="{StaticResource ActionButtonStyle}" Click="BtnPokazHistorie_Click" Margin="0,4,0,0" HorizontalAlignment="Center"/>
                        </Grid>
                    </TabItem>

                    <!-- TAB: STATYSTYKI -->
                    <TabItem Header="Statystyki">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="8">
                                <GroupBox Header="Statystyki tygodniowe (ostatnie 7 dni)" Style="{StaticResource ModernGroupBoxStyle}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" Margin="4">
                                            <TextBlock Text="Dostawy" Style="{StaticResource FormLabelStyle}" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtStatTotal" Text="0" FontSize="24" FontWeight="Bold" Foreground="#2C3E50" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" Margin="4">
                                            <TextBlock Text="Auta" Style="{StaticResource FormLabelStyle}" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtStatAuta" Text="0" FontSize="24" FontWeight="Bold" Foreground="#3498DB" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="0" Grid.Column="2" HorizontalAlignment="Center" Margin="4">
                                            <TextBlock Text="Sztuki" Style="{StaticResource FormLabelStyle}" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtStatSztuki" Text="0" FontSize="24" FontWeight="Bold" Foreground="#27AE60" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center" Margin="4">
                                            <TextBlock Text="Åšr. waga" Style="{StaticResource FormLabelStyle}" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtStatAvgWaga" Text="0.00 kg" FontSize="18" FontWeight="SemiBold" Foreground="#8E44AD" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" Margin="4">
                                            <TextBlock Text="Potwierdzone" Style="{StaticResource FormLabelStyle}" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtStatPotwierdzone" Text="0" FontSize="18" FontWeight="SemiBold" Foreground="#27AE60" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center" Margin="4">
                                            <TextBlock Text="Anulowane" Style="{StaticResource FormLabelStyle}" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtStatAnulowane" Text="0" FontSize="18" FontWeight="SemiBold" Foreground="#E74C3C" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </GroupBox>

                                <GroupBox Header="SkrÃ³ty klawiszowe" Style="{StaticResource ModernGroupBoxStyle}" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text="Ctrl+D - Duplikuj dostawÄ™" FontSize="10" Margin="2"/>
                                        <TextBlock Text="Ctrl+N - Nowa dostawa" FontSize="10" Margin="2"/>
                                        <TextBlock Text="Ctrl+S - Zapisz zmiany" FontSize="10" Margin="2"/>
                                        <TextBlock Text="Ctrl+R / F5 - OdÅ›wieÅ¼ dane" FontSize="10" Margin="2"/>
                                        <TextBlock Text="Ctrl+A - Zaznacz wszystko" FontSize="10" Margin="2"/>
                                        <TextBlock Text="Delete - UsuÅ„ dostawÄ™" FontSize="10" Margin="2"/>
                                        <TextBlock Text="+/- - PrzesuÅ„ datÄ™ o dzieÅ„" FontSize="10" Margin="2"/>
                                        <TextBlock Text="Escape - Anuluj zaznaczenie" FontSize="10" Margin="2"/>
                                    </StackPanel>
                                </GroupBox>

                                <GroupBox Header="Funkcje" Style="{StaticResource ModernGroupBoxStyle}" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text="â€¢ PrzeciÄ…gnij i upuÅ›Ä‡ - przenieÅ› dostawÄ™ miÄ™dzy dniami" FontSize="10" Margin="2" TextWrapping="Wrap"/>
                                        <TextBlock Text="â€¢ Prawy przycisk myszy - menu kontekstowe" FontSize="10" Margin="2" TextWrapping="Wrap"/>
                                        <TextBlock Text="â€¢ Ctrl+klik - zaznacz wiele dostaw" FontSize="10" Margin="2" TextWrapping="Wrap"/>
                                        <TextBlock Text="â€¢ Auto-odÅ›wieÅ¼anie co 10 minut" FontSize="10" Margin="2" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </GroupBox>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- TAB: PARTIE BIEÅ»Ä„CE -->
                    <TabItem Header="Partie">
                        <Grid Margin="4">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Border Grid.Row="0" Background="#388E3C" Padding="8,4" CornerRadius="4,4,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Partie bieÅ¼Ä…ce (dziÅ›)" Foreground="White" FontWeight="SemiBold" FontSize="11"/>
                                    <TextBlock x:Name="txtPartieSuma" Text="" Foreground="#C8E6C9" FontSize="10" Margin="20,0,0,0" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            <DataGrid x:Name="dgPartie" Grid.Row="1" Style="{StaticResource SmallDataGridStyle}" CellEditEnding="DgPartie_CellFormatting">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Nr" Binding="{Binding Partia}" Width="35"/>
                                    <DataGridTextColumn Header="Dostawca" Binding="{Binding Dostawca}" Width="100"/>
                                    <DataGridTextColumn Header="Åšr." Binding="{Binding SredniaDisplay}" Width="55"/>
                                    <DataGridTextColumn Header="Å»ywiec" Binding="{Binding ZywiecDisplay}" Width="55"/>
                                    <DataGridTextColumn Header="RÃ³Å¼n." Binding="{Binding RoznicaDisplay}" Width="55"/>
                                    <DataGridTextColumn Header="Skrz." Binding="{Binding SkrzydlaDisplay}" Width="45"/>
                                    <DataGridTextColumn Header="Nogi" Binding="{Binding NogiDisplay}" Width="45"/>
                                    <DataGridTextColumn Header="Oparz." Binding="{Binding OparzeniaDisplay}" Width="45"/>
                                    <DataGridTextColumn Header="Kl.B" Binding="{Binding KlasaBDisplay}" Width="45"/>
                                    <DataGridTextColumn Header="Przek." Binding="{Binding PrzekarmienieDisplay}" Width="50"/>
                                    <DataGridHyperlinkColumn Header="ZdjÄ™cia" Binding="{Binding ZdjeciaLink}" Width="60">
                                        <DataGridHyperlinkColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <EventSetter Event="Hyperlink.Click" Handler="Hyperlink_Click"/>
                                            </Style>
                                        </DataGridHyperlinkColumn.ElementStyle>
                                    </DataGridHyperlinkColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Border>

            <!-- INFO MODYFIKACJI -->
            <Border Grid.Row="4" Background="White" CornerRadius="4" Padding="6">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Utworzono:" Style="{StaticResource FormLabelStyle}"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock x:Name="txtDataStwo" FontSize="10"/>
                            <TextBlock x:Name="txtKtoStwo" FontSize="10" Margin="8,0,0,0" Foreground="#7F8C8D"/>
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Modyfikowano:" Style="{StaticResource FormLabelStyle}"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock x:Name="txtDataMod" FontSize="10"/>
                            <TextBlock x:Name="txtKtoMod" FontSize="10" Margin="8,0,0,0" Foreground="#7F8C8D"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
