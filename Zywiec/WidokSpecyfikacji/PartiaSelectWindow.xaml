<Window x:Class="Kalendarz1.Zywiec.WidokSpecyfikacji.PartiaSelectWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Wybierz partiÄ™"
        Height="650" Width="850"
        WindowStartupLocation="CenterOwner"
        Background="#FAFAFA">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Naglowek -->
        <Border Grid.Row="0" Background="#9C27B0" Padding="15,12" CornerRadius="8" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Wybierz partie drobiu" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock x:Name="txtDostawca" FontSize="13" Foreground="#E1BEE7" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Filtry i akcje -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="Szukaj:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBox Grid.Column="1" x:Name="txtSearch"
                     TextChanged="TxtSearch_TextChanged"
                     Padding="8,6" FontSize="13"/>

            <Button Grid.Column="2" Content="Odswiez"
                    Click="BtnRefresh_Click"
                    Padding="12,8" Margin="10,0,0,0"
                    Background="#E1BEE7" BorderThickness="0" Cursor="Hand"/>

            <Button Grid.Column="3" x:Name="btnNowaPartia" Content="+ Nowa partia"
                    Click="BtnNowaPartia_Click"
                    Padding="12,8" Margin="10,0,0,0"
                    Background="#4CAF50" Foreground="White"
                    FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
        </Grid>

        <!-- Lista partii -->
        <Border Grid.Row="2" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="4">
            <DataGrid x:Name="dgPartie"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      CanUserAddRows="False"
                      GridLinesVisibility="Horizontal"
                      HorizontalGridLinesBrush="#EEEEEE"
                      RowHeight="36"
                      MouseDoubleClick="DgPartie_DoubleClick"
                      Background="White">
                <DataGrid.Columns>
                    <!-- Nr partii z formatem CustomerID&Partia -->
                    <DataGridTemplateColumn Header="Nr partii" Width="180">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding FullPartiaNumber}"
                                           VerticalAlignment="Center" Padding="8,0">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="Foreground" Value="#9C27B0"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsClose}" Value="True">
                                                    <Setter Property="Foreground" Value="#D32F2F"/>
                                                    <Setter Property="TextDecorations" Value="Strikethrough"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <!-- Status partii -->
                    <DataGridTemplateColumn Header="Status" Width="150">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding StatusDisplay}"
                                           VerticalAlignment="Center" Padding="4,0">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsClose}" Value="True">
                                                    <Setter Property="Foreground" Value="#D32F2F"/>
                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="Data utworzenia"
                        Binding="{Binding CreateData, StringFormat=dd.MM.yyyy}" Width="110">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Godzina"
                        Binding="{Binding CreateGodzina, StringFormat=hh\\:mm}" Width="70">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Dostawca" Binding="{Binding CustomerName}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="8,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Info o ilosci -->
        <TextBlock Grid.Row="3" x:Name="txtInfo"
                   Text="" Foreground="#757575"
                   Margin="0,10,0,0" FontSize="12"/>

        <!-- Przyciski -->
        <StackPanel Grid.Row="4" Orientation="Horizontal"
                    HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Usun przypisanie"
                    Click="BtnUsunPartie_Click"
                    Padding="15,10" Margin="0,0,10,0"
                    Background="#FFCDD2" BorderThickness="0" Cursor="Hand"/>
            <Button Content="Anuluj" Width="100" Padding="15,10"
                    Click="BtnAnuluj_Click" Margin="0,0,10,0"/>
            <Button x:Name="btnWybierz" Content="Wybierz"
                    Width="130" Padding="15,10"
                    Click="BtnWybierz_Click"
                    Background="#9C27B0" Foreground="White"
                    FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
        </StackPanel>
    </Grid>
</Window>
