<Window x:Class="Kalendarz1.ImportAvilogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Import planu transportu z AVILOG"
        Height="800" Width="1600"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="#ECEFF1"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Styl dla przycisków -->
        <Style x:Key="MainButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#5C8A3A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="14,10"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#4B732F"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#CCCCCC"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#607D8B"/>
        </Style>

        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#E74C3C"/>
        </Style>

        <!-- Styl dla nagłówków DataGrid -->
        <Style x:Key="DataGridHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#34495E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="8,10"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="#2C3E50"/>
            <Setter Property="BorderThickness" Value="0,0,1,0"/>
        </Style>

        <Style x:Key="AvilogHeaderStyle" TargetType="DataGridColumnHeader" BasedOn="{StaticResource DataGridHeaderStyle}">
            <Setter Property="Background" Value="#E65100"/>
        </Style>

        <Style x:Key="MappingHeaderStyle" TargetType="DataGridColumnHeader" BasedOn="{StaticResource DataGridHeaderStyle}">
            <Setter Property="Background" Value="#1976D2"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Nagłówek -->
        <Border Grid.Row="0" Background="#34495E" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="IMPORT Z AVILOG" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                    <Button x:Name="btnWybierzPlik" Content="Wybierz plik PDF" Style="{StaticResource MainButtonStyle}"
                            Margin="20,0,0,0" Click="BtnWybierzPlik_Click"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Data uboju:" Foreground="#B0BEC5" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBlock x:Name="lblDataUboju" Text="-" FontSize="16" FontWeight="Bold" Foreground="#4CAF50" VerticalAlignment="Center"/>
                    <TextBlock Text="Wierszy:" Foreground="#B0BEC5" VerticalAlignment="Center" Margin="30,0,10,0"/>
                    <TextBlock x:Name="lblLiczbaWierszy" Text="0" FontSize="16" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <TextBlock Text="Plik:" Foreground="#B0BEC5" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBlock x:Name="lblNazwaPliku" Text="Nie wybrano" Foreground="White" VerticalAlignment="Center" MaxWidth="300" TextTrimming="CharacterEllipsis"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Główna tabela -->
        <DataGrid x:Name="dataGridImport" Grid.Row="1"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  SelectionMode="Single"
                  SelectionUnit="FullRow"
                  GridLinesVisibility="Horizontal"
                  HorizontalGridLinesBrush="#E0E0E0"
                  RowHeight="60"
                  Background="White"
                  BorderBrush="#DDDDDD"
                  BorderThickness="1"
                  ColumnHeaderStyle="{StaticResource DataGridHeaderStyle}"
                  Margin="10">

            <DataGrid.Columns>
                <!-- LP -->
                <DataGridTextColumn Header="LP" Binding="{Binding Lp}" Width="40" IsReadOnly="True">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource DataGridHeaderStyle}"/>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>

                <!-- AVILOG: Kierowca -->
                <DataGridTextColumn Header="KIEROWCA (AVILOG)" Binding="{Binding AvilogKierowca}" Width="150" IsReadOnly="True">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource AvilogHeaderStyle}"/>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Background" Value="#FFF3E0"/>
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Mapowanie: Kierowca -->
                <DataGridTemplateColumn Header="KIEROWCA (BAZA)" Width="180">
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MappingHeaderStyle}"/>
                    </DataGridTemplateColumn.HeaderStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext.ListaKierowcow}"
                                      SelectedValue="{Binding MappedKierowcaGID, UpdateSourceTrigger=PropertyChanged}"
                                      SelectedValuePath="GID"
                                      DisplayMemberPath="Name"
                                      Background="#E3F2FD"
                                      Padding="5"
                                      VerticalContentAlignment="Center"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- AVILOG: Hodowca -->
                <DataGridTextColumn Header="HODOWCA (AVILOG)" Binding="{Binding AvilogHodowca}" Width="200" IsReadOnly="True">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource AvilogHeaderStyle}"/>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Background" Value="#FFF3E0"/>
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextWrapping" Value="Wrap"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- AVILOG: Adres hodowcy -->
                <DataGridTextColumn Header="ADRES (AVILOG)" Binding="{Binding AvilogAdres}" Width="180" IsReadOnly="True">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource AvilogHeaderStyle}"/>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Background" Value="#FFF8E1"/>
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextWrapping" Value="Wrap"/>
                            <Setter Property="FontSize" Value="10"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Mapowanie: Hodowca -->
                <DataGridTemplateColumn Header="HODOWCA (BAZA)" Width="200">
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MappingHeaderStyle}"/>
                    </DataGridTemplateColumn.HeaderStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext.ListaHodowcow}"
                                      SelectedValue="{Binding MappedHodowcaGID, UpdateSourceTrigger=PropertyChanged}"
                                      SelectedValuePath="GID"
                                      DisplayMemberPath="ShortName"
                                      Background="#E3F2FD"
                                      Padding="5"
                                      VerticalContentAlignment="Center"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Pojazd -->
                <DataGridTextColumn Header="CIAGNIK" Binding="{Binding Ciagnik}" Width="100" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="NACZEPA" Binding="{Binding Naczepa}" Width="100" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Ilości -->
                <DataGridTextColumn Header="SZTUKI" Binding="{Binding Sztuki, StringFormat=N0}" Width="80" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextAlignment" Value="Right"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="WAGA/SZT" Binding="{Binding WagaDek, StringFormat=N2}" Width="80" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Godziny -->
                <DataGridTextColumn Header="WYJAZD" Binding="{Binding WyjazdDisplay}" Width="80" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="Background" Value="#F3E5F5"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="ZALADUN." Binding="{Binding ZaladunekDisplay}" Width="80" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="Background" Value="#F3E5F5"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="POWRÓT" Binding="{Binding PowrotDisplay}" Width="80" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="Background" Value="#F3E5F5"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Obserwacje -->
                <DataGridTextColumn Header="UWAGI" Binding="{Binding Obserwacje}" Width="*" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextWrapping" Value="Wrap"/>
                            <Setter Property="Foreground" Value="#E65100"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Status mapowania -->
                <DataGridTextColumn Header="STATUS" Binding="{Binding StatusMapowania}" Width="100" IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Panel mapowania -->
        <Border Grid.Row="2" Background="#FFF8E1" Padding="10" Margin="10,0,10,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Niezamapowani hodowcy:" VerticalAlignment="Center" FontWeight="Bold" Margin="0,0,10,0"/>
                    <TextBlock x:Name="lblNiezamapowani" Text="0" FontSize="16" FontWeight="Bold" Foreground="#E65100" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <CheckBox x:Name="chkZapamietajMapowania" Content="Zapamiętaj mapowania na przyszłość"
                              IsChecked="True" VerticalAlignment="Center" FontWeight="SemiBold"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="btnAutoMapuj" Content="Auto-mapuj" Style="{StaticResource SecondaryButtonStyle}"
                            Click="BtnAutoMapuj_Click" ToolTip="Automatycznie dopasuj hodowców po podobieństwie nazw"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Przyciski akcji -->
        <Border Grid.Row="3" Background="#ECEFF1" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock x:Name="lblStatus" Text="Wybierz plik PDF z planem transportu AVILOG"
                               VerticalAlignment="Center" FontStyle="Italic" Foreground="#757575"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="btnAnuluj" Content="Anuluj" Style="{StaticResource DangerButtonStyle}"
                            Click="BtnAnuluj_Click" Width="100"/>
                    <Button x:Name="btnImportuj" Content="IMPORTUJ DO MATRYCY" Style="{StaticResource MainButtonStyle}"
                            Click="BtnImportuj_Click" Width="200" IsEnabled="False" FontSize="14"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
