<Window x:Class="Kalendarz1.PanelPortiera"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Panel Portiera - System WaÅ¼enia"
        Height="1080" Width="1920"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        WindowStyle="None"
        ResizeMode="NoResize"
        Background="#121212"
        FontFamily="Segoe UI"
        Loaded="Window_Loaded">

    <Window.Resources>
        <!-- 1. KOLORY (Brushes) - Definicja poczÄ…tkowa -->
        <SolidColorBrush x:Key="ThemeColor" Color="#FFA726"/>
        <SolidColorBrush x:Key="BackgroundDark" Color="#121212"/>
        <SolidColorBrush x:Key="CardBackground" Color="#1E1E2E"/>
        <SolidColorBrush x:Key="PanelBackground" Color="#161621"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#888899"/>

        <!-- 2. KONWERTERY -->
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>

        <!-- 3. STYLE -->

        <!-- Styl wyboru towaru (GRUBSZE GUZIKI) -->
        <Style x:Key="CommodityRadioStyle" TargetType="RadioButton">
            <Setter Property="Background" Value="#252530"/>
            <Setter Property="Foreground" Value="#888"/>
            <Setter Property="FontSize" Value="20"/>
            <!-- WiÄ™ksza czcionka -->
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Height" Value="60"/>
            <!-- Grubsze guziki -->
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="bdr" Background="{TemplateBinding Background}" CornerRadius="8" BorderThickness="2" BorderBrush="Transparent">
                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Orientation="Horizontal">
                                <TextBlock x:Name="icon" Text="{TemplateBinding Tag}" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                <TextBlock x:Name="txt" Text="{TemplateBinding Content}" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="{DynamicResource ThemeColor}"/>
                                <Setter TargetName="bdr" Property="BorderBrush" Value="{DynamicResource ThemeColor}"/>
                                <Setter TargetName="txt" Property="Foreground" Value="Black"/>
                                <Setter TargetName="icon" Property="Foreground" Value="Black"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Styl Klawisza Klawiatury Ekranowej -->
        <Style x:Key="KbdKey" TargetType="Button">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Height" Value="60"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="{DynamicResource ThemeColor}"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Style -->
        <Style x:Key="MyDataGridStyle" TargetType="DataGrid">
            <Setter Property="Background" Value="{DynamicResource CardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
            <Setter Property="RowBackground" Value="{DynamicResource PanelBackground}"/>
            <Setter Property="AlternatingRowBackground" Value="{DynamicResource CardBackground}"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#333"/>
            <Setter Property="VerticalGridLinesBrush" Value="Transparent"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="RowHeight" Value="65"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="IsReadOnly" Value="True"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#252530"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeColor}"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Height" Value="55"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeColor}"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="15,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="Transparent" BorderThickness="0">
                            <ContentPresenter VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#333"/>
                    <Setter Property="Foreground" Value="{DynamicResource ThemeColor}"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Date Nav Btn -->
        <Style x:Key="DateNavBtn" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondary}"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8" BorderBrush="#333" BorderThickness="1">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#252535"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ThemeColor}"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Top Menu Tabs -->
        <Style x:Key="TopNavRadioStyle" TargetType="RadioButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#888"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="bdr" Background="{TemplateBinding Background}" Padding="20,10" 
                                CornerRadius="8" BorderThickness="0,0,0,3" BorderBrush="Transparent">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="icon" Text="{TemplateBinding Tag}" FontSize="24" Margin="0,0,10,0"/>
                                <TextBlock x:Name="txt" Text="{TemplateBinding Content}" FontSize="18" FontWeight="Bold" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="#252535"/>
                                <Setter TargetName="bdr" Property="BorderBrush" Value="{DynamicResource ThemeColor}"/>
                                <Setter TargetName="txt" Property="Foreground" Value="White"/>
                                <Setter TargetName="icon" Property="Foreground" Value="{DynamicResource ThemeColor}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="bdr" Property="Background" Value="#1E1E2E"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Weigh Mode -->
        <Style x:Key="WeighModeRadioStyle" TargetType="RadioButton">
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Foreground" Value="#666"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="bdr" Background="#1E1E24" CornerRadius="8" Margin="4">
                            <Grid>
                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <TextBlock x:Name="txt" Text="{TemplateBinding Content}" 
                                               HorizontalAlignment="Center"
                                               FontSize="20" FontWeight="Bold" Foreground="{TemplateBinding Foreground}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="{DynamicResource ThemeColor}"/>
                                <Setter Property="Foreground" Value="#121212"/>
                                <Setter TargetName="bdr" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="Black" BlurRadius="10" Opacity="0.3" ShadowDepth="2"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Card Style -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource CardBackground}"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#333"/>
            <Setter Property="MinHeight" Value="135"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2A2A3A"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource ThemeColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Numpad -->
        <Style x:Key="BigNumpadBtn" TargetType="Button">
            <Setter Property="Background" Value="#222"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="40"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bdr" Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="{DynamicResource ThemeColor}"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="#333"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Input Style -->
        <Style x:Key="InputBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#252530"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6" BorderThickness="1" BorderBrush="#444">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{DynamicResource BackgroundDark}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- === GÃ“RNY PASEK MENU === -->
        <Border Grid.Row="0" Background="#161618" Padding="15,10" BorderThickness="0,0,0,1" BorderBrush="#333">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="âš–ï¸" FontSize="28" VerticalAlignment="Center" Margin="0,0,20,0" Foreground="White"/>

                    <RadioButton Content="AVILOG" Tag="ðŸ”" Style="{StaticResource TopNavRadioStyle}" IsChecked="True" 
                                 Click="ZmienTryb_Click" GroupName="Mode" x:Name="rbAvilog"/>

                    <RadioButton Content="ODPADY / INNE" Tag="â™»ï¸" Style="{StaticResource TopNavRadioStyle}" 
                                 Click="ZmienTryb_Click" GroupName="Mode" x:Name="rbOdpady"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="30,0,0,0">
                    <Border Width="4" Height="30" Background="{DynamicResource ThemeColor}" CornerRadius="2" Margin="0,0,10,0"/>
                    <TextBlock x:Name="lblHeaderTitle" Text="LISTA: AVILOG" FontSize="22" FontWeight="Bold" Foreground="{DynamicResource TextPrimary}" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding ElementName=listDostawy, Path=Items.Count, StringFormat=' ({0})'}" 
                               FontSize="22" Foreground="{DynamicResource TextSecondary}" VerticalAlignment="Center"/>
                    <Button Click="BtnRefresh_Click" Background="Transparent" BorderThickness="0" Cursor="Hand" Margin="15,0,0,0" VerticalAlignment="Center" ToolTip="OdÅ›wieÅ¼ listÄ™">
                        <TextBlock Text="ðŸ”„" FontSize="20" Foreground="{DynamicResource TextSecondary}"/>
                    </Button>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,20,0">
                    <Button Content="â—€" Click="PrevDay_Click" Style="{StaticResource DateNavBtn}" Margin="0,0,5,0" Height="40" Width="40" FontSize="18"/>
                    <Border Background="#252535" CornerRadius="6" Height="40" Padding="10,0">
                        <DatePicker SelectedDate="{Binding SelectedDate, Mode=TwoWay}" 
                                    SelectedDateChanged="DatePicker_SelectedDateChanged"
                                    Width="140" FontSize="16" FontWeight="Bold"
                                    VerticalContentAlignment="Center" BorderThickness="0" Background="Transparent"/>
                    </Border>
                    <Button Content="â–¶" Click="NextDay_Click" Style="{StaticResource DateNavBtn}" Margin="5,0,20,0" Height="40" Width="40" FontSize="18"/>
                    <Border Background="#000" CornerRadius="6" Padding="20,0" Height="45" BorderBrush="#333" BorderThickness="1">
                        <TextBlock x:Name="lblTime" Text="12:00" FontSize="30" FontWeight="Black" Foreground="{DynamicResource ThemeColor}" VerticalAlignment="Center"/>
                    </Border>
                </StackPanel>

                <Button Grid.Column="3" Click="BtnClose_Click" Background="Transparent" BorderThickness="0" Cursor="Hand" VerticalAlignment="Center">
                    <Border Background="#251010" Padding="15,8" CornerRadius="6" BorderBrush="#500" BorderThickness="1">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="EXIT" FontSize="12" Foreground="#FF8888" VerticalAlignment="Center" Margin="0,0,5,0" FontWeight="Bold"/>
                            <TextBlock Text="âŒ" FontSize="18"/>
                        </StackPanel>
                    </Border>
                </Button>
            </Grid>
        </Border>

        <!-- === 2. GÅÃ“WNA ZAWARTOÅšÄ† === -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <!-- Lista/Tabela -->
                <ColumnDefinition Width="600"/>
                <!-- Panel Prawy -->
            </Grid.ColumnDefinitions>

            <!-- ================= LEWA STRONA: LISTA / TABELA ================= -->
            <Grid Grid.Column="0" Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- WIDOK 1: LISTA KAFELKÃ“W (Dla Avilog) -->
                <ScrollViewer x:Name="viewTiles" Grid.Row="1" VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
                    <ItemsControl x:Name="listDostawy">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="3" VerticalAlignment="Top"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource CardStyle}" MouseLeftButtonUp="Dostawa_Click" Tag="{Binding}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="10"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0" Background="{Binding StatusColor}" CornerRadius="3"/>
                                        <Grid Grid.Column="1" Margin="12,0,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0" Margin="0,0,0,8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Orientation="Horizontal">
                                                    <Border Background="#333" CornerRadius="4" Padding="6,1" Margin="0,0,8,0">
                                                        <TextBlock Text="{Binding Lp}" Foreground="White" FontWeight="Bold" FontSize="14"/>
                                                    </Border>
                                                    <TextBlock Text="{Binding GodzinaPrzyjazdu}" Foreground="{DynamicResource ThemeColor}" FontWeight="Bold" FontSize="16" VerticalAlignment="Center"/>
                                                </StackPanel>
                                                <TextBlock Grid.Column="2" Text="{Binding HodowcaNazwa}" FontSize="13" FontWeight="Bold" Foreground="#FF5555" TextTrimming="CharacterEllipsis" MaxWidth="140" VerticalAlignment="Center"/>
                                            </Grid>
                                            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,2">
                                                <TextBlock Text="{Binding CarID}" FontSize="28" FontWeight="Black" Foreground="White"/>
                                                <TextBlock Text=" " FontSize="28"/>
                                                <TextBlock Text="{Binding TrailerID}" FontSize="28" FontWeight="Black" Foreground="#FFA726"/>
                                            </StackPanel>
                                            <TextBlock Grid.Row="2" Text="{Binding KierowcaNazwa}" FontSize="18" FontWeight="Bold" Foreground="#DDD" TextTrimming="CharacterEllipsis" Margin="0,0,0,10"/>
                                            <Grid Grid.Row="4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="8"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Border Grid.Column="0" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Background="#161618" Padding="4">
                                                    <StackPanel>
                                                        <TextBlock Text="BRUTTO" FontSize="9" Foreground="#888" HorizontalAlignment="Center"/>
                                                        <TextBlock Text="{Binding BruttoDisplay}" FontSize="24" FontWeight="Black" Foreground="White" HorizontalAlignment="Center"/>
                                                    </StackPanel>
                                                </Border>
                                                <Border Grid.Column="2" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Background="#161618" Padding="4">
                                                    <StackPanel>
                                                        <TextBlock Text="TARA" FontSize="9" Foreground="#888" HorizontalAlignment="Center"/>
                                                        <TextBlock Text="{Binding TaraDisplay}" FontSize="24" FontWeight="Black" Foreground="{DynamicResource TextSecondary}" HorizontalAlignment="Center"/>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <!-- WIDOK 2: TABELA (Dla OdpadÃ³w) -->
                <DataGrid x:Name="gridTable" Grid.Row="1" AutoGenerateColumns="False" 
                          Style="{StaticResource MyDataGridStyle}"
                          Visibility="Collapsed" IsReadOnly="True" SelectionMode="Single"
                          SelectionChanged="GridTable_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Godz." Binding="{Binding GodzinaPrzyjazdu}" Width="90"/>
                        <DataGridTextColumn Header="Nr Rejestracyjny" Binding="{Binding NrRejestracyjny}" Width="250" FontWeight="Bold"/>
                        <DataGridTextColumn Header="Towar" Binding="{Binding Towar}" Width="150"/>
                        <DataGridTextColumn Header="Odbiorca" Binding="{Binding HodowcaNazwa}" Width="*"/>
                        <DataGridTextColumn Header="Brutto" Binding="{Binding BruttoDisplay}" Width="120"/>
                        <DataGridTextColumn Header="Tara" Binding="{Binding TaraDisplay}" Width="120"/>
                        <DataGridTextColumn Header="Netto" Binding="{Binding NettoDisplay}" Width="120" Foreground="{DynamicResource ThemeColor}"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Przyciski NOWE i USUÅƒ -->
                <StackPanel x:Name="panelButtonsLeft" Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="20"
                            Orientation="Horizontal" Visibility="Collapsed">

                    <Button x:Name="btnDelete" Width="80" Height="80" Margin="0,0,15,0" Click="BtnDelete_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="#442222" CornerRadius="40" BorderBrush="#FF5555" BorderThickness="2">
                                    <TextBlock Text="ðŸ—‘" FontSize="30" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#FF5555"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="btnNewEntry" Width="220" Height="80" Click="BtnNewEntry_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{DynamicResource ThemeColor}" CornerRadius="40">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="20" Opacity="0.6"/>
                                    </Border.Effect>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="âž•" FontSize="30" Margin="0,0,10,0" Foreground="Black"/>
                                        <TextBlock Text="NOWE" FontSize="24" FontWeight="Black" Foreground="Black"/>
                                    </StackPanel>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- ================= PRAWA STRONA: PANEL KONTROLNY ================= -->
            <Border Grid.Column="1" Background="{DynamicResource PanelBackground}" BorderBrush="#252530" BorderThickness="1,0,0,0">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <!-- Karta Auta (Edytowalna) -->
                        <RowDefinition Height="Auto"/>
                        <!-- WYBÃ“R TOWARU (Nowe!) -->
                        <RowDefinition Height="Auto"/>
                        <!-- Waga (Wielka) -->
                        <RowDefinition Height="Auto"/>
                        <!-- Toggle -->
                        <RowDefinition Height="*"/>
                        <!-- Numpad -->
                        <RowDefinition Height="Auto"/>
                        <!-- Save -->
                    </Grid.RowDefinitions>

                    <!-- 1. KARTA AUTA -->
                    <Border Grid.Row="0" Background="#1E1E2E" CornerRadius="8" Padding="15" Margin="0,0,0,10" BorderThickness="1" BorderBrush="#333">
                        <StackPanel>
                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="DANE POJAZDU" FontSize="12" Foreground="#666" FontWeight="Bold"/>
                                <TextBlock x:Name="lblTrybPracy" Text="PODGLÄ„D" FontSize="12" Foreground="{DynamicResource ThemeColor}" FontWeight="Bold"/>
                            </Grid>

                            <!-- NR REJESTRACYJNY -->
                            <Grid>
                                <!-- Widok tylko do odczytu (Avilog) -->
                                <StackPanel x:Name="panelReadOnlyCar" Visibility="Visible">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock x:Name="lblWybranyPojazd" Text="---" FontSize="28" FontWeight="Black" Foreground="White"/>
                                        <TextBlock Text=" " FontSize="28"/>
                                        <TextBlock x:Name="lblWybranaNaczepa" Text="---" FontSize="28" FontWeight="Black" Foreground="#FFA726"/>
                                    </StackPanel>
                                    <TextBlock x:Name="lblWybranyKierowca" Text="Wybierz auto..." FontSize="16" Foreground="#AAA" Margin="0,5,0,0"/>
                                </StackPanel>

                                <!-- Widok do edycji (Odpady) -->
                                <StackPanel x:Name="panelEditCar" Visibility="Collapsed">
                                    <TextBlock Text="Nr Rejestracyjny:" FontSize="14" Foreground="#888"/>
                                    <!-- KLIKNIÄ˜CIE W TEXTBOX OTWIERA KLAWIATURÄ˜ -->
                                    <TextBox x:Name="txtEditRejestracja" Text="WB 12345" Style="{StaticResource InputBoxStyle}"
                                             PreviewMouseLeftButtonUp="TxtEditRejestracja_Click" IsReadOnly="True" Cursor="Hand"/>
                                </StackPanel>
                            </Grid>

                            <Separator Background="#333" Margin="0,15"/>

                            <!-- ODBIORCA / HODOWCA -->
                            <Grid>
                                <StackPanel x:Name="panelReadOnlyOdbiorca" Visibility="Visible">
                                    <TextBlock Text="Dostawca / Hodowca:" FontSize="12" Foreground="#888"/>
                                    <TextBlock x:Name="lblWybranyHodowca" Text="---" FontSize="18" Foreground="#FF5555" FontWeight="Bold" TextWrapping="Wrap"/>
                                </StackPanel>

                                <StackPanel x:Name="panelEditOdbiorca" Visibility="Collapsed">
                                    <TextBlock x:Name="lblOdbiorcaTitle" Text="Odbiorca Towaru:" FontSize="14" Foreground="#888" Margin="0,0,0,5"/>
                                    <ComboBox x:Name="cbOdbiorcy" Height="50" FontSize="20" FontWeight="Bold" 
                                              DisplayMemberPath="Nazwa" SelectedValuePath="ID">
                                    </ComboBox>
                                </StackPanel>
                            </Grid>

                            <!-- PozostaÅ‚e info -->
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,10,0,0">
                                <TextBlock x:Name="lblWybranyOdbiorca" Visibility="Collapsed"/>
                                <TextBlock x:Name="lblPlanowaneSztuki" Text="" FontSize="14" Foreground="#FFD700" HorizontalAlignment="Right" FontWeight="Bold"/>
                                <TextBlock x:Name="lblWagiBaza" Text="" FontSize="10" Foreground="#444" HorizontalAlignment="Right" Margin="0,5,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- 2. WYBÃ“R TOWARU (NAD WAGÄ„) - Zaktualizowane kolory i ikonki -->
                    <Grid Grid.Row="1" x:Name="panelCommodity" Visibility="Collapsed" Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <RadioButton x:Name="btnKrew" Content="KREW" Tag="ðŸ©¸" GroupName="Comm" Style="{StaticResource CommodityRadioStyle}" Click="BtnCommodity_Click"/>
                        <RadioButton Grid.Column="1" x:Name="btnLapy" Content="ÅAPY" Tag="ðŸ¾" GroupName="Comm" Style="{StaticResource CommodityRadioStyle}" Click="BtnCommodity_Click"/>
                        <RadioButton Grid.Column="2" x:Name="btnJelita" Content="JELITA" Tag="âž°" GroupName="Comm" Style="{StaticResource CommodityRadioStyle}" Click="BtnCommodity_Click"/>
                        <RadioButton Grid.Column="3" x:Name="btnPiora" Content="PIÃ“RA" Tag="ðŸª¶" GroupName="Comm" Style="{StaticResource CommodityRadioStyle}" Click="BtnCommodity_Click"/>
                    </Grid>

                    <!-- 3. WYÅšWIETLACZ WAGI -->
                    <Border Grid.Row="2" Background="Black" BorderBrush="#333" BorderThickness="4" CornerRadius="8" Padding="10" Margin="0,0,0,15">
                        <Grid>
                            <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left">
                                <Ellipse x:Name="ledStabilnosc" Width="15" Height="15" Fill="Gray" Margin="5"/>
                                <TextBlock Text="STABILNA" Foreground="Gray" FontSize="10" FontWeight="Bold" Margin="5,0,0,0" Opacity="0.7"/>
                            </StackPanel>
                            <DockPanel LastChildFill="True">
                                <TextBlock DockPanel.Dock="Right" Text="kg" Foreground="#444" FontSize="24" FontWeight="Bold" VerticalAlignment="Bottom" Margin="0,0,10,15"/>
                                <Viewbox Height="90" HorizontalAlignment="Right" Margin="0,0,5,0">
                                    <TextBlock x:Name="BigWeightDisplay" Text="0" FontFamily="Consolas" FontWeight="Bold" Foreground="#00FF00"/>
                                </Viewbox>
                            </DockPanel>
                            <Button Click="BtnReadScale_Click" Background="Transparent" BorderThickness="0" Cursor="Hand"/>
                        </Grid>
                    </Border>

                    <!-- 4. PRZEÅÄ„CZNIK -->
                    <Grid Grid.Row="3" Height="60" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <RadioButton x:Name="radioBrutto" Content="ðŸ“¦ BRUTTO" GroupName="WeightType" IsChecked="True" 
                                     Style="{StaticResource WeighModeRadioStyle}" Click="Mode_Click"/>
                        <RadioButton x:Name="radioTara" Grid.Column="1" Content="ðŸš› TARA" GroupName="WeightType" 
                                     Style="{StaticResource WeighModeRadioStyle}" Click="Mode_Click"/>
                    </Grid>

                    <!-- 5. NUMPAD -->
                    <Grid Grid.Row="4" Margin="0,0,0,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Row="0" Grid.Column="0" Content="7" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="0" Grid.Column="1" Content="8" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="0" Grid.Column="2" Content="9" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="1" Grid.Column="0" Content="4" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="1" Grid.Column="1" Content="5" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="1" Grid.Column="2" Content="6" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="2" Grid.Column="0" Content="1" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="2" Grid.Column="1" Content="2" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="2" Grid.Column="2" Content="3" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="3" Grid.Column="0" Content="C" Style="{StaticResource BigNumpadBtn}" Background="#2A1515" Foreground="#FF5555" Click="BtnClear_Click"/>
                        <Button Grid.Row="3" Grid.Column="1" Content="0" Style="{StaticResource BigNumpadBtn}" Click="NumpadClick"/>
                        <Button Grid.Row="3" Grid.Column="2" Content="âŒ«" Style="{StaticResource BigNumpadBtn}" Click="BtnBackspace_Click"/>
                    </Grid>

                    <!-- 6. AKCJE -->
                    <Grid Grid.Row="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button x:Name="btnDrukuj" Content="ðŸ–¨ï¸" Margin="0,0,10,0"
                                Background="#252535" Foreground="White" FontSize="30"
                                IsEnabled="False" Click="BtnDrukuj_Click" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="bdr" Background="{TemplateBinding Background}" CornerRadius="8">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="bdr" Property="Opacity" Value="0.3"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="bdr" Property="Background" Value="#444"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <Button Grid.Column="1" x:Name="btnZapisz" Click="BtnZapisz_Click" Height="70" IsEnabled="False" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="bdr" Background="#2A2A2A" CornerRadius="8">
                                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <TextBlock x:Name="txtAction" Text="WYBIERZ Z LISTY" FontSize="20" FontWeight="Bold" Foreground="#666" HorizontalAlignment="Center"/>
                                            <TextBlock x:Name="txtSubAction" Text="ZATWIERDZENIE" FontSize="12" Foreground="#444" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="True">
                                            <Setter TargetName="bdr" Property="Background" Value="#4CAF50"/>
                                            <Setter TargetName="txtAction" Property="Text" Value="ZAPISZ WAGÄ˜"/>
                                            <Setter TargetName="txtAction" Property="Foreground" Value="White"/>
                                            <Setter TargetName="txtSubAction" Property="Text" Value="DO BAZY DANYCH"/>
                                            <Setter TargetName="txtSubAction" Property="Foreground" Value="#E0E0E0"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="bdr" Property="Background" Value="#388E3C"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- NAKÅADKA KLAWIATURY EKRANOWEJ (QWERTY) -->
        <Grid x:Name="KeyboardOverlay" Visibility="Collapsed" Background="#CC000000" Grid.RowSpan="2">
            <Border Background="#222" VerticalAlignment="Bottom" Height="350" CornerRadius="15,15,0,0" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- NagÅ‚Ã³wek klawiatury -->
                    <Grid Grid.Row="0" Margin="0,0,0,10">
                        <TextBlock Text="WPISZ NUMER REJESTRACYJNY" Foreground="Gray" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <Button Content="ZAMKNIJ" HorizontalAlignment="Right" Click="CloseKeyboard_Click" Background="Transparent" Foreground="Red" BorderThickness="0"/>
                    </Grid>

                    <!-- RzÄ…d 1 -->
                    <UniformGrid Grid.Row="1" Columns="10">
                        <Button Content="Q" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="W" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="E" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="R" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="T" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="Y" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="U" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="I" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="O" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="P" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                    </UniformGrid>

                    <!-- RzÄ…d 2 -->
                    <UniformGrid Grid.Row="2" Columns="10" Margin="20,0">
                        <Button Content="A" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="S" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="D" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="F" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="G" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="H" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="J" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="K" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        <Button Content="L" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                    </UniformGrid>

                    <!-- RzÄ…d 3 -->
                    <Grid Grid.Row="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1.5*"/>
                            <ColumnDefinition Width="7*"/>
                            <ColumnDefinition Width="1.5*"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Content="123" Style="{StaticResource KbdKey}"/>
                        <UniformGrid Grid.Column="1" Columns="7">
                            <Button Content="Z" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                            <Button Content="X" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                            <Button Content="C" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                            <Button Content="V" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                            <Button Content="B" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                            <Button Content="N" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                            <Button Content="M" Click="Keyboard_Click" Style="{StaticResource KbdKey}"/>
                        </UniformGrid>
                        <Button Grid.Column="2" Content="âŒ«" Click="KeyboardBackspace_Click" Style="{StaticResource KbdKey}" Background="#442222"/>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <StackPanel Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,20,5" Orientation="Horizontal" IsHitTestVisible="False">
            <TextBlock Text="âš–ï¸" FontSize="14" Foreground="White" Margin="0,0,5,0"/>
            <TextBlock x:Name="lblScaleStatus" Text="Offline" FontSize="12" Foreground="#444"/>
        </StackPanel>
        <TextBlock x:Name="txtBrutto" Visibility="Collapsed" Text="0"/>
        <TextBlock x:Name="txtTara" Visibility="Collapsed" Text="0"/>
        <TextBlock x:Name="txtNetto" Visibility="Collapsed" Text="0"/>
    </Grid>
</Window>